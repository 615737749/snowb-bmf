!function(e){var t={};function n(r){if(t[r])return t[r].exports;var l=t[r]={i:r,l:!1,exports:{}};return e[r].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(r,l,function(t){return e[t]}.bind(null,l));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r;function l(e){if(null!==e){for(var t=e.cols;null!==t;){for(var n=t.cell;null!==n;){var r=n;n=n.nextCell,r.nextCell=null}var l=t;t=t.nextCol,l.nextCol=null,l.cell=null}e.cols=null}}function o(e,t,n){if(null==e)return console.error("Error. col pointer was null.\n"),0;if(t<=0)return console.error("Error. height must be positive.\n"),0;var r=0;n.startIndex=0;for(var l=e.cell,o=0;null!=l;l=l.nextCell,o++)if(l.occupied)r=0,n.startIndex=o+1;else{if(r+l.height>t)return n.endIndex=o,n.overshoot=t-r,1;if(r+l.height===t)return n.endIndex=o,n.overshoot=0,1;r+=l.height}return 0}function i(e,t){if(null==e)return console.error("Error. Basepointer was null.\n"),null;for(var n=e,r=0;r<t;r++)if(null==(n=n.nextCell))return console.error("Error. Offset to large.\n"),null;return n}function u(e,t){var n={colR:{startIndex:0,endIndex:0,overshoot:0},cellR:{startIndex:0,endIndex:0,overshoot:0}};return 0===function(e,t,n){for(var r=e.cols,l=0;null!=r;r=r.nextCol,l++){var u={startIndex:0,endIndex:0,overshoot:0},h={startIndex:0,endIndex:0,overshoot:0},c=0,d=void 0;if(o(r,t.height,h))for(u.startIndex=l,u.endIndex=l,d=r;null!=d;d=d.nextCol){var a=i(d.cell,h.startIndex);if(null===a||void 0===a?void 0:a.occupied)break;if(c+d.width>t.width)return u.overshoot=t.width-c,n.colR=u,n.cellR=h,1;if(c+d.width===t.width)return u.overshoot=0,n.colR=u,n.cellR=h,1;c+=d.width,u.endIndex++}}return 0}(e,t,n)?0:0===function(e,t){for(var n=null,r=e.cols,l=0;null!=r;r=r.nextCol,l++){if(t.cellR.overshoot>0){if(null==(c=i(r.cell,t.cellR.endIndex)))continue;var o={height:c.height-t.cellR.overshoot,occupied:c.occupied,nextCell:c.nextCell};c.height=t.cellR.overshoot,c.nextCell=o}l===t.colR.endIndex&&(n=r)}if(t.colR.overshoot>0){if(null==n)return console.log("Error. Failed to find column to split.\n"),0;for(var u={width:n.width-t.colR.overshoot,nextCol:null,cell:{height:0,occupied:0,nextCell:null}},h=u.cell,c=n.cell;null!=c;c=c.nextCell){if(h.height=c.height,h.occupied=c.occupied,null==c.nextCell){h.nextCell=null;break}h.nextCell={height:0,occupied:0,nextCell:null},h=h.nextCell}u.nextCol=n.nextCol,n.width=t.colR.overshoot,n.nextCol=u}return 1}(e,n)?(console.error("Error in splitting.\n"),0):0===function(e,t,n){if(!t.__id||0===t.__id)return console.error("Error. Rectangle can't have id = "+t.__id+".\n"),0;for(var r=0,l=0,o=0,i=e.cols,u=0;null!=i&&!(u>n.colR.endIndex);i=i.nextCol,u++){if(u>=n.colR.startIndex)for(var h=i.cell,c=0;null!=h&&!(c>n.cellR.endIndex);h=h.nextCell,c++)c>=n.cellR.startIndex&&(h.occupied=t.__id,o||(t.x=r,t.y=l,o=1)),l+=h.height;r+=i.width}return 1}(e,t,n)?(console.error("Error in updating.\n"),0):1}function h(e,t,n){for(var r=function(e,t){return{enclosingWidth:e,enclosingHeight:t,cols:{width:e,nextCol:null,cell:{height:t,occupied:0,nextCell:null}}}}(t,n),o=e.length,i=0;i<o;i++)if(!u(r,e[i]))return l(r),r=null,0;return l(r),r=null,1}function c(e){for(var t=e.length,n=0,r=0;r<t;r++){if(-1===e[r].x)return console.error("Error. Can't compute placing_width if not all rectangles have been placed.\n"),-1;e[r].width+e[r].x>=n&&(n=e[r].width+e[r].x)}return n}function d(e){if(!Array.isArray(e)||0===e.length)return[];var t=e.map((function(e,t){var n=e.width,r=e.height;if(!n||!r)throw new Error("Rectangle width and height must be an integer");return{width:n,height:r,x:-1,y:-1,__id:t+1}}));return 0===function(e,t){var n,l=function(e){for(var t=e.length,n=0,r=0,l=0;l<t;l++)e[l].width>=n&&(n=e[l].width),e[l].height>=r&&(r=e[l].height);return{width:n,height:r}}(e),o=l.width,i=l.height,u=function(e){for(var t=e.length,n=0,r=0,l=0;l<t;l++)n+=e[l].width,r+=e[l].height;return{width:n,height:r}}(e).width,d=-1,a=-1,f=-1,s=function(e){for(var t=e.length,n=0,r=0;r<t;r++)n+=e[r].height*e[r].width;return n}(e);t.height=i,t.width=u,f=t.height*t.width,n=r.DO_PLACING;for(var x=1;x;)switch(n){case r.DO_PLACING:1===h(e,t.width,t.height)?(t.width=c(e),f=t.height*t.width,d=t.width,a=t.height,n=r.DEC_WIDTH):n=r.INC_HEIGHT;break;case r.DEC_WIDTH:t.width--,n=t.width<o?r.STOP:r.DO_PLACING;break;case r.INC_HEIGHT:t.height++,n=t.height*t.width<s?r.INC_HEIGHT:t.height*t.width>=f?r.DEC_WIDTH:r.DO_PLACING;break;case r.STOP:x=0}return-1===d||-1===a?0:(h(e,d,a),1)}(t,{width:0,height:0})?(console.error("Unexpected error in algorithm implementation"),[]):(t.forEach((function(e){return delete e.__id})),t)}!function(e){e[e.DO_PLACING=0]="DO_PLACING",e[e.DEC_WIDTH=1]="DEC_WIDTH",e[e.INC_HEIGHT=2]="INC_HEIGHT",e[e.STOP=3]="STOP"}(r||(r={}));var a=self;a.addEventListener("message",(function(e){var t=function(e){var t=d(e);return e.forEach((function(e,n){e.x=t[n].x,e.y=t[n].y})),e}(e.data);a.postMessage(t)}),!1)}]);
//# sourceMappingURL=RectanglePacker.654b1e16b59dc2cc713a.worker.js.map