(this["webpackJsonpsnowb-bmf"]=this["webpackJsonpsnowb-bmf"]||[]).push([[0],{120:function(e,t){},228:function(e,t,n){},367:function(e,t,n){"use strict";n.r(t);var r,i,o,a,c=n(1),l=n(0),s=n.n(l),u=n(22),f=n.n(u),p=(n(228),n(11)),d=n(429),b=n(430),h=n(13),g=n(2),j=n(9),O=n(15),y=n(19),m=n(5),w=(n(32),r=g.k.bound,i=g.k.bound,o=function(){function e(){Object(O.a)(this,e),Object(j.a)(this,"globalLoader",a,this)}return Object(y.a)(e,[{key:"showGlobalLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.globalLoader+=e}},{key:"hideGlobalLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.globalLoader+=e}}]),e}(),a=Object(m.a)(o.prototype,"globalLoader",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(m.a)(o.prototype,"showGlobalLoader",[r],Object.getOwnPropertyDescriptor(o.prototype,"showGlobalLoader"),o.prototype),Object(m.a)(o.prototype,"hideGlobalLoader",[i],Object.getOwnPropertyDescriptor(o.prototype,"hideGlobalLoader"),o.prototype),o),v=n(70),x=n(140);function k(){return new Worker(n.p+"static/js/RectanglePacker.516e747e685ab76563da.worker.js")}var P,S,C,T,B,I,$,A,z,L,M,N,E,D,X,Y,F,G,W,R,H={num:function(e){return"number"===typeof e&&!Number.isNaN(e)}},J={num:function(e,t){return H.num(e)?e:t}},U=(P=g.k.bound,S=g.k.bound,C=g.k.bound,T=g.k.bound,B=g.k.bound,I=g.k.bound,$=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e),Object(j.a)(this,"scale",A,this),Object(j.a)(this,"offsetX",z,this),Object(j.a)(this,"offsetY",L,this),Object(j.a)(this,"width",M,this),Object(j.a)(this,"height",N,this),Object(j.a)(this,"previewText",E,this),Object(j.a)(this,"selectLetter",D,this),Object(j.a)(this,"selectNextLetter",X,this),Object(j.a)(this,"showPreview",Y,this),Object(j.a)(this,"previewScale",F,this),Object(j.a)(this,"previewOffsetX",G,this),Object(j.a)(this,"previewOffsetY",W,this),t.previewText&&(this.previewText=t.previewText)}return Object(y.a)(e,[{key:"reOffset",value:function(){this.offsetX=Math.min(Math.max(this.width/-2,this.offsetX),this.width/2),this.offsetY=Math.min(Math.max(this.height/-2,this.offsetY),this.height/2),this.scale=Math.max(this.scale,.01)}},{key:"setTransform",value:function(e){this.scale=J.num(e.scale,this.scale),this.offsetX=J.num(e.offsetX,this.offsetX),this.offsetY=J.num(e.offsetY,this.offsetY),this.reOffset()}},{key:"setSize",value:function(e,t){this.width=e,this.height=t,this.reOffset()}},{key:"setPreviewText",value:function(e){this.previewText=e}},{key:"setShowPreview",value:function(e){this.showPreview=e}},{key:"setPreviewTransform",value:function(e){this.previewScale=Math.max(J.num(e.previewScale,this.previewScale),.01),this.previewOffsetX=J.num(e.previewOffsetX,this.previewOffsetX),this.previewOffsetY=J.num(e.previewOffsetY,this.previewOffsetY)}},{key:"setSelectLetter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.selectLetter=e,this.selectNextLetter=t}}]),e}(),A=Object(m.a)($.prototype,"scale",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=Object(m.a)($.prototype,"offsetX",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=Object(m.a)($.prototype,"offsetY",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=Object(m.a)($.prototype,"width",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),N=Object(m.a)($.prototype,"height",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=Object(m.a)($.prototype,"previewText",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Hello World!\nHello Snow Bamboo!"}}),D=Object(m.a)($.prototype,"selectLetter",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),X=Object(m.a)($.prototype,"selectNextLetter",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Y=Object(m.a)($.prototype,"showPreview",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=Object(m.a)($.prototype,"previewScale",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),G=Object(m.a)($.prototype,"previewOffsetX",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=Object(m.a)($.prototype,"previewOffsetY",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(m.a)($.prototype,"setTransform",[P],Object.getOwnPropertyDescriptor($.prototype,"setTransform"),$.prototype),Object(m.a)($.prototype,"setSize",[S],Object.getOwnPropertyDescriptor($.prototype,"setSize"),$.prototype),Object(m.a)($.prototype,"setPreviewText",[C],Object.getOwnPropertyDescriptor($.prototype,"setPreviewText"),$.prototype),Object(m.a)($.prototype,"setShowPreview",[T],Object.getOwnPropertyDescriptor($.prototype,"setShowPreview"),$.prototype),Object(m.a)($.prototype,"setPreviewTransform",[B],Object.getOwnPropertyDescriptor($.prototype,"setPreviewTransform"),$.prototype),Object(m.a)($.prototype,"setSelectLetter",[I],Object.getOwnPropertyDescriptor($.prototype,"setSelectLetter"),$.prototype),$),K={fontSize:"14px",fontFamily:"sans-serif"};function V(e){var t=Object(p.a)(Object(p.a)({},K),e),n=[];return t.fontStyle&&n.push(t.fontStyle),t.fontVariant&&n.push(t.fontVariant),t.fontWeight&&n.push(t.fontWeight),H.num(t.fontSize)?t.fontSize="".concat(t.fontSize,"px"):t.fontSize=K.fontSize,t.lineHeight?n.push("".concat(t.fontSize,"/").concat(t.lineHeight)):n.push(t.fontSize),n.push(t.fontFamily),n.join(" ")}var q,Q,_,Z,ee,te,ne,re,ie,oe,ae,ce,le,se,ue,fe,pe,de,be,he=n(179);var ge,je,Oe,ye,me,we,ve,xe,ke,Pe,Se=(_=g.B.ref,Z=g.B.ref,ee=g.k.bound,te=g.k.bound,ne=g.k.bound,re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e),Object(j.a)(this,"font",ie,this),Object(j.a)(this,"family",oe,this),Object(j.a)(this,"size",ae,this),Object(j.a)(this,"lineHeight",ce,this),Object(j.a)(this,"middle",le,this),Object(j.a)(this,"hanging",se,this),Object(j.a)(this,"top",ue,this),Object(j.a)(this,"alphabetic",fe,this),Object(j.a)(this,"ideographic",pe,this),Object(j.a)(this,"bottom",de,this),Object(j.a)(this,"opentype",be,this),this.size=t.size||72,this.lineHeight=t.lineHeight||1.25,t.font&&t.font.byteLength?this.setFont(t.font):this.updateBaseines()}return Object(y.a)(e,[{key:"minBaseLine",get:function(){var e=Math.min(this.middle,this.hanging,this.top,this.alphabetic,this.ideographic,this.bottom);return Number.isNaN(Number(e))?0:e}},{key:"maxBaseLine",get:function(){var e=Math.max(this.middle,this.hanging,this.top,this.alphabetic,this.ideographic,this.bottom);return Number.isNaN(Number(e))?this.size:e}}]),Object(y.a)(e,[{key:"updateBaseines",value:function(){var e=function(e,t){R||(R=document.createElement("canvas"));var n=R.getContext("2d");if(!n)throw new Error("Get context 2d failed.");var r=V(t);R.width=1,R.height=1,n.font=r,n.textBaseline="middle";var i=n.measureText(e);n.textBaseline="hanging";var o=n.measureText(e);n.textBaseline="top";var a=n.measureText(e);n.textBaseline="alphabetic";var c=n.measureText(e);n.textBaseline="ideographic";var l=n.measureText(e);n.textBaseline="bottom";var s=n.measureText(e);return{middle:0,hanging:o.actualBoundingBoxAscent-i.actualBoundingBoxAscent,top:a.actualBoundingBoxAscent-i.actualBoundingBoxAscent,alphabetic:i.actualBoundingBoxDescent-c.actualBoundingBoxDescent,ideographic:i.actualBoundingBoxDescent-l.actualBoundingBoxDescent,bottom:i.actualBoundingBoxDescent-s.actualBoundingBoxDescent}}("a",{fontFamily:this.family,fontSize:this.size});this.middle=e.middle,this.hanging=e.hanging,this.top=e.top,this.alphabetic=e.alphabetic,this.ideographic=e.ideographic,this.bottom=e.bottom}},{key:"setFont",value:function(e){var t=this;try{this.opentype=Object(he.a)(e,{lowMemory:!0})}catch(o){return Promise.resolve()}var n=this.opentype.names,r=n.postScriptName[Object.keys(n.postScriptName)[0]],i=URL.createObjectURL(new Blob([e]));return function(e,t){var n=document.createTextNode('\n    @font-face {\n        font-family: "'.concat(e,'";\n        src: url("').concat(t,"\") format('truetype');\n    }"));if(q)q.appendChild(n);else{var r=document.createTextNode("A");q=document.createElement("style"),Q=document.createElement("div"),document.head.appendChild(q),q.appendChild(n),Q.appendChild(r),Q.style.position="absolute",Q.style.left="-1000px",Q.style.top="-1000px",Q.style.opacity="0",Q.style.fontSize="12px",Q.style.pointerEvents="none",document.body.appendChild(Q)}return Q.style.fontFamily=e,new Promise((function(e){return setTimeout(e,200)}))}(r,i).then((function(){Object(g.F)((function(){t.family=r,t.font=e,t.updateBaseines()}))}))}},{key:"setSize",value:function(e){this.size=e,this.updateBaseines()}},{key:"setLineHeight",value:function(e){this.lineHeight=e}}]),e}(),ie=Object(m.a)(re.prototype,"font",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=Object(m.a)(re.prototype,"family",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"sans-serif"}}),ae=Object(m.a)(re.prototype,"size",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=Object(m.a)(re.prototype,"lineHeight",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.25}}),le=Object(m.a)(re.prototype,"middle",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),se=Object(m.a)(re.prototype,"hanging",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ue=Object(m.a)(re.prototype,"top",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fe=Object(m.a)(re.prototype,"alphabetic",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe=Object(m.a)(re.prototype,"ideographic",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),de=Object(m.a)(re.prototype,"bottom",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),be=Object(m.a)(re.prototype,"opentype",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(m.a)(re.prototype,"minBaseLine",[g.m],Object.getOwnPropertyDescriptor(re.prototype,"minBaseLine"),re.prototype),Object(m.a)(re.prototype,"maxBaseLine",[g.m],Object.getOwnPropertyDescriptor(re.prototype,"maxBaseLine"),re.prototype),Object(m.a)(re.prototype,"setFont",[ee],Object.getOwnPropertyDescriptor(re.prototype,"setFont"),re.prototype),Object(m.a)(re.prototype,"setSize",[te],Object.getOwnPropertyDescriptor(re.prototype,"setSize"),re.prototype),Object(m.a)(re.prototype,"setLineHeight",[ne],Object.getOwnPropertyDescriptor(re.prototype,"setLineHeight"),re.prototype),re),Ce=n(27);!function(e){e[e.LINEAR=0]="LINEAR",e[e.RADIAL=1]="RADIAL"}(Pe||(Pe={}));var Te,Be,Ie,$e,Ae,ze,Le,Me,Ne,Ee,De,Xe=(ge=g.B.shallow,je=g.k.bound,Oe=g.k.bound,ye=g.k.bound,me=g.k.bound,we=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e),Object(j.a)(this,"type",ve,this),Object(j.a)(this,"angle",xe,this),Object(j.a)(this,"palette",ke,this),this.type=n.type&&Pe[n.type]?n.type:0,this.angle=n.angle||0,n.palette?n.palette.forEach((function(e){t.palette.push(Object(p.a)(Object(p.a)({},e),{},{id:e.id||t.nextId}))})):(this.addColor(0,"#FFF"),this.addColor(1))}return Object(y.a)(e,[{key:"setType",value:function(e){this.type=e}},{key:"setAngle",value:function(e){this.angle=e}},{key:"addColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000000";this.palette.push({offset:e,color:t,id:this.nextId})}},{key:"updatePalette",value:function(e){this.palette=e}},{key:"ids",get:function(){return this.palette.map((function(e){return e.id}))}},{key:"nextId",get:function(){return 0===this.ids.length?1:Math.max.apply(Math,Object(Ce.a)(this.ids))+1}}]),e}(),ve=Object(m.a)(we.prototype,"type",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xe=Object(m.a)(we.prototype,"angle",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=Object(m.a)(we.prototype,"palette",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(m.a)(we.prototype,"ids",[g.m],Object.getOwnPropertyDescriptor(we.prototype,"ids"),we.prototype),Object(m.a)(we.prototype,"nextId",[g.m],Object.getOwnPropertyDescriptor(we.prototype,"nextId"),we.prototype),Object(m.a)(we.prototype,"setType",[je],Object.getOwnPropertyDescriptor(we.prototype,"setType"),we.prototype),Object(m.a)(we.prototype,"setAngle",[Oe],Object.getOwnPropertyDescriptor(we.prototype,"setAngle"),we.prototype),Object(m.a)(we.prototype,"addColor",[ye],Object.getOwnPropertyDescriptor(we.prototype,"addColor"),we.prototype),Object(m.a)(we.prototype,"updatePalette",[me],Object.getOwnPropertyDescriptor(we.prototype,"updatePalette"),we.prototype),we);var Ye,Fe,Ge,We,Re,He,Je,Ue,Ke,Ve,qe=(Te=g.B.ref,Be=g.B.ref,Ie=g.k.bound,$e=g.k.bound,Ae=g.k.bound,ze=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e),Object(j.a)(this,"buffer",Le,this),Object(j.a)(this,"image",Me,this),Object(j.a)(this,"src",Ne,this),Object(j.a)(this,"repetition",Ee,this),Object(j.a)(this,"scale",De,this),this.scale=J.num(t.scale,1),this.repetition=t.repetition||"repeat",this.setImage(t.buffer||this.buffer)}return Object(y.a)(e,[{key:"setImage",value:function(e){var t=this,n=URL.createObjectURL(new Blob([e])),r=new Image;r.onload=function(){Object(g.F)("setPatternTextureImage",(function(){t.buffer=e,t.image=r,t.src=n,r.onload=null}))},r.src=n}},{key:"setRepetition",value:function(e){this.repetition=e}},{key:"setScale",value:function(e){this.scale=e}}]),e}(),Le=Object(m.a)(ze.prototype,"buffer",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){for(var t=atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i+=1)r[i]=t.charCodeAt(i);return r.buffer}("iVBORw0KGgoAAAANSUhEUgAAAAgAAAAIAQMAAAD+wSzIAAAABlBMVEX////MzMw46qqDAAAADklEQVQI12Pgh8IPEAgAEeAD/Xk4HBcAAAAASUVORK5CYII=")}}),Me=Object(m.a)(ze.prototype,"image",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=Object(m.a)(ze.prototype,"src",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ee=Object(m.a)(ze.prototype,"repetition",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"repeat"}}),De=Object(m.a)(ze.prototype,"scale",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(m.a)(ze.prototype,"setImage",[Ie],Object.getOwnPropertyDescriptor(ze.prototype,"setImage"),ze.prototype),Object(m.a)(ze.prototype,"setRepetition",[$e],Object.getOwnPropertyDescriptor(ze.prototype,"setRepetition"),ze.prototype),Object(m.a)(ze.prototype,"setScale",[Ae],Object.getOwnPropertyDescriptor(ze.prototype,"setScale"),ze.prototype),ze);!function(e){e[e.SOLID=0]="SOLID",e[e.GRADIENT=1]="GRADIENT",e[e.IMAGE=2]="IMAGE"}(Ve||(Ve={}));var Qe,_e,Ze,et,tt,nt,rt,it,ot,at,ct,lt,st,ut,ft,pt,dt,bt,ht,gt,jt,Ot,yt,mt,wt,vt,xt,kt,Pt,St,Ct,Tt,Bt,It,$t,At,zt,Lt,Mt,Nt,Et,Dt,Xt,Yt,Ft,Gt,Wt,Rt,Ht,Jt,Ut,Kt,Vt,qt,Qt,_t,Zt,en,tn,nn,rn,on=(Ye=g.B.shallow,Fe=g.B.shallow,Ge=g.k.bound,We=g.k.bound,Re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e),Object(j.a)(this,"type",He,this),Object(j.a)(this,"color",Je,this),Object(j.a)(this,"gradient",Ue,this),Object(j.a)(this,"patternTexture",Ke,this),this.color=t.color||"#000000",this.type=t.type&&Ve[t.type]?t.type:0,this.gradient=new Xe(t.gradient),this.patternTexture=new qe(t.patternTexture)}return Object(y.a)(e,[{key:"setType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.type=e}},{key:"setColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000000";this.color=e}}]),e}(),He=Object(m.a)(Re.prototype,"type",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=Object(m.a)(Re.prototype,"color",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=Object(m.a)(Re.prototype,"gradient",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=Object(m.a)(Re.prototype,"patternTexture",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(m.a)(Re.prototype,"setType",[Ge],Object.getOwnPropertyDescriptor(Re.prototype,"setType"),Re.prototype),Object(m.a)(Re.prototype,"setColor",[We],Object.getOwnPropertyDescriptor(Re.prototype,"setColor"),Re.prototype),Re),an=n(44),cn=n(77),ln=n(76),sn=(Qe=g.k.bound,_e=g.k.bound,Ze=g.k.bound,et=function(e){Object(cn.a)(n,e);var t=Object(ln.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(O.a)(this,n),e=t.call(this,r),Object(j.a)(e,"width",tt,Object(an.a)(e)),Object(j.a)(e,"lineCap",nt,Object(an.a)(e)),Object(j.a)(e,"lineJoin",rt,Object(an.a)(e)),e.width=J.num(r.width,1),e.lineCap=r.lineCap||"round",e.lineJoin=r.lineJoin||"round",e}return Object(y.a)(n,[{key:"setWidth",value:function(e){this.width=e}},{key:"setLineCap",value:function(e){this.lineCap=e}},{key:"setLineJoin",value:function(e){this.lineJoin=e}}]),n}(on),tt=Object(m.a)(et.prototype,"width",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),nt=Object(m.a)(et.prototype,"lineCap",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=Object(m.a)(et.prototype,"lineJoin",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(m.a)(et.prototype,"setWidth",[Qe],Object.getOwnPropertyDescriptor(et.prototype,"setWidth"),et.prototype),Object(m.a)(et.prototype,"setLineCap",[_e],Object.getOwnPropertyDescriptor(et.prototype,"setLineCap"),et.prototype),Object(m.a)(et.prototype,"setLineJoin",[Ze],Object.getOwnPropertyDescriptor(et.prototype,"setLineJoin"),et.prototype),et),un=(it=g.k.bound,ot=g.k.bound,at=g.k.bound,ct=g.k.bound,lt=g.k.bound,st=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e),Object(j.a)(this,"color",ut,this),Object(j.a)(this,"blur",ft,this),Object(j.a)(this,"offsetX",pt,this),Object(j.a)(this,"offsetY",dt,this),this.color=t.color||"#000000",this.blur=J.num(t.blur,1),this.offsetX=J.num(t.offsetX,1),this.offsetY=J.num(t.offsetY,1)}return Object(y.a)(e,[{key:"setColor",value:function(e){this.color=e}},{key:"setBlur",value:function(e){this.blur=e}},{key:"setOffsetX",value:function(e){this.offsetX=e}},{key:"setOffsetY",value:function(e){this.offsetY=e}},{key:"setOffset",value:function(e,t){this.offsetX=e,this.offsetY=t}}]),e}(),ut=Object(m.a)(st.prototype,"color",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=Object(m.a)(st.prototype,"blur",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),pt=Object(m.a)(st.prototype,"offsetX",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),dt=Object(m.a)(st.prototype,"offsetY",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Object(m.a)(st.prototype,"setColor",[it],Object.getOwnPropertyDescriptor(st.prototype,"setColor"),st.prototype),Object(m.a)(st.prototype,"setBlur",[ot],Object.getOwnPropertyDescriptor(st.prototype,"setBlur"),st.prototype),Object(m.a)(st.prototype,"setOffsetX",[at],Object.getOwnPropertyDescriptor(st.prototype,"setOffsetX"),st.prototype),Object(m.a)(st.prototype,"setOffsetY",[ct],Object.getOwnPropertyDescriptor(st.prototype,"setOffsetY"),st.prototype),Object(m.a)(st.prototype,"setOffset",[lt],Object.getOwnPropertyDescriptor(st.prototype,"setOffset"),st.prototype),st),fn=(bt=g.k.bound,ht=g.k.bound,gt=g.k.bound,jt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e),Object(j.a)(this,"font",Ot,this),Object(j.a)(this,"fill",yt,this),Object(j.a)(this,"useStroke",mt,this),Object(j.a)(this,"stroke",wt,this),Object(j.a)(this,"useShadow",vt,this),Object(j.a)(this,"shadow",xt,this),Object(j.a)(this,"bgColor",kt,this),this.font=new Se(t.font),this.fill=new on(t.fill),this.stroke=new sn(t.stroke),this.shadow=new un(t.shadow),this.useShadow=!!t.useShadow,this.useStroke=!!t.useStroke}return Object(y.a)(e,[{key:"setUseStroke",value:function(e){this.useStroke=e}},{key:"setUseShadow",value:function(e){this.useShadow=e}},{key:"setBgColor",value:function(e){this.bgColor=e}}]),e}(),Ot=Object(m.a)(jt.prototype,"font",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=Object(m.a)(jt.prototype,"fill",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=Object(m.a)(jt.prototype,"useStroke",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=Object(m.a)(jt.prototype,"stroke",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=Object(m.a)(jt.prototype,"useShadow",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xt=Object(m.a)(jt.prototype,"shadow",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=Object(m.a)(jt.prototype,"bgColor",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"rgba(0,0,0,0)"}}),Object(m.a)(jt.prototype,"setUseStroke",[bt],Object.getOwnPropertyDescriptor(jt.prototype,"setUseStroke"),jt.prototype),Object(m.a)(jt.prototype,"setUseShadow",[ht],Object.getOwnPropertyDescriptor(jt.prototype,"setUseShadow"),jt.prototype),Object(m.a)(jt.prototype,"setBgColor",[gt],Object.getOwnPropertyDescriptor(jt.prototype,"setBgColor"),jt.prototype),jt),pn=(Pt=g.k.bound,St=g.k.bound,Ct=g.k.bound,Tt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e),Object(j.a)(this,"padding",Bt,this),Object(j.a)(this,"spacing",It,this),Object(j.a)(this,"power",$t,this),this.padding=J.num(t.padding,1),this.spacing=J.num(t.spacing,1),this.power=!!t.power}return Object(y.a)(e,[{key:"setPadding",value:function(e){this.padding=e}},{key:"setSpacing",value:function(e){this.spacing=e}},{key:"setPower",value:function(e){this.power=e}}]),e}(),Bt=Object(m.a)(Tt.prototype,"padding",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),It=Object(m.a)(Tt.prototype,"spacing",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),$t=Object(m.a)(Tt.prototype,"power",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(m.a)(Tt.prototype,"setPadding",[Pt],Object.getOwnPropertyDescriptor(Tt.prototype,"setPadding"),Tt.prototype),Object(m.a)(Tt.prototype,"setSpacing",[St],Object.getOwnPropertyDescriptor(Tt.prototype,"setSpacing"),Tt.prototype),Object(m.a)(Tt.prototype,"setPower",[Ct],Object.getOwnPropertyDescriptor(Tt.prototype,"setPower"),Tt.prototype),Tt),dn=(At=g.k.bound,zt=g.k.bound,Lt=g.k.bound,Mt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e),Object(j.a)(this,"xAdvance",Nt,this),Object(j.a)(this,"xOffset",Et,this),Object(j.a)(this,"yOffset",Dt,this),this.xAdvance=t.xAdvance||0,this.xOffset=t.xOffset||0,this.yOffset=t.yOffset||0}return Object(y.a)(e,[{key:"setXAdvance",value:function(e){this.xAdvance=e}},{key:"setXOffset",value:function(e){this.xOffset=e}},{key:"setYOffset",value:function(e){this.yOffset=e}}]),e}(),Nt=Object(m.a)(Mt.prototype,"xAdvance",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Et=Object(m.a)(Mt.prototype,"xOffset",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Dt=Object(m.a)(Mt.prototype,"yOffset",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(m.a)(Mt.prototype,"setXAdvance",[At],Object.getOwnPropertyDescriptor(Mt.prototype,"setXAdvance"),Mt.prototype),Object(m.a)(Mt.prototype,"setXOffset",[zt],Object.getOwnPropertyDescriptor(Mt.prototype,"setXOffset"),Mt.prototype),Object(m.a)(Mt.prototype,"setYOffset",[Lt],Object.getOwnPropertyDescriptor(Mt.prototype,"setYOffset"),Mt.prototype),Mt);function bn(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.data,r=e.width,i=e.height,o=0,a=0,c=0,l=0,s=!0,u=!0,f=!0,p=!0,d=Math.ceil(i/2),b=Math.ceil(r/2),h=0;h<d;h+=1){for(var g=0;g<r&&(s&&n[4*(h*r+g)+3]>t&&(s=!1),u&&n[4*((i-h-1)*r+g)+3]>t&&(u=!1),s||u);g+=1);if(!s&&!u)break;s&&(o+=1),u&&(a+=1)}if(o+a>=i)return{trimOffsetLeft:-1*r,trimOffsetTop:-1*i,width:0,height:0};d=i-a;for(var j=0;j<b;j+=1){for(var O=o;O<d&&(f&&n[4*(r*O+j)+3]>t&&(f=!1),p&&n[4*(r*O+r-j-1)+3]>t&&(p=!1),f||p);O+=1);if(!f&&!p)break;f&&(c+=1),p&&(l+=1)}return{trimOffsetLeft:-1*c,trimOffsetTop:-1*o,width:r-c-l,height:i-o-a}}function hn(e,t,n,r){return{x:e+n*Math.cos(Math.PI/180*r),y:t+n*Math.sin(Math.PI/180*r)}}function gn(e,t,n,r,i,o){if(0===o.type)return o.color;if(1===o.type){var a,c=o.gradient,l=c.type,s=c.palette,u=c.angle,f=t+r/2,p=n+i/2,d=Math.max(r,i)/2;if(0===l){var b=hn(f,p,d,u+180),h=hn(f,p,d,u);a=e.createLinearGradient(b.x,b.y,h.x,h.y)}else a=e.createRadialGradient(f,p,0,f,p,d);return s.forEach((function(e){a.addColorStop(e.offset,e.color)})),a}var g=o.patternTexture,j=g.image,O=g.repetition,y=g.scale;if(!j)return"rgba(0,0,0,0)";if(1===y)return e.createPattern(j,O)||"rgba(0,0,0,0)";var m=j.naturalWidth,w=j.naturalHeight,v=document.createElement("canvas");v.width=Math.ceil(m*y),v.height=Math.ceil(w*y);var x=v.getContext("2d");return x?(x.drawImage(j,0,0,v.width,v.height),e.createPattern(v,O)||"rgba(0,0,0,0)"):"rgba(0,0,0,0)"}function jn(e,t){var n=t.font,r=t.stroke,i=t.shadow,o=t.fill,a=function(e,t){Xt||(Xt=document.createElement("canvas"));var n=Xt.getContext("2d");if(!n)throw new Error("Get context 2d failed.");Xt.width=1,Xt.height=1;var r=V(t);n.font=r,n.textAlign="left",n.textBaseline="bottom";var i,o,a=n.measureText(e);if("undefined"===typeof a.actualBoundingBoxLeft)return{text:e,font:r,width:a.width,height:parseInt("".concat(null!==(i=t.fontSize)&&void 0!==i?i:"14"),10),fontWidth:a.width,fontHeight:parseInt("".concat(null!==(o=t.fontSize)&&void 0!==o?o:"14"),10),trimOffsetTop:0,trimOffsetLeft:0,trimOffsetRight:0,trimOffsetBottom:0};n.textAlign="right",n.textBaseline="top";var c=n.measureText(e),l=Math.ceil(a.actualBoundingBoxLeft),s=Math.ceil(c.actualBoundingBoxRight),u=Math.ceil(c.actualBoundingBoxAscent),f=Math.ceil(a.actualBoundingBoxDescent);return{text:e,font:r,width:l+Math.ceil(a.actualBoundingBoxRight),height:f+Math.ceil(a.actualBoundingBoxAscent),fontWidth:Math.ceil(a.width),fontHeight:a.actualBoundingBoxAscent-c.actualBoundingBoxAscent,trimOffsetTop:u,trimOffsetLeft:l,trimOffsetRight:s,trimOffsetBottom:f}}(e,{fontSize:n.size,fontFamily:n.family}),c=a.width,l=a.height,s=a.trimOffsetLeft,u=a.trimOffsetTop;if(0===c||0===l)return Object(p.a)({canvas:null},a);var f=r?2*r.width:0,d=f,b=f,h=(c-n.size)/2,g=(l-n.size)/2;if(i){var j=Math.ceil(1.5*i.blur);d=Math.abs(i.offsetX)+j,b=Math.abs(i.offsetY)+j}h+=d,g+=b;var O=document.createElement("canvas"),y=O.getContext("2d");if(O.width=c+2*d,O.height=l+2*b,y.textAlign="left",y.textBaseline="top",y.font=V({fontSize:n.size,fontFamily:n.family}),r&&f&&(y.lineWidth=f,y.lineCap=r.lineCap,y.lineJoin=r.lineJoin,y.strokeStyle=gn(y,h,g,n.size,n.size,r),y.strokeText(e,d+s,b+u)),y.fillStyle=gn(y,h,g,n.size,n.size,o),y.fillText(e,d+s,b+u),i){var m=document.createElement("canvas");m.width=c+2*d,m.height=l+2*b;var w=m.getContext("2d");w.shadowColor=i.color,w.shadowBlur=i.blur,w.shadowOffsetX=i.offsetX,w.shadowOffsetY=i.offsetY,w.drawImage(O,0,0),O=m,y=w}if(0===O.width||0===O.height)return Object(p.a)({canvas:O},a);var v=y.getImageData(0,0,O.width,O.height),x=bn(v);return O.width=x.width,O.height=x.height,a.width=x.width,a.height=x.height,y.putImageData(v,x.trimOffsetLeft,x.trimOffsetTop),a.trimOffsetLeft+=d+x.trimOffsetLeft,a.trimOffsetTop+=b+x.trimOffsetTop,a.trimOffsetBottom+=b+(l+2*b+x.trimOffsetTop-x.height),Object(p.a)({canvas:O},a)}var On,yn,mn,wn,vn,xn,kn,Pn,Sn,Cn,Tn,Bn=(Yt=g.B.ref,Ft=g.B.ref,Gt=g.k.bound,Wt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e),this.type="text",Object(j.a)(this,"letter",Rt,this),Object(j.a)(this,"source",Ht,this),Object(j.a)(this,"width",Jt,this),Object(j.a)(this,"height",Ut,this),Object(j.a)(this,"x",Kt,this),Object(j.a)(this,"y",Vt,this),Object(j.a)(this,"fontWidth",qt,this),Object(j.a)(this,"fontHeight",Qt,this),Object(j.a)(this,"trimOffsetTop",_t,this),Object(j.a)(this,"trimOffsetLeft",Zt,this),Object(j.a)(this,"trimOffsetRight",en,this),Object(j.a)(this,"trimOffsetBottom",tn,this),Object(j.a)(this,"adjustMetric",nn,this),Object(j.a)(this,"kerning",rn,this),this.letter=t.letter||"",this.adjustMetric=new dn(t.adjustMetric),t.kerning&&(this.kerning=t.kerning)}return Object(y.a)(e,[{key:"steKerning",value:function(e,t){this.kerning.set(e,t)}}]),e}(),Rt=Object(m.a)(Wt.prototype,"letter",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ht=Object(m.a)(Wt.prototype,"source",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jt=Object(m.a)(Wt.prototype,"width",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ut=Object(m.a)(Wt.prototype,"height",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Kt=Object(m.a)(Wt.prototype,"x",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vt=Object(m.a)(Wt.prototype,"y",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qt=Object(m.a)(Wt.prototype,"fontWidth",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qt=Object(m.a)(Wt.prototype,"fontHeight",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_t=Object(m.a)(Wt.prototype,"trimOffsetTop",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Zt=Object(m.a)(Wt.prototype,"trimOffsetLeft",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),en=Object(m.a)(Wt.prototype,"trimOffsetRight",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tn=Object(m.a)(Wt.prototype,"trimOffsetBottom",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),nn=Object(m.a)(Wt.prototype,"adjustMetric",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rn=Object(m.a)(Wt.prototype,"kerning",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object(m.a)(Wt.prototype,"steKerning",[Gt],Object.getOwnPropertyDescriptor(Wt.prototype,"steKerning"),Wt.prototype),Wt),In=(On=function(e){Object(cn.a)(n,e);var t=Object(ln.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return Object(O.a)(this,n),(e=t.call(this,r)).setGlyphInfo(i),e}return Object(y.a)(n,[{key:"setGlyphInfo",value:function(e){var t=e.font,n=e.fill,r=e.useStroke,i=e.stroke,o=e.useShadow,a=e.shadow,c={font:t,fill:n};r&&(c.stroke=i),o&&(c.shadow=a);var l=jn(this.letter,c);this.source=l.canvas,this.width=l.width,this.height=l.height,this.fontWidth=l.fontWidth,this.fontHeight=l.fontHeight,this.trimOffsetTop=l.trimOffsetTop,this.trimOffsetLeft=l.trimOffsetLeft,this.trimOffsetRight=l.trimOffsetRight,this.trimOffsetBottom=l.trimOffsetBottom}}]),n}(Bn),Object(m.a)(On.prototype,"setGlyphInfo",[g.k],Object.getOwnPropertyDescriptor(On.prototype,"setGlyphInfo"),On.prototype),On);var $n,An,zn,Ln,Mn,Nn,En,Dn,Xn,Yn,Fn,Gn,Wn,Rn,Hn,Jn,Un,Kn,Vn,qn,Qn,_n,Zn,er,tr,nr,rr,ir,or,ar,cr,lr,sr,ur,fr,pr=(yn=g.B.ref,mn=g.k.bound,wn=g.k.bound,vn=g.k.bound,xn=function(e){Object(cn.a)(n,e);var t=Object(ln.a)(n);function n(e){var r;return Object(O.a)(this,n),(r=t.call(this,e)).type="image",Object(j.a)(r,"src",kn,Object(an.a)(r)),Object(j.a)(r,"buffer",Pn,Object(an.a)(r)),Object(j.a)(r,"fileName",Sn,Object(an.a)(r)),Object(j.a)(r,"fileType",Cn,Object(an.a)(r)),Object(j.a)(r,"selected",Tn,Object(an.a)(r)),r.letter=e.letter||"",r.fileName=e.fileName||"",r.fileType=e.fileType||"",r.buffer=e.buffer||null,e.buffer&&(r.src=URL.createObjectURL(new Blob([e.buffer])),r.initImage()),r}return Object(y.a)(n,[{key:"initImage",value:function(){var e=this;return new Promise((function(t){var n=new Image;n.onload=function(){Object(g.F)("trimImage",(function(){var r=n.naturalWidth,i=n.naturalHeight;e.fontWidth=r,e.fontHeight=i;var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=e.naturalWidth,r=e.naturalHeight,i=document.createElement("canvas");i.width=n,i.height=r;var o=i.getContext("2d");o.drawImage(e,0,0);var a=bn(o.getImageData(0,0,n,r),t);return i.width=a.width,i.height=a.height,o.drawImage(e,a.trimOffsetLeft,a.trimOffsetTop),Object(p.a)({canvas:i},a)}(n);e.width=o.width,e.height=o.height,e.trimOffsetLeft=o.trimOffsetLeft,e.trimOffsetTop=o.trimOffsetTop,e.trimOffsetRight=o.width-o.trimOffsetLeft-r,e.trimOffsetBottom=o.height-o.trimOffsetTop-i,e.source=o.canvas,t()}))},n.src=e.src}))}},{key:"setGlyph",value:function(e){this.letter=e[0]||""}},{key:"changeSelect",value:function(e){this.selected=e}}]),n}(Bn),kn=Object(m.a)(xn.prototype,"src",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Pn=Object(m.a)(xn.prototype,"buffer",[yn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sn=Object(m.a)(xn.prototype,"fileName",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Cn=Object(m.a)(xn.prototype,"fileType",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Tn=Object(m.a)(xn.prototype,"selected",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Object(m.a)(xn.prototype,"initImage",[mn],Object.getOwnPropertyDescriptor(xn.prototype,"initImage"),xn.prototype),Object(m.a)(xn.prototype,"setGlyph",[wn],Object.getOwnPropertyDescriptor(xn.prototype,"setGlyph"),xn.prototype),Object(m.a)(xn.prototype,"changeSelect",[vn],Object.getOwnPropertyDescriptor(xn.prototype,"changeSelect"),xn.prototype),xn),dr=($n=g.B.shallow,An=g.B.shallow,zn=g.B.ref,Ln=g.B.ref,Mn=g.B.ref,Nn=g.B.ref,En=g.B.ref,Dn=g.k.bound,Xn=g.k.bound,Yn=g.k.bound,Fn=g.k.bound,Gn=g.k.bound,Wn=g.k.bound,Rn=g.k.bound,Hn=g.k.bound,Jn=g.k.bound,Un=function(){function e(){var t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.a)(this,e),Object(j.a)(this,"name",Kn,this),this.id=void 0,this.worker=null,this.packStart=0,this.packTimer=0,this.idleId=0,Object(j.a)(this,"isPacking",Vn,this),Object(j.a)(this,"text",qn,this),Object(j.a)(this,"glyphs",Qn,this),Object(j.a)(this,"glyphImages",_n,this),Object(j.a)(this,"style",Zn,this),Object(j.a)(this,"layout",er,this),Object(j.a)(this,"globalAdjustMetric",tr,this),Object(j.a)(this,"packCanvas",nr,this),Object(j.a)(this,"ui",rr,this),this.id=r.id||Date.now(),this.name=r.name||"Unnamed",this.text=r.text||this.text,this.ui=new U(r.ui),this.style=new fn(r.style),this.layout=new pn(r.layout),this.globalAdjustMetric=new dn(r.globalAdjustMetric),r.glyphs&&r.glyphs.forEach((function(e,t){n.glyphs.set(t,new In(e,n.style))})),null===(t=r.glyphImages)||void 0===t||t.forEach((function(e){console.log(e),n.glyphImages.push(new pr(e))})),this.glyphs.has(" ")||this.glyphs.set(" ",new In({letter:" "},this.style)),this.addGlyphs(r.text||""),this.addAutoRun(),this.pack()}return Object(y.a)(e,[{key:"pack",value:function(){var e=this;if(!this.idleId){this.worker&&this.worker.terminate(),this.isPacking=!0,this.worker=new k;var t=this.rectangleList.sort((function(e,t){return t.height-e.height}));this.worker.addEventListener("message",Object(g.k)("PackerWorkerCallback",(function(t){var n,r=t.data,i=e.glyphImages,o=0,a=0;r.forEach((function(t){var n,r=t.letter,c=t.x,l=t.y,s=t.type,u=t.width,f=t.height;"image"===s&&(n=i.find((function(e){return!(!e||e.letter!==r)}))),n||(n=e.glyphs.get(r)),n&&(n.x=c||0,n.y=l||0),o=Math.max(o,c+u),a=Math.max(a,l+f)})),e.ui.setSize(o-e.layout.spacing,a-e.layout.spacing),e.isPacking=!1,null===(n=e.worker)||void 0===n||n.terminate(),e.worker=null})),!1),this.worker.postMessage(t.filter((function(e){var t=e.width,n=e.height;return!(!t||!n)})))}}},{key:"packStyle",value:function(){var e=this;this.isPacking=!0,this.worker&&(this.worker.terminate(),this.worker=null),Object(x.cancel)(this.idleId);var t=[];this.glyphs.forEach((function(e){t.push(e)}));!function n(){e.idleId=Object(x.request)((function(r){for(var i=r.timeRemaining(),o=Date.now();t.length&&i-(Date.now()-o)>-100;){var a=t.shift();a&&a.setGlyphInfo(e.style)}t.length?n():(e.idleId=0,e.pack())}))}()}},{key:"throttlePack",value:function(){var e=this;this.idleId||(window.clearTimeout(this.packTimer),Date.now()-this.packStart>500?Promise.resolve().then(this.pack):this.packTimer=window.setTimeout((function(){e.pack()}),500),this.packStart=Date.now())}},{key:"addAutoRun",value:function(){var e=this,t=function(e,t){return!(!e.name||e.name!==t)};Object(v.a)(this.glyphs,(function(){e.throttlePack()})),Object(v.a)(this.glyphImages,(function(){e.throttlePack()})),Object(v.a)(this.layout,(function(n){t(n,"power")||e.throttlePack()})),Object(v.a)(this.style,(function(n){t(n,"bgColor")||t(n,"lineHeight")||e.packStyle()}))}},{key:"setText",value:function(e){var t=this.text;this.text=e.replace(/\s/gm,""),this.addGlyphs(t)}},{key:"addGlyphs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=Array.from(new Set(this.text.split(""))),r=Array.from(new Set(t.split("")));this.text=n.join("");var i=t?Array.from(new Set(n.concat(r))).filter((function(e){return!(n.includes(e)&&r.includes(e))})):n;i.length&&i.forEach((function(t){n.includes(t)?e.glyphs.set(t,new In({letter:t},e.style)):e.glyphs.delete(t)}))}},{key:"addImages",value:function(e){var t=this;Promise.all(e.map((function(e){var n=new pr(e);return t.glyphImages.push(n),n.initImage()}))).then(this.pack)}},{key:"removeImage",value:function(e){var t=this.glyphImages.indexOf(e);t>-1&&this.glyphImages.splice(t,1)}},{key:"setCanvas",value:function(e){this.packCanvas=e}},{key:"setName",value:function(e){this.name=e||this.name}},{key:"glyphList",get:function(){var e=this,t={};return this.glyphImages.forEach((function(e){e.letter&&e.selected&&(t[e.letter]=e)}))," ".concat(this.text).split("").map((function(n){return t[n]?t[n]:e.glyphs.get(n)}))}},{key:"rectangleList",get:function(){var e=this.layout,t=e.padding,n=e.spacing;return this.glyphList.map((function(e){var r=!(!e.width||!e.height);return{letter:e.letter,type:e.type,width:r?e.width+2*t+n:0,height:r?e.height+2*t+n:0,x:0,y:0}}))}}]),e}(),Kn=Object(m.a)(Un.prototype,"name",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Unnamed"}}),Vn=Object(m.a)(Un.prototype,"isPacking",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qn=Object(m.a)(Un.prototype,"text",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!\u2116;%:?*()_+-=.,/|\"'@#$^&{}[]"}}),Qn=Object(m.a)(Un.prototype,"glyphs",[$n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),_n=Object(m.a)(Un.prototype,"glyphImages",[An],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Zn=Object(m.a)(Un.prototype,"style",[zn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),er=Object(m.a)(Un.prototype,"layout",[Ln],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tr=Object(m.a)(Un.prototype,"globalAdjustMetric",[Mn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nr=Object(m.a)(Un.prototype,"packCanvas",[Nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rr=Object(m.a)(Un.prototype,"ui",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new U}}),Object(m.a)(Un.prototype,"glyphList",[g.m],Object.getOwnPropertyDescriptor(Un.prototype,"glyphList"),Un.prototype),Object(m.a)(Un.prototype,"rectangleList",[g.m],Object.getOwnPropertyDescriptor(Un.prototype,"rectangleList"),Un.prototype),Object(m.a)(Un.prototype,"pack",[Dn],Object.getOwnPropertyDescriptor(Un.prototype,"pack"),Un.prototype),Object(m.a)(Un.prototype,"packStyle",[Xn],Object.getOwnPropertyDescriptor(Un.prototype,"packStyle"),Un.prototype),Object(m.a)(Un.prototype,"throttlePack",[Yn],Object.getOwnPropertyDescriptor(Un.prototype,"throttlePack"),Un.prototype),Object(m.a)(Un.prototype,"setText",[Fn],Object.getOwnPropertyDescriptor(Un.prototype,"setText"),Un.prototype),Object(m.a)(Un.prototype,"addGlyphs",[Gn],Object.getOwnPropertyDescriptor(Un.prototype,"addGlyphs"),Un.prototype),Object(m.a)(Un.prototype,"addImages",[Wn],Object.getOwnPropertyDescriptor(Un.prototype,"addImages"),Un.prototype),Object(m.a)(Un.prototype,"removeImage",[Rn],Object.getOwnPropertyDescriptor(Un.prototype,"removeImage"),Un.prototype),Object(m.a)(Un.prototype,"setCanvas",[Hn],Object.getOwnPropertyDescriptor(Un.prototype,"setCanvas"),Un.prototype),Object(m.a)(Un.prototype,"setName",[Jn],Object.getOwnPropertyDescriptor(Un.prototype,"setName"),Un.prototype),Un),br=(ir=g.B.shallow,or=g.k.bound,ar=g.k.bound,cr=g.k.bound,lr=g.k.bound,sr=function(){function e(){var t=this;Object(O.a)(this,e),Object(j.a)(this,"activeId",ur,this),Object(j.a)(this,"projectList",fr,this),Object(g.F)((function(){t.activeId=Date.now();var e=new dr({id:t.activeId});t.projectList.set(e.id,e)}))}return Object(y.a)(e,[{key:"selectProject",value:function(e){this.projectList.has(e)&&(this.activeId=e)}},{key:"removeProject",value:function(e){var t=this.namedList.filter((function(t){return t.id!==e}));0!==t.length&&(this.activeId=t[0].id,this.projectList.delete(e))}},{key:"addProject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.id&&this.projectList.has(e.id))this.activeId=e.id;else{if(!e.name){e.name="Unnamed";var t=[];this.projectList.forEach((function(e){var n=e.name.match(/^Unnamed-?(\d+)?$/);n&&t.push(Number(n[1])||0)})),t.length>0&&(e.name+="-".concat(Math.max.apply(Math,t)+1))}var n=new dr(e);this.projectList.set(n.id,n),this.activeId=n.id}}},{key:"setProjectName",value:function(e,t){var n=this.projectList.get(t);n&&n.setName(e)}},{key:"currentProject",get:function(){return this.projectList.get(this.activeId)}},{key:"namedList",get:function(){var e=[];return this.projectList.forEach((function(t){e.push({id:t.id,name:t.name})})),e}}]),e}(),ur=Object(m.a)(sr.prototype,"activeId",[g.B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fr=Object(m.a)(sr.prototype,"projectList",[ir],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object(m.a)(sr.prototype,"currentProject",[g.m],Object.getOwnPropertyDescriptor(sr.prototype,"currentProject"),sr.prototype),Object(m.a)(sr.prototype,"namedList",[g.m],Object.getOwnPropertyDescriptor(sr.prototype,"namedList"),sr.prototype),Object(m.a)(sr.prototype,"selectProject",[or],Object.getOwnPropertyDescriptor(sr.prototype,"selectProject"),sr.prototype),Object(m.a)(sr.prototype,"removeProject",[ar],Object.getOwnPropertyDescriptor(sr.prototype,"removeProject"),sr.prototype),Object(m.a)(sr.prototype,"addProject",[cr],Object.getOwnPropertyDescriptor(sr.prototype,"addProject"),sr.prototype),Object(m.a)(sr.prototype,"setProjectName",[lr],Object.getOwnPropertyDescriptor(sr.prototype,"setProjectName"),sr.prototype),sr);Object(g.n)({enforceActions:"always",computedRequiresReaction:!0});var hr=n(195),gr=n(438),jr={MuiButton:{size:"small"},MuiButtonBase:{disableRipple:!0},MuiFilledInput:{margin:"dense"},MuiFormControl:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiInputLabel:{margin:"dense"},MuiListItem:{dense:!0},MuiOutlinedInput:{margin:"dense"},MuiFab:{size:"small"},MuiTable:{size:"small"},MuiTextField:{margin:"dense"},MuiToolbar:{variant:"dense"}},Or={MuiCssBaseline:{"@global":{html:{fontSize:"14px"},"input::-webkit-inner-spin-button":{marginLeft:"10px"},"input:enabled:read-write:-webkit-any(:focus,:hover)::-webkit-inner-spin-button":{opacity:.3},"::-webkit-scrollbar":{width:"4px",height:"4px"},"::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)"},"::-webkit-scrollbar-track":{background:"rgba(0, 0, 0, 0.1)"}}},MuiInputBase:{input:{"&[type=number]":{textAlign:"right"}}}},yr=Object(hr.a)({palette:{type:"dark",primary:{main:"#444"},secondary:{main:"#424242"},background:{paper:"rgb(37, 37, 37)",default:"rgb(30, 30, 30)",activityBar:"rgb(51, 51, 51)",titleBar:"rgb(50, 50, 50)",sidebar:"rgb(37, 37, 37)"},common:{black:"rgb(30,30,30)",white:"rgb(204,204,204)"},action:{hover:"rgba(255, 255, 255, 0.1)"}},bgPixel:{backgroundColor:"#fff",backgroundImage:"\n    linear-gradient(45deg, #ccc 25%, transparent 0, transparent 75%, #ccc 0),\n    linear-gradient(45deg, #ccc 25%, transparent 0, transparent 75%, #ccc 0)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px",backgroundRepeat:"repeat"},spacing:4,typography:{fontSize:13},transitions:{create:function(){return"none"}},shape:{borderRadius:0},props:jr,overrides:Or}),mr=Object(gr.a)(yr),wr=n(431),vr=n(372),xr=n(411),kr=n(416),Pr=n(439);function Sr(){return Object(l.useContext)(h.a)}function Cr(){return Sr().workspace}function Tr(){return Sr().workspace.currentProject.layout}function Br(){return Sr().workspace.currentProject}function Ir(){return Br().style}function $r(){return Ir().font}function Ar(){return Br().ui}var zr=n(417),Lr=n(198),Mr=n(14),Nr=n(369),Er=n(180),Dr=n.n(Er);function Xr(e){return e.arrayBuffer?e.arrayBuffer():new Promise((function(t){var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(e){var n;t((null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.result)||null)}}))}var Yr=Object(h.c)((function(){var e=Object(l.useState)(!1),t=Object(Mr.a)(e,2),n=t[0],r=t[1],i=$r().setFont;return Object(c.jsxs)(Nr.a,{component:"label",variant:"contained",color:"primary",fullWidth:!0,size:"large",startIcon:n?Object(c.jsx)(xr.a,{size:22,color:"inherit"}):Object(c.jsx)(Dr.a,{}),disabled:n,children:["Select Font File",Object(c.jsx)("input",{hidden:!0,type:"file",onChange:function(e){if(e&&e.target&&e.target.files&&e.target.files[0]){var t=e.target.files[0];t.name.match(/\.([A-Z0-9]+)$/i)&&(r(!0),Xr(t).then((function(e){e instanceof ArrayBuffer?i(e).then((function(){return r(!1)})).catch((function(e){r(!1),window.alert(e.message)})):r(!1)})))}},accept:".ttf,.otf,.woff"})]})})),Fr=n(413),Gr=n(412),Wr=function(e){var t=e.before,n=e.children,r=e.component,i=e.after,o=e.childrenWidth;return Object(c.jsxs)(Gr.a,{component:r||"label",container:!0,spacing:2,wrap:"nowrap",justify:"center",alignItems:"center",children:[Object(c.jsx)(Gr.a,{item:!0,xs:4,children:"object"===typeof t?t:Object(c.jsx)(Lr.a,{noWrap:!0,align:"right",children:t})}),Object(c.jsx)(Gr.a,{item:!0,xs:o||5,children:n}),Object(c.jsx)(Gr.a,{item:!0,xs:!0,children:"object"===typeof i?i:Object(c.jsx)(Lr.a,{noWrap:!0,variant:"caption",children:i})})]})},Rr=Object(h.c)((function(){var e=$r(),t=e.size,n=e.setSize;return Object(c.jsx)(Wr,{before:"Font Size:",after:"px",children:Object(c.jsx)(Fr.a,{value:t,fullWidth:!0,type:"number",inputProps:{min:1},onChange:function(e){n(Number(e.target.value))}})})})),Hr=Object(h.c)((function(){var e=$r(),t=e.lineHeight,n=e.setLineHeight;return Object(c.jsx)(Wr,{before:"Line Height:",after:"multiple",children:Object(c.jsx)(Fr.a,{value:t,fullWidth:!0,type:"number",inputProps:{min:.5,step:.1},onChange:function(e){n(Number(e.target.value))}})})})),Jr=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Lr.a,{children:"Font"})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Yr,{})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Rr,{})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Hr,{})})]})},Ur=n(434),Kr=Object(h.c)((function(){var e=Br(),t=e.text,n=e.setText,r=Object(l.useState)(!1),i=Object(Mr.a)(r,2),o=i[0],a=i[1],s=Object(l.useState)(t),u=Object(Mr.a)(s,2),f=u[0],p=u[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Lr.a,{children:"Glyphs"})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Ur.a,{margin:"none",value:o?f:t,fullWidth:!0,multiline:!0,rows:4,variant:"outlined",inputProps:{spellCheck:!1},onChange:function(e){var r=e.target.value,i=Array.from(new Set(r.split(""))).join("");o?p(r):(p(i),i!==t&&n(i))},onCompositionStart:function(){return a(!0)},onCompositionEnd:function(){a(!1);var e=Array.from(new Set(f.split(""))).join("");p(e),e!==t&&n(e)}})})]})})),Vr=Object(h.c)((function(){var e=Tr(),t=e.padding,n=e.setPadding;return Object(c.jsx)(Wr,{before:"Padding:",after:"px",children:Object(c.jsx)(Fr.a,{value:t,fullWidth:!0,type:"number",inputProps:{min:0},onChange:function(e){n(Number(e.target.value))}})})})),qr=Object(h.c)((function(){var e=Tr(),t=e.spacing,n=e.setSpacing;return Object(c.jsx)(Wr,{before:"Spacing:",after:"px",children:Object(c.jsx)(Fr.a,{value:t,fullWidth:!0,type:"number",inputProps:{min:0},onChange:function(e){return n(Number(e.target.value))}})})})),Qr=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Lr.a,{children:"Layout"})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Vr,{})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(qr,{})})]})},_r=function(e){var t=e.xAdvance,n=e.xOffset,r=e.yOffset,i=e.setXAdvance,o=e.setXOffset,a=e.setYOffset,l=function(e){return function(t){return e(Number(t.target.value))}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"xAdvance:",after:"px",children:Object(c.jsx)(Fr.a,{value:t,fullWidth:!0,type:"number",onChange:l(i)})})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"xOffset:",after:"px",children:Object(c.jsx)(Fr.a,{value:n,fullWidth:!0,type:"number",onChange:l(o)})})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"yOffset:",after:"px",children:Object(c.jsx)(Fr.a,{value:r,fullWidth:!0,type:"number",onChange:l(a)})})})]})},Zr=Object(h.c)((function(){var e=Br().globalAdjustMetric,t=e.xAdvance,n=e.xOffset,r=e.yOffset,i=e.setXAdvance,o=e.setXOffset,a=e.setYOffset;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Lr.a,{children:"Global Metric Adjustment"})}),Object(c.jsx)(_r,{xAdvance:t,xOffset:n,yOffset:r,setXAdvance:i,setXOffset:o,setYOffset:a})]})})),ei=Object(kr.a)((function(){return Object(Pr.a)({root:{overflow:"hidden",width:"256px"}})})),ti=function(){var e=ei();return Object(c.jsxs)(wr.a,{bgcolor:"background.sidebar",display:"flex",flexDirection:"column",overflow:"hidden",className:e.root,children:[Object(c.jsx)(wr.a,{bgcolor:"background.sidebar",boxShadow:2,padding:2,children:Object(c.jsx)(Lr.a,{variant:"subtitle2",children:"Font Config"})}),Object(c.jsxs)(wr.a,{flex:1,height:0,overflow:"hidden auto",children:[Object(c.jsx)(Kr,{}),Object(c.jsx)(zr.a,{}),Object(c.jsx)(Jr,{}),Object(c.jsx)(zr.a,{}),Object(c.jsx)(Qr,{}),Object(c.jsx)(zr.a,{}),Object(c.jsx)(Zr,{})]})]})},ni=n(35),ri=n(200),ii=n(183),oi=n.n(ii),ai=n(182),ci=n.n(ai),li=n(441),si=n(181),ui=n.n(si),fi=n(109);function pi(e,t){return e.replace(/\$\w+\$/gi,(function(e){var n=t[e.replace(/\$/g,"")];return"undefined"==="".concat(n)?"":"".concat(n)}))}function di(e){var t=e.info,n=e.common,r=e.pages,i=e.chars,o=e.kernings,a=new DOMParser,c=document.implementation.createDocument("","font",null),l=a.parseFromString(pi('<info face="$face$" size="$size$" bold="$bold$" italic="$italic$" charset="$charset$" unicode="$unicode$" stretchH="$stretchH$" smooth="$smooth$" aa="$aa$" padding="$padding$" spacing="$spacing$" />',t),"text/xml");c.documentElement.appendChild(l.childNodes[0]);var s=a.parseFromString(pi('<common lineHeight="$lineHeight$" base="$base$" scaleW="$scaleW$" scaleH="$scaleH$" pages="$pages$" packed="$packed$" />',n),"text/xml");c.documentElement.appendChild(s.childNodes[0]);var u=a.parseFromString("<pages>".concat(r.map((function(e){return pi('<page id="$id$" file="$file$" />',e)})),"</pages>"),"text/xml");c.documentElement.appendChild(u.childNodes[0]);var f=a.parseFromString(pi('<chars count="$count$" />',i),"text/xml");if(i.list.forEach((function(e){var t=a.parseFromString(pi('<char id="$id$" x="$x$" y="$y$" width="$width$" height="$height$" xoffset="$xoffset$" yoffset="$yoffset$" xadvance="$xadvance$" page="$page$" chnl="$chnl$" />',e),"text/xml");f.childNodes[0].appendChild(t.childNodes[0])})),c.documentElement.appendChild(f.childNodes[0]),o.count){var p=a.parseFromString(pi('<kernings count="$count$" />',o),"text/xml");o.list.forEach((function(e){var t=a.parseFromString(pi('<kerning first="$first$" second="$second$" amount="$amount$" />',e),"text/xml");p.childNodes[0].appendChild(t.childNodes[0])})),c.documentElement.appendChild(p.childNodes[0])}return'<?xml version="1.0" encoding="UTF-8"?>'.concat((new XMLSerializer).serializeToString(c))}function bi(e){var t=e.info,n=e.common,r=e.pages,i=e.chars,o=e.kernings,a="";return a+=pi('Font.info = {\n\tface = "$face$",\n\tfile = "$file$",\n\tsize = $size$,\n\tbold = $bold$,\n\titalic = $italic$,\n\tcharset = $charset$\n\tunicode = $unicode$,\n\tstretchH = $stretchH$,\n\tsmooth = $smooth$,\n\taa = $aa$,\n\tpadding = {$padding$},\n\tspacing = $spacing$,\n\tcharsCount = $charsCount$,\n\tkerningsCounts = $kerningsCounts$\n}\n\n',Object(p.a)(Object(p.a)({},t),{},{charset:t.charset||'""',charsCount:i.count,kerningsCounts:o.count,file:r[0].file})),a+=pi("Font.common = {\n\tlineHeight = $lineHeight$,\n\tbase = $base$,\n\tscaleW = $scaleW$,\n\tscaleH = $scaleH$,\n\tpages = $pages$,\n\tpacked = $packed$\n}\n\n",n),a+="Font.pages = {\n",a+=r.map((function(e){return pi('\t{ id=$id$, file="$file$" }',e)})).join(",\n"),a+="\n}\n\n",a+="Font.chars = {\n",a+=i.list.map((function(e){return pi("\t{\n\t\tid = $id$,\n\t\tx = $x$,\n\t\ty = $y$,\n\t\twidth = $width$,\n\t\theight = $height$,\n\t\txoffset = $xoffset$,\n\t\tyoffset = $yoffset$,\n\t\txadvance = $xadvance$,\n\t\tpage = 0,\n\t\tchnl = 15\n\t}",e)})).join(",\n"),a+="\n}\n\n",a+="Font.kerning = {\n",a+=o.list.map((function(e){return pi("\t{first = $first$, second = $second$, amount = $amount$}",e)})).join(",\n"),"local Font = {}\n\n".concat((a+="\n}").replace(/\t/g,"    "),"\n\nreturn Font\n")}function hi(e){var t=e.info,n=e.common,r=e.pages,i=e.chars,o=e.kernings,a="";return a+=pi('info face="$face$" size=$size$ bold=$bold$ italic=$italic$ charset=$charset$ unicode=$unicode$ stretchH=$stretchH$ smooth=$smooth$ aa=$aa$ padding=$padding$ spacing=$spacing$\n',Object(p.a)(Object(p.a)({},t),{},{charset:t.charset||'""'})),a+=pi("common lineHeight=$lineHeight$ base=$base$ scaleW=$scaleW$ scaleH=$scaleH$ pages=$pages$ packed=$packed$\n",n),r.forEach((function(e){a+=pi('page id=$id$ file="$file$"\n',e)})),a+=pi("chars count=$count$\n",i),i.list.forEach((function(e){a+=pi("char id=$id$ x=$x$ y=$y$ width=$width$ height=$height$ xoffset=$xoffset$ yoffset=$yoffset$ xadvance=$xadvance$ page=$page$ chnl=$chnl$\n",e)})),o.count&&(a+=pi("kernings count=$count$\n",o),o.list.forEach((function(e){a+=pi("kerning first=$first$ second=$second$ amount=$amount$\n",e)}))),a}function gi(e){var t=e.name,n=e.style,r=e.layout,i=e.globalAdjustMetric,o=e.glyphList,a=e.ui,c=a.width,l=a.height,s=n.font,u=s.opentype,f=s.size,p=1;u&&(p=1/u.unitsPerEm*f);var d={face:n.font.family,size:n.font.size,bold:0,italic:0,charset:"",unicode:1,stretchH:100,smooth:1,aa:1,padding:new Array(4).fill(r.padding),spacing:new Array(2).fill(r.spacing)},b={lineHeight:n.font.size,base:n.font.size,scaleW:c,scaleH:l,pages:1,packed:0},h=[{id:0,file:"".concat(t,".png")}],g={count:o.length,list:[]},j={count:0,list:[]};return o.forEach((function(e){var t=!(!e.width||!e.height);g.list.push({letter:e.letter,id:e.letter.charCodeAt(0),source:e.source,x:e.x,y:e.y,width:t?e.width+2*r.padding:0,height:t?e.height+2*r.padding:0,xoffset:i.xOffset+e.adjustMetric.xOffset-(t?e.trimOffsetLeft:0),yoffset:i.yOffset+e.adjustMetric.yOffset-(t?e.trimOffsetTop:0),xadvance:Math.ceil(e.fontWidth)+i.xAdvance+e.adjustMetric.xAdvance,page:0,chnl:15}),u?o.forEach((function(t){var n=t.letter,r=Math.round(u.getKerningValue(u.charToGlyphIndex(e.letter),u.charToGlyphIndex(n))*p+(e.kerning.get(n)||0));r&&j.list.push({first:e.letter.charCodeAt(0),second:n.charCodeAt(0),amount:r})})):e.kerning.forEach((function(t,n){t&&j.list.push({first:e.letter.charCodeAt(0),second:n.charCodeAt(0),amount:t})}))})),j.count=j.list.length,g.list.sort((function(e,t){return e.id-t.id})),{info:d,common:b,pages:h,chars:g,kernings:j}}var ji=n(28),Oi=ji.Reader,yi=ji.Writer,mi=ji.util,wi=ji.roots.default||(ji.roots.default={}),vi=(wi.Metric=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.xAdvance=0,e.prototype.xOffset=0,e.prototype.yOffset=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=yi.create()),null!=e.xAdvance&&Object.hasOwnProperty.call(e,"xAdvance")&&t.uint32(8).sint32(e.xAdvance),null!=e.xOffset&&Object.hasOwnProperty.call(e,"xOffset")&&t.uint32(16).sint32(e.xOffset),null!=e.yOffset&&Object.hasOwnProperty.call(e,"yOffset")&&t.uint32(24).sint32(e.yOffset),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wi.Metric;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.xAdvance=e.sint32();break;case 2:r.xOffset=e.sint32();break;case 3:r.yOffset=e.sint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.xAdvance&&e.hasOwnProperty("xAdvance")&&!mi.isInteger(e.xAdvance)?"xAdvance: integer expected":null!=e.xOffset&&e.hasOwnProperty("xOffset")&&!mi.isInteger(e.xOffset)?"xOffset: integer expected":null!=e.yOffset&&e.hasOwnProperty("yOffset")&&!mi.isInteger(e.yOffset)?"yOffset: integer expected":null},e.fromObject=function(e){if(e instanceof wi.Metric)return e;var t=new wi.Metric;return null!=e.xAdvance&&(t.xAdvance=0|e.xAdvance),null!=e.xOffset&&(t.xOffset=0|e.xOffset),null!=e.yOffset&&(t.yOffset=0|e.yOffset),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.xAdvance=0,n.xOffset=0,n.yOffset=0),null!=e.xAdvance&&e.hasOwnProperty("xAdvance")&&(n.xAdvance=e.xAdvance),null!=e.xOffset&&e.hasOwnProperty("xOffset")&&(n.xOffset=e.xOffset),null!=e.yOffset&&e.hasOwnProperty("yOffset")&&(n.yOffset=e.yOffset),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.GradientColor=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.id=0,e.prototype.offset=0,e.prototype.color="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=yi.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(8).int32(e.id),null!=e.offset&&Object.hasOwnProperty.call(e,"offset")&&t.uint32(16).sint32(e.offset),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(26).string(e.color),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wi.GradientColor;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.id=e.int32();break;case 2:r.offset=e.sint32();break;case 3:r.color=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.id&&e.hasOwnProperty("id")&&!mi.isInteger(e.id)?"id: integer expected":null!=e.offset&&e.hasOwnProperty("offset")&&!mi.isInteger(e.offset)?"offset: integer expected":null!=e.color&&e.hasOwnProperty("color")&&!mi.isString(e.color)?"color: string expected":null},e.fromObject=function(e){if(e instanceof wi.GradientColor)return e;var t=new wi.GradientColor;return null!=e.id&&(t.id=0|e.id),null!=e.offset&&(t.offset=0|e.offset),null!=e.color&&(t.color=String(e.color)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.id=0,n.offset=0,n.color=""),null!=e.id&&e.hasOwnProperty("id")&&(n.id=e.id),null!=e.offset&&e.hasOwnProperty("offset")&&(n.offset=e.offset),null!=e.color&&e.hasOwnProperty("color")&&(n.color=e.color),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.Gradient=function(){function e(e){if(this.palette=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=0,e.prototype.angle=0,e.prototype.palette=mi.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=yi.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.angle&&Object.hasOwnProperty.call(e,"angle")&&t.uint32(21).float(e.angle),null!=e.palette&&e.palette.length)for(var n=0;n<e.palette.length;++n)wi.GradientColor.encode(e.palette[n],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wi.Gradient;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.type=e.int32();break;case 2:r.angle=e.float();break;case 3:r.palette&&r.palette.length||(r.palette=[]),r.palette.push(wi.GradientColor.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type")&&!mi.isInteger(e.type))return"type: integer expected";if(null!=e.angle&&e.hasOwnProperty("angle")&&"number"!==typeof e.angle)return"angle: number expected";if(null!=e.palette&&e.hasOwnProperty("palette")){if(!Array.isArray(e.palette))return"palette: array expected";for(var t=0;t<e.palette.length;++t){var n=wi.GradientColor.verify(e.palette[t]);if(n)return"palette."+n}}return null},e.fromObject=function(e){if(e instanceof wi.Gradient)return e;var t=new wi.Gradient;if(null!=e.type&&(t.type=0|e.type),null!=e.angle&&(t.angle=Number(e.angle)),e.palette){if(!Array.isArray(e.palette))throw TypeError(".Gradient.palette: array expected");t.palette=[];for(var n=0;n<e.palette.length;++n){if("object"!==typeof e.palette[n])throw TypeError(".Gradient.palette: object expected");t.palette[n]=wi.GradientColor.fromObject(e.palette[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.palette=[]),t.defaults&&(n.type=0,n.angle=0),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.angle&&e.hasOwnProperty("angle")&&(n.angle=t.json&&!isFinite(e.angle)?String(e.angle):e.angle),e.palette&&e.palette.length){n.palette=[];for(var r=0;r<e.palette.length;++r)n.palette[r]=wi.GradientColor.toObject(e.palette[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.PatternTexture=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.buffer=mi.newBuffer([]),e.prototype.scale=0,e.prototype.repetition="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=yi.create()),null!=e.buffer&&Object.hasOwnProperty.call(e,"buffer")&&t.uint32(10).bytes(e.buffer),null!=e.scale&&Object.hasOwnProperty.call(e,"scale")&&t.uint32(17).double(e.scale),null!=e.repetition&&Object.hasOwnProperty.call(e,"repetition")&&t.uint32(26).string(e.repetition),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wi.PatternTexture;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.buffer=e.bytes();break;case 2:r.scale=e.double();break;case 3:r.repetition=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.buffer&&e.hasOwnProperty("buffer")&&!(e.buffer&&"number"===typeof e.buffer.length||mi.isString(e.buffer))?"buffer: buffer expected":null!=e.scale&&e.hasOwnProperty("scale")&&"number"!==typeof e.scale?"scale: number expected":null!=e.repetition&&e.hasOwnProperty("repetition")&&!mi.isString(e.repetition)?"repetition: string expected":null},e.fromObject=function(e){if(e instanceof wi.PatternTexture)return e;var t=new wi.PatternTexture;return null!=e.buffer&&("string"===typeof e.buffer?mi.base64.decode(e.buffer,t.buffer=mi.newBuffer(mi.base64.length(e.buffer)),0):e.buffer.length&&(t.buffer=e.buffer)),null!=e.scale&&(t.scale=Number(e.scale)),null!=e.repetition&&(t.repetition=String(e.repetition)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.buffer="":(n.buffer=[],t.bytes!==Array&&(n.buffer=mi.newBuffer(n.buffer))),n.scale=0,n.repetition=""),null!=e.buffer&&e.hasOwnProperty("buffer")&&(n.buffer=t.bytes===String?mi.base64.encode(e.buffer,0,e.buffer.length):t.bytes===Array?Array.prototype.slice.call(e.buffer):e.buffer),null!=e.scale&&e.hasOwnProperty("scale")&&(n.scale=t.json&&!isFinite(e.scale)?String(e.scale):e.scale),null!=e.repetition&&e.hasOwnProperty("repetition")&&(n.repetition=e.repetition),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.Fill=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=0,e.prototype.color="",e.prototype.gradient=null,e.prototype.patternTexture=null,e.prototype.width=0,e.prototype.lineCap="",e.prototype.lineJoin="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=yi.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(18).string(e.color),null!=e.gradient&&Object.hasOwnProperty.call(e,"gradient")&&wi.Gradient.encode(e.gradient,t.uint32(26).fork()).ldelim(),null!=e.patternTexture&&Object.hasOwnProperty.call(e,"patternTexture")&&wi.PatternTexture.encode(e.patternTexture,t.uint32(34).fork()).ldelim(),null!=e.width&&Object.hasOwnProperty.call(e,"width")&&t.uint32(40).int32(e.width),null!=e.lineCap&&Object.hasOwnProperty.call(e,"lineCap")&&t.uint32(50).string(e.lineCap),null!=e.lineJoin&&Object.hasOwnProperty.call(e,"lineJoin")&&t.uint32(58).string(e.lineJoin),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wi.Fill;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.type=e.int32();break;case 2:r.color=e.string();break;case 3:r.gradient=wi.Gradient.decode(e,e.uint32());break;case 4:r.patternTexture=wi.PatternTexture.decode(e,e.uint32());break;case 5:r.width=e.int32();break;case 6:r.lineCap=e.string();break;case 7:r.lineJoin=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type")&&!mi.isInteger(e.type))return"type: integer expected";if(null!=e.color&&e.hasOwnProperty("color")&&!mi.isString(e.color))return"color: string expected";if(null!=e.gradient&&e.hasOwnProperty("gradient")){var t=wi.Gradient.verify(e.gradient);if(t)return"gradient."+t}if(null!=e.patternTexture&&e.hasOwnProperty("patternTexture")){var n=wi.PatternTexture.verify(e.patternTexture);if(n)return"patternTexture."+n}return null!=e.width&&e.hasOwnProperty("width")&&!mi.isInteger(e.width)?"width: integer expected":null!=e.lineCap&&e.hasOwnProperty("lineCap")&&!mi.isString(e.lineCap)?"lineCap: string expected":null!=e.lineJoin&&e.hasOwnProperty("lineJoin")&&!mi.isString(e.lineJoin)?"lineJoin: string expected":null},e.fromObject=function(e){if(e instanceof wi.Fill)return e;var t=new wi.Fill;if(null!=e.type&&(t.type=0|e.type),null!=e.color&&(t.color=String(e.color)),null!=e.gradient){if("object"!==typeof e.gradient)throw TypeError(".Fill.gradient: object expected");t.gradient=wi.Gradient.fromObject(e.gradient)}if(null!=e.patternTexture){if("object"!==typeof e.patternTexture)throw TypeError(".Fill.patternTexture: object expected");t.patternTexture=wi.PatternTexture.fromObject(e.patternTexture)}return null!=e.width&&(t.width=0|e.width),null!=e.lineCap&&(t.lineCap=String(e.lineCap)),null!=e.lineJoin&&(t.lineJoin=String(e.lineJoin)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.type=0,n.color="",n.gradient=null,n.patternTexture=null,n.width=0,n.lineCap="",n.lineJoin=""),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.color&&e.hasOwnProperty("color")&&(n.color=e.color),null!=e.gradient&&e.hasOwnProperty("gradient")&&(n.gradient=wi.Gradient.toObject(e.gradient,t)),null!=e.patternTexture&&e.hasOwnProperty("patternTexture")&&(n.patternTexture=wi.PatternTexture.toObject(e.patternTexture,t)),null!=e.width&&e.hasOwnProperty("width")&&(n.width=e.width),null!=e.lineCap&&e.hasOwnProperty("lineCap")&&(n.lineCap=e.lineCap),null!=e.lineJoin&&e.hasOwnProperty("lineJoin")&&(n.lineJoin=e.lineJoin),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.Font=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.font=mi.newBuffer([]),e.prototype.family="",e.prototype.size=0,e.prototype.lineHeight=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=yi.create()),null!=e.font&&Object.hasOwnProperty.call(e,"font")&&t.uint32(10).bytes(e.font),null!=e.family&&Object.hasOwnProperty.call(e,"family")&&t.uint32(18).string(e.family),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(24).int32(e.size),null!=e.lineHeight&&Object.hasOwnProperty.call(e,"lineHeight")&&t.uint32(32).int32(e.lineHeight),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wi.Font;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.font=e.bytes();break;case 2:r.family=e.string();break;case 3:r.size=e.int32();break;case 4:r.lineHeight=e.int32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.font&&e.hasOwnProperty("font")&&!(e.font&&"number"===typeof e.font.length||mi.isString(e.font))?"font: buffer expected":null!=e.family&&e.hasOwnProperty("family")&&!mi.isString(e.family)?"family: string expected":null!=e.size&&e.hasOwnProperty("size")&&!mi.isInteger(e.size)?"size: integer expected":null!=e.lineHeight&&e.hasOwnProperty("lineHeight")&&!mi.isInteger(e.lineHeight)?"lineHeight: integer expected":null},e.fromObject=function(e){if(e instanceof wi.Font)return e;var t=new wi.Font;return null!=e.font&&("string"===typeof e.font?mi.base64.decode(e.font,t.font=mi.newBuffer(mi.base64.length(e.font)),0):e.font.length&&(t.font=e.font)),null!=e.family&&(t.family=String(e.family)),null!=e.size&&(t.size=0|e.size),null!=e.lineHeight&&(t.lineHeight=0|e.lineHeight),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.font="":(n.font=[],t.bytes!==Array&&(n.font=mi.newBuffer(n.font))),n.family="",n.size=0,n.lineHeight=0),null!=e.font&&e.hasOwnProperty("font")&&(n.font=t.bytes===String?mi.base64.encode(e.font,0,e.font.length):t.bytes===Array?Array.prototype.slice.call(e.font):e.font),null!=e.family&&e.hasOwnProperty("family")&&(n.family=e.family),null!=e.size&&e.hasOwnProperty("size")&&(n.size=e.size),null!=e.lineHeight&&e.hasOwnProperty("lineHeight")&&(n.lineHeight=e.lineHeight),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.GlyphFont=function(){function e(e){if(this.kerning={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.letter="",e.prototype.adjustMetric=null,e.prototype.kerning=mi.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=yi.create()),null!=e.letter&&Object.hasOwnProperty.call(e,"letter")&&t.uint32(10).string(e.letter),null!=e.adjustMetric&&Object.hasOwnProperty.call(e,"adjustMetric")&&wi.Metric.encode(e.adjustMetric,t.uint32(18).fork()).ldelim(),null!=e.kerning&&Object.hasOwnProperty.call(e,"kerning"))for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)t.uint32(26).fork().uint32(10).string(n[r]).uint32(16).int32(e.kerning[n[r]]).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n,r,i=void 0===t?e.len:e.pos+t,o=new wi.GlyphFont;e.pos<i;){var a=e.uint32();switch(a>>>3){case 1:o.letter=e.string();break;case 2:o.adjustMetric=wi.Metric.decode(e,e.uint32());break;case 3:o.kerning===mi.emptyObject&&(o.kerning={});var c=e.uint32()+e.pos;for(n="",r=0;e.pos<c;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:r=e.int32();break;default:e.skipType(7&l)}}o.kerning[n]=r;break;default:e.skipType(7&a)}}return o},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.letter&&e.hasOwnProperty("letter")&&!mi.isString(e.letter))return"letter: string expected";if(null!=e.adjustMetric&&e.hasOwnProperty("adjustMetric")){var t=wi.Metric.verify(e.adjustMetric);if(t)return"adjustMetric."+t}if(null!=e.kerning&&e.hasOwnProperty("kerning")){if(!mi.isObject(e.kerning))return"kerning: object expected";for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)if(!mi.isInteger(e.kerning[n[r]]))return"kerning: integer{k:string} expected"}return null},e.fromObject=function(e){if(e instanceof wi.GlyphFont)return e;var t=new wi.GlyphFont;if(null!=e.letter&&(t.letter=String(e.letter)),null!=e.adjustMetric){if("object"!==typeof e.adjustMetric)throw TypeError(".GlyphFont.adjustMetric: object expected");t.adjustMetric=wi.Metric.fromObject(e.adjustMetric)}if(e.kerning){if("object"!==typeof e.kerning)throw TypeError(".GlyphFont.kerning: object expected");t.kerning={};for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)t.kerning[n[r]]=0|e.kerning[n[r]]}return t},e.toObject=function(e,t){t||(t={});var n,r={};if((t.objects||t.defaults)&&(r.kerning={}),t.defaults&&(r.letter="",r.adjustMetric=null),null!=e.letter&&e.hasOwnProperty("letter")&&(r.letter=e.letter),null!=e.adjustMetric&&e.hasOwnProperty("adjustMetric")&&(r.adjustMetric=wi.Metric.toObject(e.adjustMetric,t)),e.kerning&&(n=Object.keys(e.kerning)).length){r.kerning={};for(var i=0;i<n.length;++i)r.kerning[n[i]]=e.kerning[n[i]]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.GlyphImage=function(){function e(e){if(this.kerning={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.letter="",e.prototype.adjustMetric=null,e.prototype.buffer=mi.newBuffer([]),e.prototype.fileName="",e.prototype.fileType="",e.prototype.selected=!1,e.prototype.kerning=mi.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=yi.create()),null!=e.letter&&Object.hasOwnProperty.call(e,"letter")&&t.uint32(10).string(e.letter),null!=e.adjustMetric&&Object.hasOwnProperty.call(e,"adjustMetric")&&wi.Metric.encode(e.adjustMetric,t.uint32(18).fork()).ldelim(),null!=e.buffer&&Object.hasOwnProperty.call(e,"buffer")&&t.uint32(26).bytes(e.buffer),null!=e.fileName&&Object.hasOwnProperty.call(e,"fileName")&&t.uint32(34).string(e.fileName),null!=e.fileType&&Object.hasOwnProperty.call(e,"fileType")&&t.uint32(42).string(e.fileType),null!=e.selected&&Object.hasOwnProperty.call(e,"selected")&&t.uint32(48).bool(e.selected),null!=e.kerning&&Object.hasOwnProperty.call(e,"kerning"))for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)t.uint32(58).fork().uint32(10).string(n[r]).uint32(16).int32(e.kerning[n[r]]).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n,r,i=void 0===t?e.len:e.pos+t,o=new wi.GlyphImage;e.pos<i;){var a=e.uint32();switch(a>>>3){case 1:o.letter=e.string();break;case 2:o.adjustMetric=wi.Metric.decode(e,e.uint32());break;case 3:o.buffer=e.bytes();break;case 4:o.fileName=e.string();break;case 5:o.fileType=e.string();break;case 6:o.selected=e.bool();break;case 7:o.kerning===mi.emptyObject&&(o.kerning={});var c=e.uint32()+e.pos;for(n="",r=0;e.pos<c;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:r=e.int32();break;default:e.skipType(7&l)}}o.kerning[n]=r;break;default:e.skipType(7&a)}}return o},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.letter&&e.hasOwnProperty("letter")&&!mi.isString(e.letter))return"letter: string expected";if(null!=e.adjustMetric&&e.hasOwnProperty("adjustMetric")){var t=wi.Metric.verify(e.adjustMetric);if(t)return"adjustMetric."+t}if(null!=e.buffer&&e.hasOwnProperty("buffer")&&!(e.buffer&&"number"===typeof e.buffer.length||mi.isString(e.buffer)))return"buffer: buffer expected";if(null!=e.fileName&&e.hasOwnProperty("fileName")&&!mi.isString(e.fileName))return"fileName: string expected";if(null!=e.fileType&&e.hasOwnProperty("fileType")&&!mi.isString(e.fileType))return"fileType: string expected";if(null!=e.selected&&e.hasOwnProperty("selected")&&"boolean"!==typeof e.selected)return"selected: boolean expected";if(null!=e.kerning&&e.hasOwnProperty("kerning")){if(!mi.isObject(e.kerning))return"kerning: object expected";for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)if(!mi.isInteger(e.kerning[n[r]]))return"kerning: integer{k:string} expected"}return null},e.fromObject=function(e){if(e instanceof wi.GlyphImage)return e;var t=new wi.GlyphImage;if(null!=e.letter&&(t.letter=String(e.letter)),null!=e.adjustMetric){if("object"!==typeof e.adjustMetric)throw TypeError(".GlyphImage.adjustMetric: object expected");t.adjustMetric=wi.Metric.fromObject(e.adjustMetric)}if(null!=e.buffer&&("string"===typeof e.buffer?mi.base64.decode(e.buffer,t.buffer=mi.newBuffer(mi.base64.length(e.buffer)),0):e.buffer.length&&(t.buffer=e.buffer)),null!=e.fileName&&(t.fileName=String(e.fileName)),null!=e.fileType&&(t.fileType=String(e.fileType)),null!=e.selected&&(t.selected=Boolean(e.selected)),e.kerning){if("object"!==typeof e.kerning)throw TypeError(".GlyphImage.kerning: object expected");t.kerning={};for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)t.kerning[n[r]]=0|e.kerning[n[r]]}return t},e.toObject=function(e,t){t||(t={});var n,r={};if((t.objects||t.defaults)&&(r.kerning={}),t.defaults&&(r.letter="",r.adjustMetric=null,t.bytes===String?r.buffer="":(r.buffer=[],t.bytes!==Array&&(r.buffer=mi.newBuffer(r.buffer))),r.fileName="",r.fileType="",r.selected=!1),null!=e.letter&&e.hasOwnProperty("letter")&&(r.letter=e.letter),null!=e.adjustMetric&&e.hasOwnProperty("adjustMetric")&&(r.adjustMetric=wi.Metric.toObject(e.adjustMetric,t)),null!=e.buffer&&e.hasOwnProperty("buffer")&&(r.buffer=t.bytes===String?mi.base64.encode(e.buffer,0,e.buffer.length):t.bytes===Array?Array.prototype.slice.call(e.buffer):e.buffer),null!=e.fileName&&e.hasOwnProperty("fileName")&&(r.fileName=e.fileName),null!=e.fileType&&e.hasOwnProperty("fileType")&&(r.fileType=e.fileType),null!=e.selected&&e.hasOwnProperty("selected")&&(r.selected=e.selected),e.kerning&&(n=Object.keys(e.kerning)).length){r.kerning={};for(var i=0;i<n.length;++i)r.kerning[n[i]]=e.kerning[n[i]]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.Layout=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.padding=0,e.prototype.spacing=0,e.prototype.power=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=yi.create()),null!=e.padding&&Object.hasOwnProperty.call(e,"padding")&&t.uint32(8).int32(e.padding),null!=e.spacing&&Object.hasOwnProperty.call(e,"spacing")&&t.uint32(16).int32(e.spacing),null!=e.power&&Object.hasOwnProperty.call(e,"power")&&t.uint32(24).bool(e.power),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wi.Layout;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.padding=e.int32();break;case 2:r.spacing=e.int32();break;case 3:r.power=e.bool();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.padding&&e.hasOwnProperty("padding")&&!mi.isInteger(e.padding)?"padding: integer expected":null!=e.spacing&&e.hasOwnProperty("spacing")&&!mi.isInteger(e.spacing)?"spacing: integer expected":null!=e.power&&e.hasOwnProperty("power")&&"boolean"!==typeof e.power?"power: boolean expected":null},e.fromObject=function(e){if(e instanceof wi.Layout)return e;var t=new wi.Layout;return null!=e.padding&&(t.padding=0|e.padding),null!=e.spacing&&(t.spacing=0|e.spacing),null!=e.power&&(t.power=Boolean(e.power)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.padding=0,n.spacing=0,n.power=!1),null!=e.padding&&e.hasOwnProperty("padding")&&(n.padding=e.padding),null!=e.spacing&&e.hasOwnProperty("spacing")&&(n.spacing=e.spacing),null!=e.power&&e.hasOwnProperty("power")&&(n.power=e.power),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.Shadow=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.color="",e.prototype.blur=0,e.prototype.offsetX=0,e.prototype.offsetY=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=yi.create()),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(10).string(e.color),null!=e.blur&&Object.hasOwnProperty.call(e,"blur")&&t.uint32(16).int32(e.blur),null!=e.offsetX&&Object.hasOwnProperty.call(e,"offsetX")&&t.uint32(24).sint32(e.offsetX),null!=e.offsetY&&Object.hasOwnProperty.call(e,"offsetY")&&t.uint32(32).sint32(e.offsetY),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wi.Shadow;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.color=e.string();break;case 2:r.blur=e.int32();break;case 3:r.offsetX=e.sint32();break;case 4:r.offsetY=e.sint32();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.color&&e.hasOwnProperty("color")&&!mi.isString(e.color)?"color: string expected":null!=e.blur&&e.hasOwnProperty("blur")&&!mi.isInteger(e.blur)?"blur: integer expected":null!=e.offsetX&&e.hasOwnProperty("offsetX")&&!mi.isInteger(e.offsetX)?"offsetX: integer expected":null!=e.offsetY&&e.hasOwnProperty("offsetY")&&!mi.isInteger(e.offsetY)?"offsetY: integer expected":null},e.fromObject=function(e){if(e instanceof wi.Shadow)return e;var t=new wi.Shadow;return null!=e.color&&(t.color=String(e.color)),null!=e.blur&&(t.blur=0|e.blur),null!=e.offsetX&&(t.offsetX=0|e.offsetX),null!=e.offsetY&&(t.offsetY=0|e.offsetY),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.color="",n.blur=0,n.offsetX=0,n.offsetY=0),null!=e.color&&e.hasOwnProperty("color")&&(n.color=e.color),null!=e.blur&&e.hasOwnProperty("blur")&&(n.blur=e.blur),null!=e.offsetX&&e.hasOwnProperty("offsetX")&&(n.offsetX=e.offsetX),null!=e.offsetY&&e.hasOwnProperty("offsetY")&&(n.offsetY=e.offsetY),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.Style=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.font=null,e.prototype.fill=null,e.prototype.useStroke=!1,e.prototype.stroke=null,e.prototype.useShadow=!1,e.prototype.shadow=null,e.prototype.bgColor="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=yi.create()),null!=e.font&&Object.hasOwnProperty.call(e,"font")&&wi.Font.encode(e.font,t.uint32(10).fork()).ldelim(),null!=e.fill&&Object.hasOwnProperty.call(e,"fill")&&wi.Fill.encode(e.fill,t.uint32(18).fork()).ldelim(),null!=e.useStroke&&Object.hasOwnProperty.call(e,"useStroke")&&t.uint32(24).bool(e.useStroke),null!=e.stroke&&Object.hasOwnProperty.call(e,"stroke")&&wi.Fill.encode(e.stroke,t.uint32(34).fork()).ldelim(),null!=e.useShadow&&Object.hasOwnProperty.call(e,"useShadow")&&t.uint32(40).bool(e.useShadow),null!=e.shadow&&Object.hasOwnProperty.call(e,"shadow")&&wi.Shadow.encode(e.shadow,t.uint32(50).fork()).ldelim(),null!=e.bgColor&&Object.hasOwnProperty.call(e,"bgColor")&&t.uint32(58).string(e.bgColor),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wi.Style;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.font=wi.Font.decode(e,e.uint32());break;case 2:r.fill=wi.Fill.decode(e,e.uint32());break;case 3:r.useStroke=e.bool();break;case 4:r.stroke=wi.Fill.decode(e,e.uint32());break;case 5:r.useShadow=e.bool();break;case 6:r.shadow=wi.Shadow.decode(e,e.uint32());break;case 7:r.bgColor=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.font&&e.hasOwnProperty("font")){var t=wi.Font.verify(e.font);if(t)return"font."+t}if(null!=e.fill&&e.hasOwnProperty("fill")){var n=wi.Fill.verify(e.fill);if(n)return"fill."+n}if(null!=e.useStroke&&e.hasOwnProperty("useStroke")&&"boolean"!==typeof e.useStroke)return"useStroke: boolean expected";if(null!=e.stroke&&e.hasOwnProperty("stroke")){var r=wi.Fill.verify(e.stroke);if(r)return"stroke."+r}if(null!=e.useShadow&&e.hasOwnProperty("useShadow")&&"boolean"!==typeof e.useShadow)return"useShadow: boolean expected";if(null!=e.shadow&&e.hasOwnProperty("shadow")){var i=wi.Shadow.verify(e.shadow);if(i)return"shadow."+i}return null!=e.bgColor&&e.hasOwnProperty("bgColor")&&!mi.isString(e.bgColor)?"bgColor: string expected":null},e.fromObject=function(e){if(e instanceof wi.Style)return e;var t=new wi.Style;if(null!=e.font){if("object"!==typeof e.font)throw TypeError(".Style.font: object expected");t.font=wi.Font.fromObject(e.font)}if(null!=e.fill){if("object"!==typeof e.fill)throw TypeError(".Style.fill: object expected");t.fill=wi.Fill.fromObject(e.fill)}if(null!=e.useStroke&&(t.useStroke=Boolean(e.useStroke)),null!=e.stroke){if("object"!==typeof e.stroke)throw TypeError(".Style.stroke: object expected");t.stroke=wi.Fill.fromObject(e.stroke)}if(null!=e.useShadow&&(t.useShadow=Boolean(e.useShadow)),null!=e.shadow){if("object"!==typeof e.shadow)throw TypeError(".Style.shadow: object expected");t.shadow=wi.Shadow.fromObject(e.shadow)}return null!=e.bgColor&&(t.bgColor=String(e.bgColor)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.font=null,n.fill=null,n.useStroke=!1,n.stroke=null,n.useShadow=!1,n.shadow=null,n.bgColor=""),null!=e.font&&e.hasOwnProperty("font")&&(n.font=wi.Font.toObject(e.font,t)),null!=e.fill&&e.hasOwnProperty("fill")&&(n.fill=wi.Fill.toObject(e.fill,t)),null!=e.useStroke&&e.hasOwnProperty("useStroke")&&(n.useStroke=e.useStroke),null!=e.stroke&&e.hasOwnProperty("stroke")&&(n.stroke=wi.Fill.toObject(e.stroke,t)),null!=e.useShadow&&e.hasOwnProperty("useShadow")&&(n.useShadow=e.useShadow),null!=e.shadow&&e.hasOwnProperty("shadow")&&(n.shadow=wi.Shadow.toObject(e.shadow,t)),null!=e.bgColor&&e.hasOwnProperty("bgColor")&&(n.bgColor=e.bgColor),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.Ui=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.previewText="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=yi.create()),null!=e.previewText&&Object.hasOwnProperty.call(e,"previewText")&&t.uint32(10).string(e.previewText),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wi.Ui;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.previewText=e.string();break;default:e.skipType(7&i)}}return r},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.previewText&&e.hasOwnProperty("previewText")&&!mi.isString(e.previewText)?"previewText: string expected":null},e.fromObject=function(e){if(e instanceof wi.Ui)return e;var t=new wi.Ui;return null!=e.previewText&&(t.previewText=String(e.previewText)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.previewText=""),null!=e.previewText&&e.hasOwnProperty("previewText")&&(n.previewText=e.previewText),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),wi.Project=function(){function e(e){if(this.glyphs={},this.glyphImages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.id=mi.Long?mi.Long.fromBits(0,0,!1):0,e.prototype.name="",e.prototype.text="",e.prototype.glyphs=mi.emptyObject,e.prototype.glyphImages=mi.emptyArray,e.prototype.style=null,e.prototype.layout=null,e.prototype.globalAdjustMetric=null,e.prototype.ui=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=yi.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(8).int64(e.id),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.text&&Object.hasOwnProperty.call(e,"text")&&t.uint32(26).string(e.text),null!=e.glyphs&&Object.hasOwnProperty.call(e,"glyphs"))for(var n=Object.keys(e.glyphs),r=0;r<n.length;++r)t.uint32(34).fork().uint32(10).string(n[r]),wi.GlyphFont.encode(e.glyphs[n[r]],t.uint32(18).fork()).ldelim().ldelim();if(null!=e.glyphImages&&e.glyphImages.length)for(var i=0;i<e.glyphImages.length;++i)wi.GlyphImage.encode(e.glyphImages[i],t.uint32(42).fork()).ldelim();return null!=e.style&&Object.hasOwnProperty.call(e,"style")&&wi.Style.encode(e.style,t.uint32(50).fork()).ldelim(),null!=e.layout&&Object.hasOwnProperty.call(e,"layout")&&wi.Layout.encode(e.layout,t.uint32(58).fork()).ldelim(),null!=e.globalAdjustMetric&&Object.hasOwnProperty.call(e,"globalAdjustMetric")&&wi.Metric.encode(e.globalAdjustMetric,t.uint32(66).fork()).ldelim(),null!=e.ui&&Object.hasOwnProperty.call(e,"ui")&&wi.Ui.encode(e.ui,t.uint32(74).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Oi||(e=Oi.create(e));for(var n,r,i=void 0===t?e.len:e.pos+t,o=new wi.Project;e.pos<i;){var a=e.uint32();switch(a>>>3){case 1:o.id=e.int64();break;case 2:o.name=e.string();break;case 3:o.text=e.string();break;case 4:o.glyphs===mi.emptyObject&&(o.glyphs={});var c=e.uint32()+e.pos;for(n="",r=null;e.pos<c;){var l=e.uint32();switch(l>>>3){case 1:n=e.string();break;case 2:r=wi.GlyphFont.decode(e,e.uint32());break;default:e.skipType(7&l)}}o.glyphs[n]=r;break;case 5:o.glyphImages&&o.glyphImages.length||(o.glyphImages=[]),o.glyphImages.push(wi.GlyphImage.decode(e,e.uint32()));break;case 6:o.style=wi.Style.decode(e,e.uint32());break;case 7:o.layout=wi.Layout.decode(e,e.uint32());break;case 8:o.globalAdjustMetric=wi.Metric.decode(e,e.uint32());break;case 9:o.ui=wi.Ui.decode(e,e.uint32());break;default:e.skipType(7&a)}}return o},e.decodeDelimited=function(e){return e instanceof Oi||(e=new Oi(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.id&&e.hasOwnProperty("id")&&!mi.isInteger(e.id)&&!(e.id&&mi.isInteger(e.id.low)&&mi.isInteger(e.id.high)))return"id: integer|Long expected";if(null!=e.name&&e.hasOwnProperty("name")&&!mi.isString(e.name))return"name: string expected";if(null!=e.text&&e.hasOwnProperty("text")&&!mi.isString(e.text))return"text: string expected";if(null!=e.glyphs&&e.hasOwnProperty("glyphs")){if(!mi.isObject(e.glyphs))return"glyphs: object expected";for(var t=Object.keys(e.glyphs),n=0;n<t.length;++n){var r=wi.GlyphFont.verify(e.glyphs[t[n]]);if(r)return"glyphs."+r}}if(null!=e.glyphImages&&e.hasOwnProperty("glyphImages")){if(!Array.isArray(e.glyphImages))return"glyphImages: array expected";for(var i=0;i<e.glyphImages.length;++i){var o=wi.GlyphImage.verify(e.glyphImages[i]);if(o)return"glyphImages."+o}}if(null!=e.style&&e.hasOwnProperty("style")){var a=wi.Style.verify(e.style);if(a)return"style."+a}if(null!=e.layout&&e.hasOwnProperty("layout")){var c=wi.Layout.verify(e.layout);if(c)return"layout."+c}if(null!=e.globalAdjustMetric&&e.hasOwnProperty("globalAdjustMetric")){var l=wi.Metric.verify(e.globalAdjustMetric);if(l)return"globalAdjustMetric."+l}if(null!=e.ui&&e.hasOwnProperty("ui")){var s=wi.Ui.verify(e.ui);if(s)return"ui."+s}return null},e.fromObject=function(e){if(e instanceof wi.Project)return e;var t=new wi.Project;if(null!=e.id&&(mi.Long?(t.id=mi.Long.fromValue(e.id)).unsigned=!1:"string"===typeof e.id?t.id=parseInt(e.id,10):"number"===typeof e.id?t.id=e.id:"object"===typeof e.id&&(t.id=new mi.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber())),null!=e.name&&(t.name=String(e.name)),null!=e.text&&(t.text=String(e.text)),e.glyphs){if("object"!==typeof e.glyphs)throw TypeError(".Project.glyphs: object expected");t.glyphs={};for(var n=Object.keys(e.glyphs),r=0;r<n.length;++r){if("object"!==typeof e.glyphs[n[r]])throw TypeError(".Project.glyphs: object expected");t.glyphs[n[r]]=wi.GlyphFont.fromObject(e.glyphs[n[r]])}}if(e.glyphImages){if(!Array.isArray(e.glyphImages))throw TypeError(".Project.glyphImages: array expected");t.glyphImages=[];for(var i=0;i<e.glyphImages.length;++i){if("object"!==typeof e.glyphImages[i])throw TypeError(".Project.glyphImages: object expected");t.glyphImages[i]=wi.GlyphImage.fromObject(e.glyphImages[i])}}if(null!=e.style){if("object"!==typeof e.style)throw TypeError(".Project.style: object expected");t.style=wi.Style.fromObject(e.style)}if(null!=e.layout){if("object"!==typeof e.layout)throw TypeError(".Project.layout: object expected");t.layout=wi.Layout.fromObject(e.layout)}if(null!=e.globalAdjustMetric){if("object"!==typeof e.globalAdjustMetric)throw TypeError(".Project.globalAdjustMetric: object expected");t.globalAdjustMetric=wi.Metric.fromObject(e.globalAdjustMetric)}if(null!=e.ui){if("object"!==typeof e.ui)throw TypeError(".Project.ui: object expected");t.ui=wi.Ui.fromObject(e.ui)}return t},e.toObject=function(e,t){t||(t={});var n,r={};if((t.arrays||t.defaults)&&(r.glyphImages=[]),(t.objects||t.defaults)&&(r.glyphs={}),t.defaults){if(mi.Long){var i=new mi.Long(0,0,!1);r.id=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else r.id=t.longs===String?"0":0;r.name="",r.text="",r.style=null,r.layout=null,r.globalAdjustMetric=null,r.ui=null}if(null!=e.id&&e.hasOwnProperty("id")&&("number"===typeof e.id?r.id=t.longs===String?String(e.id):e.id:r.id=t.longs===String?mi.Long.prototype.toString.call(e.id):t.longs===Number?new mi.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber():e.id),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.text&&e.hasOwnProperty("text")&&(r.text=e.text),e.glyphs&&(n=Object.keys(e.glyphs)).length){r.glyphs={};for(var o=0;o<n.length;++o)r.glyphs[n[o]]=wi.GlyphFont.toObject(e.glyphs[n[o]],t)}if(e.glyphImages&&e.glyphImages.length){r.glyphImages=[];for(var a=0;a<e.glyphImages.length;++a)r.glyphImages[a]=wi.GlyphImage.toObject(e.glyphImages[a],t)}return null!=e.style&&e.hasOwnProperty("style")&&(r.style=wi.Style.toObject(e.style,t)),null!=e.layout&&e.hasOwnProperty("layout")&&(r.layout=wi.Layout.toObject(e.layout,t)),null!=e.globalAdjustMetric&&e.hasOwnProperty("globalAdjustMetric")&&(r.globalAdjustMetric=wi.Metric.toObject(e.globalAdjustMetric,t)),null!=e.ui&&e.hasOwnProperty("ui")&&(r.ui=wi.Ui.toObject(e.ui,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ji.util.toJSONOptions)},e}(),function(){return new Uint8Array([].concat(Object(Ce.a)("SnowBambooBMF".split("").map((function(e){return e.charCodeAt(0)}))),[1,0,0]))});function xi(e){if(e.byteLength<17)throw new Error("error");var t=vi(),n=new Uint8Array(e),r=n.slice(0,t.byteLength),i=!0;if(t.forEach((function(e,t){r[t]!==e&&(i=!1)})),!i)throw new Error("unknow file");return function(e){var t,n,r,i,o,a,c,l,s=Object(p.a)({},e),u=new Map;return(null===s||void 0===s||null===(t=s.style)||void 0===t||null===(n=t.font)||void 0===n?void 0:n.font)&&(s.style.font=Object(p.a)(Object(p.a)({},s.style.font),{},{font:s.style.font.font.slice().buffer})),(null===s||void 0===s?void 0:s.glyphImages)&&s.glyphImages.forEach((function(e){if(e.buffer&&(e.buffer=e.buffer.slice().buffer),e.kerning){var t=new Map;Object.keys(e.kerning).forEach((function(n){e&&e.kerning&&e.kerning[n]&&t.set(n,e.kerning[n]||0)}))}})),(null===s||void 0===s?void 0:s.glyphs)&&Object.keys(s.glyphs).forEach((function(e){if(s&&s.glyphs&&s.glyphs[e]){var t=s.glyphs[e],n=new Map;t&&t.kerning&&Object.keys(t.kerning).forEach((function(e){t.kerning&&n.set(e,t.kerning[e]||0)})),u.set(e,Object(p.a)(Object(p.a)({},t),{},{kerning:n}))}})),(null===s||void 0===s||null===(r=s.style)||void 0===r||null===(i=r.fill)||void 0===i||null===(o=i.patternTexture)||void 0===o?void 0:o.buffer)&&(s.style.fill.patternTexture.buffer=s.style.fill.patternTexture.buffer.slice().buffer),(null===s||void 0===s||null===(a=s.style)||void 0===a||null===(c=a.stroke)||void 0===c||null===(l=c.patternTexture)||void 0===l?void 0:l.buffer)&&(s.style.stroke.patternTexture.buffer=s.style.stroke.patternTexture.buffer.slice().buffer),Object(p.a)(Object(p.a)({},s),{},{glyphs:u,glyphImages:s.glyphImages||[]})}(wi.Project.decode(n.slice(r.byteLength)))}var ki=n(418),Pi=n(419),Si=n(420),Ci=n(421),Ti=n(433),Bi=n(442),Ii=function(e){var t=e.className,n=e.onSave,r=Br().name,i=Object(l.useState)(!1),o=Object(Mr.a)(i,2),a=o[0],s=o[1],u=Object(l.useState)(0),f=Object(Mr.a)(u,2),p=f[0],d=f[1],b=Object(l.useState)([{id:0,ext:"fnt",type:"xml"},{id:1,ext:"xml",type:"xml"},{id:2,ext:"fnt",type:"text"},{id:3,ext:"text",type:"text"}]),h=Object(Mr.a)(b,1)[0],g=function(){s(!0)},j=function(){s(!1)};return Object(l.useEffect)((function(){return ni.a.unbind("ctrl+shift+s,command+shift+s"),Object(ni.a)("ctrl+shift+s,command+shift+s",g),function(){ni.a.unbind("ctrl+shift+s,command+shift+s")}}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Nr.a,{className:t,title:"Export BitmapFont (\u2318\u21e7 + S)",onClick:g,children:"Export"}),Object(c.jsxs)(ki.a,{onClose:j,open:a,fullWidth:!0,maxWidth:"xs",children:[Object(c.jsx)(Pi.a,{children:"Export Config"}),Object(c.jsx)(Si.a,{dividers:!0,children:Object(c.jsx)(Wr,{before:"Export Type:",childrenWidth:8,children:Object(c.jsx)(Ti.a,{displayEmpty:!0,value:p,onChange:function(e){d(e.target.value)},children:h.map((function(e){return Object(c.jsx)(Bi.a,{value:e.id,children:"".concat(r,".").concat(e.ext," (BMFont ").concat(e.type.toUpperCase(),")")},e.id)}))})})}),Object(c.jsx)(Ci.a,{children:Object(c.jsx)(Nr.a,{autoFocus:!0,onClick:function(){n&&n({ext:h[p].ext,type:h[p].type}),j()},color:"default",children:"Save"})})]})]})},$i=Object(kr.a)((function(e){var t=e.zIndex,n=e.spacing;return Object(Pr.a)({root:{position:"relative",zIndex:t.appBar},appName:{fontSize:"1.25rem",fontWeight:"bolder",marginRight:n(4)},appNameSup:{fontWeight:"lighter",fontSize:"0.5em",marginLeft:"0.5rem"},btn:{textTransform:"none"}})})),Ai=Object(h.c)((function(){var e=$i(),t=Object(l.useState)({open:!1,component:null}),n=Object(Mr.a)(t,2),r=n[0],i=n[1],o=Cr(),a=Object(l.useRef)(null),s=o.addProject,u=o.currentProject,f=Object(l.useCallback)((function(e){return e.preventDefault(),s(),!1}),[s]),d=Object(l.useCallback)((function(e){return e.preventDefault(),function(e){e.style.font.font&&(e.style.font.font=new Uint8Array(e.style.font.font)),e.glyphImages.forEach((function(e){e.buffer&&(e.buffer=new Uint8Array(e.buffer))})),e.style.fill.patternTexture.buffer&&(e.style.fill.patternTexture.buffer=new Uint8Array(e.style.fill.patternTexture.buffer)),e.style.stroke.patternTexture.buffer&&(e.style.stroke.patternTexture.buffer=new Uint8Array(e.style.stroke.patternTexture.buffer));var t=wi.Project.create(e),n=wi.Project.encode(t).finish(),r=vi(),i=new Uint8Array(r.byteLength+n.byteLength);i.set(r,0),i.set(n,r.byteLength),Object(fi.saveAs)(new Blob([i]),"".concat(e.name,".sbf"))}(Object(g.H)(u)),!1}),[u]),b=Object(l.useCallback)((function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"xml",ext:"fnt"},n=new ui.a,r=e.packCanvas,i=e.name,o=gi(e),a="";switch(t.type){case"text":a=hi(o);break;case"lua":a=bi(o);break;default:a=di(o)}n.file("".concat(i,".").concat(t.ext),a),r&&r.toBlob((function(e){e&&n.file("".concat(i,".png"),e),n.generateAsync({type:"blob"}).then((function(e){return Object(fi.saveAs)(e,"".concat(i,".zip"))}))}))}(u,e)}),[u]),h=Object(l.useCallback)((function(e){return e.preventDefault(),a.current&&a.current.click(),!1}),[]);return Object(l.useEffect)((function(){return ni.a.unbind("alt+n,control+n"),ni.a.unbind("ctrl+s"),ni.a.unbind("ctrl+o,command+o"),Object(ni.a)("alt+n,control+n",f),Object(ni.a)("ctrl+s",d),Object(ni.a)("ctrl+o,command+o",h),function(){ni.a.unbind("alt+n,control+n"),ni.a.unbind("ctrl+s"),ni.a.unbind("ctrl+o,command+o")}}),[f,h,d]),Object(c.jsxs)(wr.a,{className:e.root,bgcolor:"background.titleBar",paddingX:4,display:"flex",alignItems:"center",children:[Object(c.jsxs)(Lr.a,{variant:"h1",className:e.appName,children:["SnowB BMF",Object(c.jsx)("sup",{className:e.appNameSup,children:"BETA"})]}),Object(c.jsxs)(wr.a,{flex:"auto",paddingX:4,children:[Object(c.jsx)(Nr.a,{className:e.btn,title:"New Project (ALT + N)",onClick:f,children:"New"}),Object(c.jsxs)(Nr.a,{className:e.btn,title:"Open Project (\u2318 + O)",component:"label",ref:a,children:["Open",Object(c.jsx)("input",{type:"file",onChange:function(e){var t;(null===(t=e.target)||void 0===t?void 0:t.files)&&e.target.files[0]&&Xr(e.target.files[0]).then((function(e){try{e instanceof ArrayBuffer&&s(xi(e))}catch(t){i({open:!0,component:Object(c.jsxs)(wr.a,{display:"flex",alignItems:"center",children:[Object(c.jsx)(ci.a,{}),"".concat(t.toString())]})})}}))},accept:".sbf",hidden:!0})]}),Object(c.jsx)(Nr.a,{className:e.btn,title:"Save Project (\u2318 + S)",onClick:d,children:"Save"}),Object(c.jsx)(Ii,{className:e.btn,onSave:b})]}),Object(c.jsx)(ri.a,{size:"small",component:"a",href:"https://github.com/SilenceLeo/snowb-bmf",target:"_blank",title:"GitHub",children:Object(c.jsx)(oi.a,{})}),Object(c.jsx)(li.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:r.open,onClose:function(){i((function(e){return Object(p.a)(Object(p.a)({},e),{},{open:!1})}))},message:r.component})]})})),zi=n(435),Li=n(446),Mi=n(424),Ni=n(422),Ei=n(194),Di=n(34),Xi=n(423),Yi=Object(kr.a)((function(e){var t=e.palette;return Object(Pr.a)({picker:{"& *":{color:"".concat(t.text.primary," !important"),borderColor:"".concat(t.divider," !important")},"& input":{background:"none",color:"".concat(t.text.primary," !important"),boxShadow:"none !important",border:"1px solid ".concat(t.divider," !important")}}})})),Fi=function(e){var t=e.open,n=e.anchorEl,r=e.color,i=e.onChange,o=e.placement,a=Yi(),l=function(){var e=Object(Di.a)(),t=e.palette;return"light"===t.type?{}:{default:{picker:{background:t.background.titleBar,shadow:e.shadows[24]},alpha:{background:"#fff"},color:{background:"#fff"}}}}();return Object(c.jsx)(Xi.a,{open:!!t,anchorEl:n,placement:o||"bottom",style:{zIndex:999999},children:Object(c.jsx)(Ei.a,{color:r,styles:l,className:a.picker,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.rgb;i&&i("rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat("undefined"===typeof t.a?1:t.a,")"))}))})})},Gi=Object(kr.a)((function(e){var t=e.palette,n=e.bgPixel;return Object(Pr.a)({root:{overflow:"hidden"},swatch:Object(p.a)(Object(p.a)({},n),{},{display:"inline-block",cursor:"pointer"}),color:{width:"46px",height:"24px",border:"5px solid ".concat(t.primary.main),backgroundColor:function(e){return e.color||""}}})})),Wi=function(e){var t=e.color,n=e.onChange,r=Gi(e),i=Object(l.useRef)(null),o=Object(l.useState)(!1),a=Object(Mr.a)(o,2),s=a[0],u=a[1];return Object(c.jsx)(Ni.a,{mouseEvent:"onMouseDown",onClickAway:function(){return u(!1)},children:Object(c.jsxs)("div",{"aria-hidden":!0,className:r.swatch,ref:i,children:[Object(c.jsx)("div",{"aria-hidden":!0,className:r.color,onClick:function(){return u(!s)}}),Object(c.jsx)(Fi,{open:s,anchorEl:i.current,color:t||"#000000",onChange:n})]})})},Ri=function(e){var t=e.color,n=e.onChange;return Object(c.jsx)(Wr,{before:"Color:",childrenWidth:3,children:Object(c.jsx)(Wi,{color:t,onChange:n})})},Hi=n(142),Ji=n.n(Hi),Ui=n(6),Ki=n(196),Vi=Object(kr.a)((function(e){var t=e.bgPixel,n=e.palette;return Object(Pr.a)({root:Object(p.a)(Object(p.a)({},t),{},{width:"12px",height:"12px",border:"solid ".concat(n.primary.main),borderWidth:"0 1px 1px",position:"absolute",cursor:"pointer",marginLeft:"-6px",left:function(e){return e.left||0},zIndex:function(e){return e.isActive?2:1},"&:before,&:after":{position:"absolute",content:'""',width:0,height:0,borderStyle:"solid",left:"0"},"&:before":{top:"-6px",left:"-1px",borderWidth:"0 6px 6px 6px",borderColor:"transparent transparent ".concat(n.primary.dark," transparent")},"&:after":{top:"-5px",borderWidth:"0 5px 5px 5px",borderColor:function(e){var t="dark"===n.type?n.common.white:n.common.black;return"transparent transparent ".concat(e.isActive?t:n.grey[600]," transparent")}}}),color:{width:"100%",height:"100%",pointerEvents:"none",backgroundColor:function(e){return e.color||"transparent"}}})})),qi=function(e){var t=e.left,n=e.top,r=e.color,i=e.isActive,o=e.className,a=Object(Ki.a)(e,["left","top","color","isActive","className"]),l=Vi({left:t,top:n,color:r,isActive:i});return Object(c.jsx)("div",Object(p.a)(Object(p.a)({className:Object(Ui.a)(l.root,o)},a),{},{children:Object(c.jsx)("div",{className:l.color})}))},Qi=Object(kr.a)((function(){return Object(Pr.a)({root:{width:"100%",height:"17px",position:"relative",cursor:"crosshair"}})})),_i=function(e){var t=e.className,n=e.palette,r=e.activeId,i=e.onAdd,o=e.onUpdate,a=e.onSelect,s=Qi(e),u=Object(l.useState)(0),f=Object(Mr.a)(u,2),d=f[0],b=f[1],h=Object(l.useState)({x:0,y:0,offset:0}),g=Object(Mr.a)(h,2),j=g[0],O=g[1],y=Object(l.useState)(!1),m=Object(Mr.a)(y,2),w=m[0],v=m[1],x=Object(l.useRef)(null);Object(l.useEffect)((function(){x.current&&b(x.current.clientWidth)}),[x]);var k=Object(l.useCallback)((function(e){if(w&&r)if(1===e.buttons){var t=n.findIndex((function(e){return e.id===r}));if(!(t<0)){var i=Object(Ce.a)(n);if(Math.abs(e.clientY-j.y)>50)o(i[t],!0);else{var a=i[t],c=Math.min(Math.max((e.clientX-j.x)/d+j.offset,0),1);i[t]=Object(p.a)(Object(p.a)({},a),{},{offset:c}),o({offset:c})}}}else v(!1)}),[r,w,o,n,j.offset,j.x,j.y,d]),P=Object(l.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),v(!1)}),[]);return Object(l.useEffect)((function(){return w?(window.addEventListener("mousemove",k),window.addEventListener("mouseup",P)):(window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",P)),function(){window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",P)}}),[k,P,w]),Object(c.jsx)("div",{"aria-hidden":!0,ref:x,className:Object(Ui.a)(s.root,t),onMouseDown:function(e){var t=x.current;if(t&&1===e.buttons){var n=t.getBoundingClientRect().left,r=(e.clientX-n)/d;i(r),v(!0),O({x:e.clientX,y:e.clientY,offset:r})}},children:n.map((function(e){return Object(c.jsx)(qi,{left:d*e.offset,color:e.color,isActive:e.id===r,onMouseDown:function(t){return function(e,t){1===e.buttons&&(e.preventDefault(),e.stopPropagation(),O({x:e.clientX,y:e.clientY,offset:t.offset}),v(!0),a(t.id))}(t,e)}},e.id)}))})},Zi=Object(kr.a)((function(e){var t=e.bgPixel;return{root:Object(p.a)(Object(p.a)({},t),{},{width:function(e){return e.width||"100%"},height:function(e){return e.height||"100%"},border:"1px solid #ccc"}),svg:{width:"100%",height:"100%",verticalAlign:"top"}}})),eo=function(e){var t=Zi(e),n=e.palette,r=Object(l.useState)("palette_".concat(Math.random().toString().substr(2,9))),i=Object(Mr.a)(r,1)[0],o=Object(Ce.a)(n).sort((function(e,t){return e.offset-t.offset}));return Object(c.jsx)("div",{className:t.root,children:Object(c.jsxs)("svg",{className:t.svg,children:[Object(c.jsx)("defs",{children:Object(c.jsx)("linearGradient",{id:i,x1:"0",y1:"0.5",x2:"1",y2:"0.5",children:o.map((function(e){return Object(c.jsx)("stop",{offset:e.offset,style:{stopColor:e.color}},e.id)}))})}),Object(c.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(i,")")})]})})},to=function(e){var t=e.children,n=e.palette,r=e.onUpdate,i=e.onAdd,o=Object(l.useRef)(null),a=Object(l.useState)(Object(Ce.a)(n)),u=Object(Mr.a)(a,2),f=u[0],d=u[1],b=Object(l.useState)(0),h=Object(Mr.a)(b,2),g=h[0],j=h[1],O=Object(l.useState)(""),y=Object(Mr.a)(O,2),m=y[0],w=y[1],v=Object(l.useState)(!1),x=Object(Mr.a)(v,2),k=x[0],P=x[1];Object(l.useEffect)((function(){if(k){var e=n.map((function(e){return e.id})),t=f.map((function(e){return e.id})),r=Array.from(new Set([].concat(Object(Ce.a)(e),Object(Ce.a)(t)))).filter((function(e){return!t.includes(e)}));r.length>0&&j(r[0]),P((function(){return!1}))}}),[n,k,f]),Object(l.useEffect)((function(){d(Object(Ce.a)(n))}),[n]),Object(l.useEffect)((function(){if(g){var e=n.find((function(e){return e.id===g}));e&&w(e.color)}}),[g,n]);var S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(g){var i=Object(Ce.a)(n),o=i.findIndex((function(e){return e.id===g}));if(t)r([].concat(Object(Ce.a)(i.slice(0,o)),Object(Ce.a)(i.slice(o+1)))),j(0);else{var a=Object(p.a)(Object(p.a)({},i[o]),e);r([].concat(Object(Ce.a)(i.slice(0,o)),[a],Object(Ce.a)(i.slice(o+1))))}}};return Object(c.jsx)(Ni.a,{mouseEvent:"onMouseDown",onClickAway:function(){return j(0)},children:Object(c.jsxs)("div",{ref:o,children:[Object(c.jsx)(eo,{palette:n,height:"35px"}),Object(c.jsx)(_i,{palette:n,activeId:g,onAdd:function(e){var t,r,o=Object(Ce.a)(n),a={offset:e,color:"#000"};if(j(0),o.forEach((function(e){e.offset<a.offset&&(!t||t.offset<e.offset)?t=e:(!r||r.offset>e.offset)&&(r=e)})),t&&r){var c=(a.offset-t.offset)/(r.offset-t.offset),l=Ji()(t.color),s=Ji()(r.color),u=(s.red()-l.red())*c+l.red(),f=(s.green()-l.green())*c+l.green(),p=(s.blue()-l.blue())*c+l.blue(),d=(s.alpha()-l.alpha())*c+l.alpha();a.color="rgba(".concat(Math.round(u),",").concat(Math.round(f),",").concat(Math.round(p),",").concat(Math.round(d),")")}else(t||r)&&(a.color=(t||r).color);i(a),P(!0)},onUpdate:S,onSelect:function(e){return j(e||0)}}),t?s.a.cloneElement(t,{open:!!g||k,anchorEl:o.current,color:m,onChange:function(e){return S({color:e})}}):null]})})},no=Object(kr.a)((function(){return Object(Pr.a)({root:{width:function(e){return e.width?"".concat(e.width,"px"):"36px"},height:function(e){return e.width?"".concat(e.width,"px"):"36px"},position:"relative",cursor:"crosshair",overflow:"hidden",borderRadius:"100%",background:"#FFF"},point:{width:"6px",height:"6px",borderRadius:"100%",position:"relative",left:"50%",top:"50%",marginTop:"-2px",background:"#000",pointerEvents:"none",transformOrigin:"0 50%",transform:function(e){return"rotate(".concat(e.angle||0,"deg) translate(").concat((e.width||36)/2-8,"px, 0)")}}})})),ro=function(e){var t=e.onChange,n=Object(l.useRef)(null),r=Object(l.useState)(!1),i=Object(Mr.a)(r,2),o=i[0],a=i[1],s=no(e),u=Object(l.useCallback)((function(e){if(n.current){var r=e.clientX,i=e.clientY,o=n.current.getBoundingClientRect(),a=Math.atan2(i-(o.y+o.height/2),r-(o.x+o.width/2));t(Math.round(a*(180/Math.PI)))}}),[t]),f=Object(l.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),a(!1)}),[]);return Object(l.useEffect)((function(){return o?(window.addEventListener("mousemove",u),window.addEventListener("mouseup",f)):(window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",f)),function(){window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",f)}}),[u,f,o]),Object(c.jsx)("div",{"aria-hidden":!0,className:s.root,ref:n,onMouseDown:function(e){n.current&&(a(!0),u(e))},children:Object(c.jsx)("div",{className:s.point})})},io=function(e){var t=e.angle,n=e.onChange;return Object(c.jsx)(Wr,{before:"Angle:",after:Object(c.jsx)(ro,{width:24,angle:t,onChange:n}),children:Object(c.jsx)(Fr.a,{value:t,fullWidth:!0,type:"number",onChange:function(e){return n(Number(e.target.value))}})})},oo=Object(h.c)((function(e){var t=e.gradient,n=t.type,r=t.angle,i=t.palette,o=t.addColor,a=t.updatePalette,l=t.setAngle,s=t.setType;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(io,{angle:r,onChange:l})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"Type:",component:"div",childrenWidth:8,children:Object(c.jsxs)(Li.a,{row:!0,name:"type",value:n,onChange:function(e){return s(Number(e.target.value))},style:{flexWrap:"nowrap"},children:[Object(c.jsx)(Mi.a,{value:Pe.LINEAR,control:Object(c.jsx)(zi.a,{size:"small",color:"default"}),label:"Linear"}),Object(c.jsx)(Mi.a,{value:Pe.RADIAL,control:Object(c.jsx)(zi.a,{size:"small",color:"default"}),label:"Radial"})]})})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(to,{palette:i,onAdd:function(e){return o(e.offset,e.color)},onUpdate:a,children:Object(c.jsx)(Fi,{})})})]})})),ao=Object(kr.a)((function(e){return Object(Pr.a)({root:Object(p.a)({width:e.spacing(12),height:e.spacing(12),display:"flex",alignItems:"center",justifyContent:"center",position:"relative",border:"1px solid ".concat(e.palette.primary.main),cursor:"pointer"},e.bgPixel),image:{maxWidth:"100%",maxHeight:"100%",pointerEvents:"none"}})})),co=function(e){var t=e.src,n=e.onChange,r=ao();return Object(c.jsxs)(wr.a,{component:"label",className:r.root,children:[Object(c.jsx)("input",{hidden:!0,type:"file",multiple:!0,accept:"image/*",onChange:function(e){e.target.files&&e.target.files.length>0&&Xr(e.target.files[0]).then((function(e){e instanceof ArrayBuffer&&n(e)}))}}),Object(c.jsx)("img",{className:r.image,src:t,alt:""})]})},lo=function(e){var t=e.patternTexture,n=t.src,r=t.scale,i=t.repetition,o=t.setRepetition,a=t.setScale,l=t.setImage;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{component:"div",before:"Scale:",after:Object(c.jsx)(co,{src:n,onChange:l}),children:Object(c.jsx)(Fr.a,{value:r,fullWidth:!0,type:"number",inputProps:{min:.01,step:.1},onChange:function(e){return a(Number(e.target.value))}})})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"Repeat:",children:Object(c.jsxs)(Ti.a,{value:i,onChange:function(e){return o(e.target.value)},displayEmpty:!0,fullWidth:!0,children:[Object(c.jsx)(Bi.a,{value:"repeat",children:"Repeat"}),Object(c.jsx)(Bi.a,{value:"repeat-x",children:"Repeat-x"}),Object(c.jsx)(Bi.a,{value:"repeat-y",children:"Repeat-y"}),Object(c.jsx)(Bi.a,{value:"no-repeat",children:"No Repeat"})]})})})]})},so=Object(h.c)((function(e){var t=e.config,n=t.type,r=t.color,i=t.gradient,o=t.patternTexture,a=t.setType,l=t.setColor;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsxs)(Li.a,{row:!0,name:"type",value:n,onChange:function(e){return a(Number(e.target.value))},children:[Object(c.jsx)(Mi.a,{value:Ve.SOLID,control:Object(c.jsx)(zi.a,{size:"small",color:"default"}),label:"Solid"}),Object(c.jsx)(Mi.a,{value:Ve.GRADIENT,control:Object(c.jsx)(zi.a,{size:"small",color:"default"}),label:"Gradient"}),Object(c.jsx)(Mi.a,{value:Ve.IMAGE,control:Object(c.jsx)(zi.a,{size:"small",color:"default"}),label:"Image"})]})}),0===n?Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Ri,{color:r,onChange:l})}):null,1===n?Object(c.jsx)(oo,{gradient:i}):null,2===n?Object(c.jsx)(lo,{patternTexture:o,src:o.src,scale:o.scale}):null]})})),uo=Object(h.c)((function(){var e=Ir().fill;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Lr.a,{children:"Fill"})}),Object(c.jsx)(so,{config:e})]})})),fo=n(425),po=n(426),bo=Object(kr.a)((function(){return Object(Pr.a)({disabled:{opacity:.3,pointerEvents:"none"},title:{flex:1}})})),ho=Object(h.c)((function(){var e=bo(),t=Ir(),n=t.stroke,r=t.useStroke,i=t.setUseStroke,o=n.setWidth,a=n.lineJoin,l=n.setLineJoin,s=n.lineCap,u=n.setLineCap;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(wr.a,{component:"label",display:"flex",alignItems:"center",paddingX:2,marginY:4,children:[Object(c.jsx)(Lr.a,{component:"div",className:e.title,children:"Stroke"}),"Off",Object(c.jsx)(fo.a,{size:"small",checked:r,onChange:function(e){return i(e.target.checked)}}),"On"]}),Object(c.jsxs)("div",{className:r?"":e.disabled,children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"Width:",after:"px",children:Object(c.jsx)(Fr.a,{value:(null===n||void 0===n?void 0:n.width)||0,fullWidth:!0,type:"number",inputProps:{min:0},onChange:function(e){return o(Number(e.target.value))}})})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"Line Cap:",component:"div",childrenWidth:8,children:Object(c.jsxs)(po.a,{size:"small",color:"primary",children:[Object(c.jsx)(Nr.a,{onClick:function(){return u("butt")},variant:"butt"===s?"contained":"outlined",children:"Butt"}),Object(c.jsx)(Nr.a,{onClick:function(){return u("round")},variant:"round"===s?"contained":"outlined",children:"Round"}),Object(c.jsx)(Nr.a,{onClick:function(){return u("square")},variant:"square"===s?"contained":"outlined",children:"Square"})]})})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"Line Join:",component:"div",childrenWidth:8,children:Object(c.jsxs)(po.a,{size:"small",color:"primary",children:[Object(c.jsx)(Nr.a,{onClick:function(){return l("miter")},variant:"miter"===a?"contained":"outlined",children:"Miter"}),Object(c.jsx)(Nr.a,{onClick:function(){return l("round")},variant:"round"===a?"contained":"outlined",children:"Round"}),Object(c.jsx)(Nr.a,{onClick:function(){return l("bevel")},variant:"bevel"===a?"contained":"outlined",children:"Bevel"})]})})}),Object(c.jsx)(so,{config:n})]})]})})),go=Object(kr.a)((function(){return Object(Pr.a)({disabled:{opacity:.3,pointerEvents:"none"},title:{flex:1}})})),jo=Object(h.c)((function(){var e=Ir(),t=e.shadow,n=e.useShadow,r=e.setUseShadow,i=t.setOffsetX,o=t.setOffsetY,a=t.setBlur,l=t.setColor,s=go();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(wr.a,{component:"label",display:"flex",alignItems:"center",paddingX:2,marginY:4,children:[Object(c.jsx)(Lr.a,{component:"div",className:s.title,children:"Shadow"}),"Off",Object(c.jsx)(fo.a,{size:"small",checked:n,onChange:function(e){return r(e.target.checked)}}),"On"]}),Object(c.jsxs)("div",{className:n?"":s.disabled,children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"Offset X:",after:"px",children:Object(c.jsx)(Fr.a,{value:(null===t||void 0===t?void 0:t.offsetX)||0,fullWidth:!0,type:"number",disabled:!n,onChange:function(e){return i(Number(e.target.value))}})})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"Offset Y:",after:"px",children:Object(c.jsx)(Fr.a,{value:(null===t||void 0===t?void 0:t.offsetY)||0,fullWidth:!0,type:"number",disabled:!n,onChange:function(e){return o(Number(e.target.value))}})})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"Blur:",after:"px",children:Object(c.jsx)(Fr.a,{value:(null===t||void 0===t?void 0:t.blur)||0,fullWidth:!0,type:"number",disabled:!n,inputProps:{style:{textAlign:"right"},min:0},onChange:function(e){return a(Number(e.target.value))}})})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Ri,{color:(null===t||void 0===t?void 0:t.color)||"",onChange:l})})]})]})})),Oo=Object(h.c)((function(){var e=Ir(),t=e.bgColor,n=e.setBgColor;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{component:"label",display:"flex",alignItems:"center",paddingX:2,marginY:4,children:Object(c.jsx)(Lr.a,{children:"Background Color"})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Ri,{color:t||"",onChange:n})})]})})),yo=Object(kr.a)((function(){return Object(Pr.a)({root:{overflow:"hidden",width:"256px"}})})),mo=function(){var e=yo();return Object(c.jsxs)(wr.a,{bgcolor:"background.sidebar",display:"flex",flexDirection:"column",overflow:"hidden",className:e.root,children:[Object(c.jsx)(wr.a,{bgcolor:"background.sidebar",boxShadow:2,padding:2,children:Object(c.jsx)(Lr.a,{variant:"subtitle2",children:"Style Config"})}),Object(c.jsxs)(wr.a,{flex:1,height:0,overflow:"hidden auto",children:[Object(c.jsx)(uo,{}),Object(c.jsx)(zr.a,{}),Object(c.jsx)(ho,{}),Object(c.jsx)(zr.a,{}),Object(c.jsx)(jo,{}),Object(c.jsx)(zr.a,{}),Object(c.jsx)(Oo,{})]})]})};var wo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Object(l.useCallback)(t,[t,n]),i=Object(l.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var t=e.ctrlKey,n=e.altKey,i=e.deltaX,o=e.deltaY;if(t){var a=-.01;Math.abs(o)>50&&(a*=.1),r({deltaScale:o*a,deltaX:0,deltaY:0})}else{var c=-i,l=-o;0===i&&n&&Math.abs(o)>50&&(c=-o,l=0),r({deltaX:c,deltaY:l,deltaScale:0})}}),[r]);Object(l.useEffect)((function(){if(e.current){var t=e.current;return t.addEventListener("wheel",i,{passive:!1}),function(){return t.removeEventListener("wheel",i)}}}),[e,i])},vo={x:0,y:0};var xo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(l.useState)({ks:!1,ms:!1}),r=Object(Mr.a)(n,2),i=r[0],o=r[1],a=Object(l.useMemo)((function(){return i.ks&&i.ms?2:i.ks?1:0}),[i.ks,i.ms]),c=Object(l.useCallback)(e,[e].concat(Object(Ce.a)(t))),s=Object(l.useCallback)((function(e){var t=32===e.keyCode&&"keydown"===e.type;i.ks!==t&&o((function(t){return Object(p.a)(Object(p.a)({},t),{},{ks:32===e.keyCode&&"keydown"===e.type})}))}),[i.ks]),u=function(e){if(i.ks){var t=e.clientX,n=e.clientY;vo.x=t,vo.y=n,o((function(e){return Object(p.a)(Object(p.a)({},e),{},{ms:!0})}))}},f=Object(l.useCallback)((function(e){var t=e.clientX,n=e.clientY,r=vo.x,i=vo.y;t-r===0&&n-i===0||(c({offsetX:t-r,offsetY:n-i}),vo.x=t,vo.y=n)}),[c]),d=Object(l.useCallback)((function(){o((function(e){return Object(p.a)(Object(p.a)({},e),{},{ms:!1})}))}),[]);return Object(l.useEffect)((function(){return window.addEventListener("keydown",s),window.addEventListener("keyup",s),function(){window.removeEventListener("keydown",s),window.removeEventListener("keyup",s)}}),[s]),Object(l.useEffect)((function(){return i.ks&&i.ms?(window.addEventListener("mousemove",f),window.addEventListener("mouseup",d)):(window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",d)),function(){window.removeEventListener("mousemove",f),window.removeEventListener("mouseup",d)}}),[d,f,i.ks,i.ms]),[a,u]},ko=Object(kr.a)((function(e){var t=e.bgPixel;return Object(Pr.a)({root:{position:"absolute",width:"100%",height:"100%",overflow:"hidden",cursor:function(e){return 2===e.dragState?"grabbing":1===e.dragState?"grab":"default"}},canvas:Object(p.a)(Object(p.a)({},t),{},{transformOrigin:"50% 50%",position:"absolute",left:"50%",top:"50%",width:function(e){return"".concat(e.width,"px")},height:function(e){return"".concat(e.height,"px")},marginLeft:function(e){return"".concat(e.width/-2,"px")},marginTop:function(e){return"".concat(e.height/-2,"px")},transform:function(e){return"scale(".concat(e.scale,") translate(").concat(e.offsetX,"px,").concat(e.offsetY,"px)")},imageRendering:"pixelated"})})})),Po=Object(h.c)((function(){var e=Br(),t=e.isPacking,n=e.ui,r=e.layout.padding,i=e.glyphList,o=e.style.bgColor,a=e.packCanvas,s=e.setCanvas,u=n.width,f=n.height,p=n.scale,d=n.offsetX,b=n.offsetY,h=Object(l.useRef)(null),g=Object(l.useRef)(null),j=xo((function(e){var t=e.offsetX,r=e.offsetY,i=n.scale,o=n.offsetX,a=n.offsetY;(0,n.setTransform)({offsetX:o+t/i,offsetY:a+r/i})}),[n]),O=Object(Mr.a)(j,2),y=O[0],m=O[1],w=ko({width:u,height:f,scale:p,offsetX:d,offsetY:b,dragState:y});return wo(g,(function(e){var t=n.offsetX,r=n.offsetY,i=n.scale,o=n.setTransform,a=i+e.deltaScale;o({offsetX:t+e.deltaX/a,offsetY:r+e.deltaY/a,scale:a})}),[n]),Object(l.useEffect)((function(){h.current&&h.current!==a&&s(h.current)}),[h,a,s]),Object(l.useEffect)((function(){if(i&&!t&&u&&f){var e=h.current;if(e){e.width=u,e.height=f;var n=e.getContext("2d");n&&(o&&(n.fillStyle=o,n.fillRect(0,0,e.width,e.height)),i.forEach((function(e){e.source&&0!==e.source.width&&0!==e.source.height&&n.drawImage(e.source,e.x+(r||0),e.y+(r||0))})))}}}),[o,i,t,f,u,r]),Object(c.jsx)("div",{"aria-hidden":!0,ref:g,className:w.root,onMouseDown:m,children:Object(c.jsx)("canvas",{ref:h,className:w.canvas})})}));var So=n(54),Co=Object(kr.a)((function(){return Object(Pr.a)({letter:{position:"absolute","&:hover,&$select":{background:"rgba(0,0,0,0.2)",outline:"1px solid #000"}},select:{"& + $next":{background:"rgba(0,0,0,0.1)",outline:"1px dashed #666"}},next:{}})})),To=Object(h.c)((function(e){var t=e.data,n=t.xOffset,r=t.yOffset,i=t.list,o=Co(),a=Ar();return Object(c.jsx)(c.Fragment,{children:i.map((function(e,t){var i,l="".concat(e.letter).concat(t);return Object(c.jsx)("div",{"aria-hidden":!0,className:Object(Ui.a)(o.letter,(i={},Object(So.a)(i,o.select,e.letter===a.selectLetter),Object(So.a)(i,o.next,e.letter===a.selectNextLetter),i)),style:{width:e.width,height:e.height,left:"".concat(e.x-n,"px"),top:"".concat(e.y-r,"px")},onClick:function(t){return function(e,t,n){e.stopPropagation(),a.setSelectLetter(t,n)}(t,e.letter,e.next)}},l)}))})})),Bo=Object(kr.a)((function(e){var t=e.bgPixel;return Object(Pr.a)({root:Object(p.a)(Object(p.a)({position:"relative",flex:1,width:"100%",height:"100%",overflow:"hidden"},t),{},{cursor:function(e){return 2===e.dragState?"grabbing":1===e.dragState?"grab":"default"}}),wrap:{transformOrigin:"50% 50%",position:"absolute",left:"50%",top:"50%",width:function(e){return"".concat(e.width,"px")},height:function(e){return"".concat(e.height,"px")},marginLeft:function(e){return"".concat(e.width/-2,"px")},marginTop:function(e){return"".concat(e.height/-2,"px")},transform:function(e){return"scale(".concat(e.scale,") translate(").concat(e.offsetX,"px,").concat(e.offsetY,"px)")}},canvas:{width:"100%",height:"100%",imageRendering:"pixelated"}})})),Io=Object(h.c)((function(){var e=Br(),t=Object(l.useState)(null),n=Object(Mr.a)(t,2),r=n[0],i=n[1],o=e.ui,a=e.style.font,s=a.size,u=a.lineHeight,f=a.middle,p=a.hanging,d=a.top,b=a.alphabetic,h=a.ideographic,g=a.bottom,j=a.minBaseLine,O=a.maxBaseLine,y=e.isPacking,m=o.previewScale,w=o.previewOffsetX,v=o.previewOffsetY,x=Object(l.useRef)(null),k=Object(l.useRef)(null),P=xo((function(e){var t=e.offsetX,n=e.offsetY,r=o.previewScale,i=o.previewOffsetX,a=o.previewOffsetY;(0,o.setPreviewTransform)({previewOffsetX:i+t/r,previewOffsetY:a+n/r})}),[o]),S=Object(Mr.a)(P,2),C=S[0],T=S[1],B=Bo({width:r?r.width:0,height:r?r.height:0,scale:m,offsetX:w,offsetY:v,dragState:C});return wo(k,(function(e){var t=o.previewOffsetX,n=o.previewOffsetY,r=o.previewScale,i=o.setPreviewTransform,a=r+e.deltaScale;i({previewOffsetX:t+e.deltaX/a,previewOffsetY:n+e.deltaY/a,previewScale:a})}),[o]),Object(l.useEffect)((function(){if(x.current&&!y&&r){var e=x.current,t=e.getContext("2d");if(t){var n=s*u;e.width=r.width,e.height=r.height,r.list.forEach((function(e){e.source&&0!==e.source.width&&0!==e.source.height&&t.drawImage(e.source,e.x-r.xOffset,e.y-r.yOffset)}));for(var i=function(e){[f,p,d,b,h,g].forEach((function(i){var o=Math.round(i-j+e*n);t.beginPath(),t.moveTo(-r.xOffset,o+.5-r.yOffset),t.lineTo(r.width,o+.5-r.yOffset),i===j||i===O?(t.strokeStyle="rgba(0,0,0,1)",t.setLineDash([])):(t.strokeStyle="rgba(0,0,0,0.5)",t.setLineDash([10,3,2,3])),t.stroke()})),t.beginPath(),t.moveTo(.5-r.xOffset,e*n-r.yOffset),t.lineTo(.5-r.xOffset,e*n-r.yOffset+O-j),t.strokeStyle="rgba(0,0,0,1)",t.setLineDash([]),t.stroke()},o=0;o<r.lines;o+=1)i(o)}}}),[b,g,r,p,h,y,u,O,f,j,s,d]),Object(l.useEffect)((function(){if(x.current&&!y&&x.current.getContext("2d")){var t=gi(e),n=t.chars,r=t.kernings,a=new Map;r.list.forEach((function(e){var t=e.first,n=e.second,r=e.amount;a.has(t)||a.set(t,new Map);var i=a.get(t);null===i||void 0===i||i.set(n,r)}));var c=new Map;n.list.forEach((function(e){c.set(e.letter,e)}));var l=s*u,f=function(e,t,n,r,i){var o=[],a=e.split(/\r\n|\r|\n/),c=0,l=0,s=0,u=0,f=0,p=0;return a.forEach((function(e,a){f=r*a,p=0;var d=Array.from(e);d.forEach((function(e,r){var a=t.get(e);if(a){var b=d[r+1],h=n.get(e.charCodeAt(0)),g=0;b&&h&&h.has(b.charCodeAt(0))&&(g=h.get(b.charCodeAt(0))||0);var j={x:p+a.xoffset,y:f+a.yoffset,width:a.width||a.xadvance,height:a.height||i,source:a.source,letter:a.letter,next:b};p+=a.xadvance+g,c=Math.min(j.x,c),l=Math.min(j.y,l),s=Math.max(j.x+j.width,s),u=Math.max(j.y+a.height,u),o.push(j)}}))})),{lines:a.length,list:o,xOffset:c,yOffset:l,width:s-c,height:Math.max(u-l,a.length*r-l)}}(o.previewText,c,a,l,O-j);i((function(){return f}))}}),[y,u,O,j,e,s,o.previewText]),Object(c.jsx)("div",{"aria-hidden":!0,ref:k,className:B.root,onMouseDown:T,onClick:function(){return o.setSelectLetter("","")},children:Object(c.jsxs)("div",{className:B.wrap,children:[Object(c.jsx)("canvas",{ref:x,className:B.canvas}),r?Object(c.jsx)(To,{data:r}):null]})})})),$o=Object(h.c)((function(){var e=Ar(),t=e.previewText,n=e.setPreviewText,r=Object(l.useState)(!1),i=Object(Mr.a)(r,2),o=i[0],a=i[1],s=Object(l.useState)(t),u=Object(Mr.a)(s,2),f=u[0],p=u[1];return Object(c.jsxs)(wr.a,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Lr.a,{children:"Glyphs"})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Ur.a,{margin:"none",value:o?f:t,fullWidth:!0,multiline:!0,rows:7,variant:"outlined",inputProps:{spellCheck:!1},onChange:function(e){var r=e.target.value;o?p(r):(p(r),r!==t&&n(r))},onCompositionStart:function(){return a(!0)},onCompositionEnd:function(){a(!1),p(f),f!==t&&n(f)}})})]})})),Ao=Object(h.c)((function(){var e=Br(),t=e.glyphList,n=e.ui,r=t.find((function(e){return e.letter===n.selectLetter}));if(!r)return null;var i=r.adjustMetric,o=r.letter,a=i.xAdvance,l=i.xOffset,s=i.yOffset,u=i.setXAdvance,f=i.setXOffset,p=i.setYOffset;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Lr.a,{children:'"'.concat(o,'" Adjustment')})}),Object(c.jsx)(_r,{xAdvance:a,xOffset:l,yOffset:s,setXAdvance:u,setXOffset:f,setYOffset:p})]})})),zo=Object(h.c)((function(){var e=Br(),t=e.glyphList,n=e.ui,r=e.style.font,i=r.opentype,o=r.size,a=Object(l.useState)(0),s=Object(Mr.a)(a,2),u=s[0],f=s[1],p=Object(l.useState)(),d=Object(Mr.a)(p,2),b=d[0],h=d[1],g=Object(l.useState)(0),j=Object(Mr.a)(g,2),O=j[0],y=j[1];Object(l.useEffect)((function(){h(t.find((function(e){return e.letter===n.selectLetter})))}),[t,n.selectLetter]),Object(l.useEffect)((function(){if(b&&n.selectNextLetter&&i){var e=1/i.unitsPerEm*o;f(Math.round(i.getKerningValue(i.charToGlyphIndex(b.letter),i.charToGlyphIndex(n.selectNextLetter))*e))}}),[b,i,o,n.selectNextLetter]);return Object(l.useEffect)((function(){var e;return b&&(y(b.kerning.get(n.selectNextLetter)||0),e=Object(v.a)(b.kerning,(function(){y(b.kerning.get(n.selectNextLetter)||0)}))),e}),[b,n.selectNextLetter]),b&&n.selectNextLetter?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Lr.a,{children:'"'.concat(b.letter,'" - "').concat(n.selectNextLetter,'" Kerning')})}),Object(c.jsx)(wr.a,{paddingX:2,marginY:4,children:Object(c.jsx)(Wr,{before:"Amount:",after:"px",children:Object(c.jsx)(Fr.a,{value:O+u,fullWidth:!0,type:"number",onChange:function(e){b&&b.steKerning(n.selectNextLetter,Number(e.target.value)-u)}})})})]}):null})),Lo=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Io,{}),Object(c.jsxs)(Gr.a,{container:!0,alignItems:"flex-start",children:[Object(c.jsx)(Gr.a,{item:!0,xs:4,children:Object(c.jsx)($o,{})}),Object(c.jsx)(Gr.a,{item:!0,xs:4,children:Object(c.jsx)(Ao,{})}),Object(c.jsx)(Gr.a,{item:!0,xs:4,children:Object(c.jsx)(zo,{})})]})]})},Mo=Object(kr.a)((function(e){var t=e.palette;return Object(Pr.a)({root:{backgroundColor:t.background.default,position:"relative",display:"flex",flex:1,flexDirection:"column"}})})),No=Object(h.c)((function(){var e=Ar().showPreview,t=Mo();return Object(c.jsx)("div",{className:t.root,children:e?Object(c.jsx)(Lo,{}):Object(c.jsx)(Po,{})})})),Eo=n(432),Do=n(112),Xo=n.n(Do),Yo=Object(kr.a)((function(e){var t=e.palette;return Object(Pr.a)({root:{minHeight:"auto",minWidth:"80px",maxWidth:"none",height:"34px",lineHeight:"16px",padding:"10px",color:"rgba(255,255,255,0.5)",backgroundColor:"rgb(45, 45, 45)",borderRight:"1px solid ".concat(t.background.default),textTransform:"none",display:"inline-flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer","&:hover":{"& $icon":{opacity:1}},"&:last-child":{borderRight:"0 none"}},selected:{background:t.background.default,color:"#fff","& $icon":{opacity:1}},name:{whiteSpace:"nowrap",position:"relative",background:"inherit"},editor:{color:"rgba(0,0,0,0)"},input:{position:"absolute",width:"100%",height:"100%",left:0,fontSize:"inherit",padding:0,border:"0 none",appearance:"none",color:"inherit",background:"inherit"},icon:{width:"16px",height:"16px",marginLeft:"10px",opacity:0}})})),Fo=function(e){var t=e.name,n=e.useRemove,r=e.selected,i=e.value,o=e.onChange,a=e.onClick,s=e.onRemove,u=e.onRename,f=Object(l.useState)(!1),p=Object(Mr.a)(f,2),d=p[0],b=p[1],h=Object(l.useState)(t),g=Object(Mr.a)(h,2),j=g[0],O=g[1],y=Object(l.useRef)(null),m=Yo(),w=function(e){e.stopPropagation(),s&&s(e,i)};return Object(l.useEffect)((function(){d&&y.current&&y.current.focus(),!d&&u&&u(j,i)}),[d,u,j,i]),Object(l.useEffect)((function(){O(t)}),[t]),Object(c.jsxs)("div",{"aria-hidden":!0,className:Object(Ui.a)(m.root,Object(So.a)({},m.selected,r)),onClick:function(e){e.stopPropagation(),o&&o(e,i),a&&a(e)},onDoubleClick:function(e){e.stopPropagation(),y.current&&b(!0)},title:"Double click rename",children:[Object(c.jsxs)("span",{"aria-hidden":!0,className:m.name,children:[d?j:t,Object(c.jsx)("input",{className:m.input,hidden:!d,ref:y,value:d?j:t,type:"text",onKeyDown:function(e){13===e.keyCode&&y.current&&y.current.blur()},onBlur:function(e){e.preventDefault&&e.preventDefault(),b(!1)},onChange:function(e){O(e.target.value)}})]}),n?Object(c.jsx)(Xo.a,{className:m.icon,onClick:w,onDoubleClick:w}):null]})},Go=Object(kr.a)((function(e){var t=e.palette,n=e.shadows;return Object(Pr.a)({root:{minHeight:"auto",width:"100%",boxShadow:n[2],background:t.background.sidebar,position:"relative",zIndex:1}})})),Wo=Object(h.c)((function(){var e=Go(),t=Cr(),n=t.addProject,r=t.selectProject,i=t.removeProject,o=t.setProjectName,a=t.namedList,l=t.activeId,s=function(e,t){"undefined"!==typeof t&&i(t)};return Object(c.jsx)(Eo.a,{classes:e,value:l,onChange:function(e,t){r(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"off",selectionFollowsFocus:!0,TabIndicatorProps:{hidden:!0},onDoubleClick:function(){n()},children:a.map((function(e){return Object(c.jsx)(Fo,{useRemove:a.length>1,name:e.name,value:e.id,onRename:o,onRemove:s},e.id)}))})})),Ro=n(371),Ho=n(444),Jo=n(443),Uo=Object(kr.a)((function(){return Object(Pr.a)({slider:{width:"200px"}})})),Ko=Object(h.c)((function(){var e=Ar(),t=e.scale,n=e.setTransform,r=e.previewScale,i=e.setPreviewTransform,o=e.showPreview,a=e.setShowPreview,s=Uo(),u=Object(l.useState)(!1),f=Object(Mr.a)(u,2),p=f[0],d=f[1],b=Object(l.useRef)(null),h=Object(l.useState)([.25,.5,.75,1,1.25,1.5,5,10]),g=Object(Mr.a)(h,1)[0],j=function(e,t){o?i({previewScale:t}):n({scale:t})};return Object(c.jsxs)(wr.a,{paddingX:2,display:"flex",justifyContent:"space-between",children:[Object(c.jsxs)(wr.a,{component:"label",display:"flex",alignItems:"center",children:["Preview",Object(c.jsx)(fo.a,{size:"small",color:"primary",checked:o,onChange:function(e){return a(e.target.checked)}})]}),Object(c.jsx)(Ho.a,{className:s.slider,value:o?r:t,min:.01,max:10,step:.01,onChange:j}),Object(c.jsx)(Nr.a,{ref:b,onClick:function(){d((function(e){return!e}))},children:"".concat(Math.round(1e3*(o?r:t))/10,"%")}),Object(c.jsx)(Xi.a,{open:p,anchorEl:b.current,placement:"top-end",children:Object(c.jsx)(Ro.a,{children:Object(c.jsx)(Ni.a,{onClickAway:function(e){b.current&&b.current.contains(e.target)||d(!1)},children:Object(c.jsx)(Jo.a,{children:g.map((function(e){return Object(c.jsx)(Bi.a,{onClick:function(){return j(0,e),void d(!1)},children:"".concat(100*e,"%")},e)}))})})})})]})})),Vo=n(437),qo=n(427),Qo=n(428),_o=n(190),Zo=n.n(_o),ea=n(193),ta=n.n(ea),na=n(192),ra=n.n(na),ia=n(191),oa=n.n(ia),aa=n(436),ca=n(202),la=n(189),sa=n.n(la),ua=Object(kr.a)((function(e){return Object(Pr.a)({root:{width:e.spacing(24),height:e.spacing(24),margin:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},image:{maxWidth:"100%",maxHeight:"100%",pointerEvents:"none"},actions:{width:"100%",height:"100%",position:"absolute",left:0,top:0},inputLabel:{width:"100%",height:"100%","& input":{textAlign:"center"}}})})),fa=Object(h.c)((function(e){var t=ua(),n=Br().removeImage,r=Object(l.useState)(!1),i=Object(Mr.a)(r,2),o=i[0],a=i[1],s=e.glyph,u=Object(l.useState)(s.letter),f=Object(Mr.a)(u,2),p=f[0],d=f[1],b=s.changeSelect,h=s.selected,g=s.setGlyph;return Object(c.jsxs)(Ro.a,{variant:"outlined",className:t.root,children:[Object(c.jsx)("img",{className:t.image,src:s.src,alt:s.fileName}),Object(c.jsxs)(Gr.a,{container:!0,direction:"column",className:t.actions,children:[Object(c.jsxs)(Gr.a,{item:!0,container:!0,justify:"space-between",alignItems:"center",children:[Object(c.jsx)(aa.a,{checked:h,size:"small",color:"default",onChange:function(e){return b(e.target.checked)}}),Object(c.jsx)(ri.a,{color:"primary",size:"small",onClick:function(){return n(s)},children:Object(c.jsx)(sa.a,{fontSize:"small"})})]}),Object(c.jsx)(Gr.a,{item:!0,xs:!0,component:"label",className:t.inputLabel,container:!0,alignItems:"flex-end",children:Object(c.jsx)(ca.a,{fullWidth:!0,value:o?p:s.letter,onFocus:function(e){return e.target.select()},onInput:function(e){var t=e.target.value;o?(d(t.slice(0,1)),g(t.slice(0,1))):g(t)},onCompositionEnd:function(){a(!1),d((function(e){return e.slice(0,1)})),g(p.slice(0,1))},onCompositionStart:function(){return a(!0)}})})]})]})})),pa=Object(kr.a)((function(){return Object(Pr.a)({root:{width:"100%",display:"flex",flexWrap:"wrap"}})})),da=Object(h.c)((function(){var e=Br().glyphImages,t=pa();return Object(c.jsx)(wr.a,{className:t.root,children:e.map((function(e){return Object(c.jsx)(fa,{glyph:e},e.src)}))})})),ba=Object(kr.a)((function(){return Object(Pr.a)({root:{display:"flex",position:"relative"},fixed:{position:"fixed",left:0,top:0,zIndex:999999,width:"100%",height:"100%","& $panel":{maxHeight:"none"}},panel:{width:"100%",display:"flex",flexDirection:"column",maxHeight:"305px"},continer:{flex:1,overflow:"hidden",overflowY:"auto"},listWrap:{minHeight:"224px",height:"100%",width:"100%",overflow:"hidden",overflowY:"auto"}})})),ha=Object(h.c)((function(){var e=ba(),t=Br().addImages,n=Object(l.useState)(!1),r=Object(Mr.a)(n,2),i=r[0],o=r[1],a=Object(l.useState)(!1),s=Object(Mr.a)(a,2),u=s[0],f=s[1],p=function(e){var n=Array.from(e).filter((function(e){return/^image\//.test(e.type)}));n.length&&Promise.all(n.map((function(e){return Xr(e).then((function(t){if(!t||"string"===typeof t)return null;var n=e.name.match(/(\S)\.[a-zA-Z0-9]+$/i);return{letter:n?n[1]:"",fileName:e.name,fileType:e.type,buffer:t}}))}))).then((function(e){t(e.filter((function(e){return e})))}))},d=function(e){var t=e.target;27===e.keyCode&&(t&&"INPUT"===t.tagName?t&&t.blur():o(!1))};return Object(l.useEffect)((function(){return i?window.addEventListener("keydown",d):window.removeEventListener("keydown",d),function(){return window.removeEventListener("keydown",d)}}),[i]),Object(c.jsx)(wr.a,{onDragEnter:function(e){return e.preventDefault()},onDragOver:function(e){return e.preventDefault()},onDrop:function(e){e.preventDefault(),p(e.dataTransfer.files)},className:Object(Ui.a)(e.root,Object(So.a)({},e.fixed,i)),children:Object(c.jsxs)(Vo.a,{className:e.panel,expanded:i||u,onChange:function(){f((function(e){return i||!e}))},TransitionProps:{style:i||u?{flex:1,overflow:"hidden",overflowY:"auto"}:{}},children:[Object(c.jsx)(qo.a,{expandIcon:i?void 0:Object(c.jsx)(Zo.a,{}),children:Object(c.jsxs)(Gr.a,{container:!0,alignItems:"center",children:[Object(c.jsx)(Gr.a,{item:!0,children:Object(c.jsx)(Lr.a,{children:"Image Glyph List"})}),Object(c.jsx)(Gr.a,{item:!0,xs:!0,container:!0,justify:"center",children:Object(c.jsxs)(Nr.a,{component:"label",color:"primary",size:"small",variant:"contained",startIcon:Object(c.jsx)(oa.a,{}),children:["Select Images",Object(c.jsx)("input",{hidden:!0,type:"file",multiple:!0,accept:"image/*",onChange:function(e){if(e.target.files){var t=e.target.files;p(t)}}})]})}),Object(c.jsx)(Gr.a,{item:!0,children:Object(c.jsx)(ri.a,{component:"div",onClick:function(e){e&&e.stopPropagation(),o((function(e){return!e}))},children:i?Object(c.jsx)(ra.a,{}):Object(c.jsx)(ta.a,{})})})]})}),Object(c.jsx)(Qo.a,{className:e.continer,children:Object(c.jsx)(wr.a,{className:e.listWrap,children:Object(c.jsx)(da,{})})})]})})})),ga=Object(kr.a)((function(e){var t=e.palette,n=e.shadows;return Object(Pr.a)({root:{position:"relative",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",width:0},tabsRoot:{minHeight:"auto",width:"100%",boxShadow:n[2],background:t.background.sidebar,position:"relative",zIndex:1},tabRoot:{minHeight:"auto",minWidth:"auto",maxWidth:"none",height:"34px",color:"rgba(255,255,255,0.5)",borderRight:"1px solid ".concat(t.background.default),textTransform:"none"},tabSelected:{background:t.background.default},tabWrapper:{color:"#FFF"}})})),ja=function(){var e=ga();return Object(c.jsxs)(wr.a,{className:e.root,children:[Object(c.jsx)(Wo,{}),Object(c.jsx)(No,{}),Object(c.jsx)(Ko,{}),Object(c.jsx)(ha,{})]})},Oa=Object(kr.a)((function(e){return Object(Pr.a)({close:{padding:e.spacing(.5)}})}));function ya(){var e=Oa(),t=s.a.useState(!1),n=Object(Mr.a)(t,2),r=n[0],i=n[1],o=s.a.useState(null),a=Object(Mr.a)(o,2),l=a[0],u=a[1],f=function(e,t){"clickaway"!==t&&i(!1)},p=s.a.useCallback((function(e){u(e||null),i(!!e)}),[]);return s.a.useEffect((function(){return window.addEventListener("updateVerion",p,!1),function(){return window.removeEventListener("updateVerion",p,!1)}}),[p]),Object(c.jsx)(li.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:r,onClose:f,message:"New version is available.",action:Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsx)(Nr.a,{color:"secondary",size:"small",onClick:function(){if(l){var e=new MessageChannel;e.port1.onmessage=function(e){window.location.reload()},l.postMessage({type:"SKIP_WAITING"},[e.port2])}},children:"Reload"}),Object(c.jsx)(ri.a,{"aria-label":"close",color:"inherit",className:e.close,onClick:f,children:Object(c.jsx)(Xo.a,{})})]})})}var ma=Object(kr.a)((function(e){var t=e.zIndex;return Object(Pr.a)({root:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},content:{display:"flex",flex:1,position:"relative",height:"0",overflow:"hidden"},loadingBackdrop:{zIndex:t.drawer+1,color:"#fff"}})})),wa=Object(h.c)((function(){var e=ma(),t=Sr().ui;return Object(c.jsxs)(wr.a,{className:e.root,children:[Object(c.jsx)(Ai,{}),Object(c.jsx)(ya,{}),Object(c.jsxs)(wr.a,{className:e.content,children:[Object(c.jsx)(ti,{}),Object(c.jsx)(ja,{}),Object(c.jsx)(mo,{})]}),Object(c.jsx)(vr.a,{className:e.loadingBackdrop,open:!!t.globalLoader,children:Object(c.jsx)(xr.a,{color:"inherit"})})]})}));var va=function(){return Object(c.jsxs)(d.a,{theme:mr,children:[Object(c.jsx)(b.a,{}),Object(c.jsx)(h.b,Object(p.a)(Object(p.a)({},{ui:new w,workspace:new br}),{},{children:Object(c.jsx)(wa,{})}))]})},xa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ka(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}f.a.render(Object(c.jsx)(va,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");xa?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ka(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ka(t,e)}))}}({onUpdate:function(e){e.waiting}})}},[[367,1,2]]]);
//# sourceMappingURL=main.250572bb.chunk.js.map