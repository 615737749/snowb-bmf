(this["webpackJsonpsnowb-bitmapfont"]=this["webpackJsonpsnowb-bitmapfont"]||[]).push([[0],{122:function(e,t){},189:function(e,t,n){e.exports=function(){return new Worker(n.p+"static/js/RectanglePacker.654b1e16b59dc2cc713a.worker.js")}},230:function(e,t,n){e.exports=n(433)},235:function(e,t,n){},433:function(e,t,n){"use strict";n.r(t);var r,a,o,i,l,c,s,u,f,p,d,b,h,g,y,m,O,v,w,j,x,k,E,P,S=n(0),C=n.n(S),T=n(21),A=n.n(T),I=(n(235),n(496)),$=n(497),z=n(10),L=(n(236),n(2)),M=n(7),N=n(13),D=n(18),B=n(3),X=(n(32),r=L.action.bound,a=L.action.bound,o=function(){function e(){Object(N.a)(this,e),Object(M.a)(this,"globalLoader",i,this)}return Object(D.a)(e,[{key:"showGlobalLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.globalLoader+=e}},{key:"hideGlobalLoader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.globalLoader+=e}}]),e}(),i=Object(B.a)(o.prototype,"globalLoader",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(B.a)(o.prototype,"showGlobalLoader",[r],Object.getOwnPropertyDescriptor(o.prototype,"showGlobalLoader"),o.prototype),Object(B.a)(o.prototype,"hideGlobalLoader",[a],Object.getOwnPropertyDescriptor(o.prototype,"hideGlobalLoader"),o.prototype),o),Y=n(69),F=n(141),G=n(189),W=n.n(G),R=function(e){return"number"===typeof e&&!Number.isNaN(e)},H=function(e,t){return R(e)?e:t},J=(l=L.action.bound,c=L.action.bound,s=L.action.bound,u=L.action.bound,f=L.action.bound,p=L.action.bound,d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.a)(this,e),Object(M.a)(this,"scale",b,this),Object(M.a)(this,"offsetX",h,this),Object(M.a)(this,"offsetY",g,this),Object(M.a)(this,"width",y,this),Object(M.a)(this,"height",m,this),Object(M.a)(this,"previewText",O,this),Object(M.a)(this,"selectLetter",v,this),Object(M.a)(this,"selectNextLetter",w,this),Object(M.a)(this,"showPreview",j,this),Object(M.a)(this,"previewScale",x,this),Object(M.a)(this,"previewOffsetX",k,this),Object(M.a)(this,"previewOffsetY",E,this),t.previewText&&(this.previewText=t.previewText)}return Object(D.a)(e,[{key:"reOffset",value:function(){this.offsetX=Math.min(Math.max(this.width/-2,this.offsetX),this.width/2),this.offsetY=Math.min(Math.max(this.height/-2,this.offsetY),this.height/2),this.scale=Math.max(this.scale,.01)}},{key:"setTransform",value:function(e){this.scale=H(e.scale,this.scale),this.offsetX=H(e.offsetX,this.offsetX),this.offsetY=H(e.offsetY,this.offsetY),this.reOffset()}},{key:"setSize",value:function(e,t){this.width=e,this.height=t,this.reOffset()}},{key:"setPreviewText",value:function(e){this.previewText=e}},{key:"setShowPreview",value:function(e){this.showPreview=e}},{key:"setPreviewTransform",value:function(e){this.previewScale=Math.max(H(e.previewScale,this.previewScale),.01),this.previewOffsetX=H(e.previewOffsetX,this.previewOffsetX),this.previewOffsetY=H(e.previewOffsetY,this.previewOffsetY)}},{key:"setSelectLetter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.selectLetter=e,this.selectNextLetter=t}}]),e}(),b=Object(B.a)(d.prototype,"scale",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=Object(B.a)(d.prototype,"offsetX",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=Object(B.a)(d.prototype,"offsetY",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=Object(B.a)(d.prototype,"width",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=Object(B.a)(d.prototype,"height",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=Object(B.a)(d.prototype,"previewText",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Hello World!\nHello Snow Bamboo!"}}),v=Object(B.a)(d.prototype,"selectLetter",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),w=Object(B.a)(d.prototype,"selectNextLetter",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=Object(B.a)(d.prototype,"showPreview",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=Object(B.a)(d.prototype,"previewScale",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=Object(B.a)(d.prototype,"previewOffsetX",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=Object(B.a)(d.prototype,"previewOffsetY",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(B.a)(d.prototype,"setTransform",[l],Object.getOwnPropertyDescriptor(d.prototype,"setTransform"),d.prototype),Object(B.a)(d.prototype,"setSize",[c],Object.getOwnPropertyDescriptor(d.prototype,"setSize"),d.prototype),Object(B.a)(d.prototype,"setPreviewText",[s],Object.getOwnPropertyDescriptor(d.prototype,"setPreviewText"),d.prototype),Object(B.a)(d.prototype,"setShowPreview",[u],Object.getOwnPropertyDescriptor(d.prototype,"setShowPreview"),d.prototype),Object(B.a)(d.prototype,"setPreviewTransform",[f],Object.getOwnPropertyDescriptor(d.prototype,"setPreviewTransform"),d.prototype),Object(B.a)(d.prototype,"setSelectLetter",[p],Object.getOwnPropertyDescriptor(d.prototype,"setSelectLetter"),d.prototype),d),U=n(9),K={fontSize:"14px",fontFamily:"sans-serif"};function V(e){var t=Object(U.a)(Object(U.a)({},K),e),n=[];return t.fontStyle&&n.push(t.fontStyle),t.fontVariant&&n.push(t.fontVariant),t.fontWeight&&n.push(t.fontWeight),R(t.fontSize)?t.fontSize="".concat(t.fontSize,"px"):t.fontSize=K.fontSize,t.lineHeight?n.push("".concat(t.fontSize,"/").concat(t.lineHeight)):n.push(t.fontSize),n.push(t.fontFamily),n.join(" ")}var q,Q,Z,_,ee,te,ne,re,ae,oe,ie,le,ce,se,ue,fe,pe,de,be,he=n(190);var ge,ye,me,Oe,ve,we,je,xe,ke,Ee,Pe=(Z=L.observable.ref,_=L.observable.ref,ee=L.action.bound,te=L.action.bound,ne=L.action.bound,re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.a)(this,e),Object(M.a)(this,"font",ae,this),Object(M.a)(this,"family",oe,this),Object(M.a)(this,"size",ie,this),Object(M.a)(this,"lineHeight",le,this),Object(M.a)(this,"middle",ce,this),Object(M.a)(this,"hanging",se,this),Object(M.a)(this,"top",ue,this),Object(M.a)(this,"alphabetic",fe,this),Object(M.a)(this,"ideographic",pe,this),Object(M.a)(this,"bottom",de,this),Object(M.a)(this,"opentype",be,this),this.size=t.size||72,t.font&&t.font.byteLength?this.setFont(t.font):this.updateBaseines()}return Object(D.a)(e,[{key:"minBaseLine",get:function(){var e=Math.min(this.middle,this.hanging,this.top,this.alphabetic,this.ideographic,this.bottom);return Number.isNaN(Number(e))?0:e}},{key:"maxBaseLine",get:function(){var e=Math.max(this.middle,this.hanging,this.top,this.alphabetic,this.ideographic,this.bottom);return Number.isNaN(Number(e))?this.size:e}}]),Object(D.a)(e,[{key:"updateBaseines",value:function(){var e=function(e,t){P||(P=document.createElement("canvas"));var n=P.getContext("2d");if(!n)throw new Error("Get context 2d failed.");var r=V(t);P.width=1,P.height=1,n.font=r,n.textBaseline="middle";var a=n.measureText(e);n.textBaseline="hanging";var o=n.measureText(e);n.textBaseline="top";var i=n.measureText(e);n.textBaseline="alphabetic";var l=n.measureText(e);n.textBaseline="ideographic";var c=n.measureText(e);n.textBaseline="bottom";var s=n.measureText(e);return{middle:0,hanging:o.actualBoundingBoxAscent-a.actualBoundingBoxAscent,top:i.actualBoundingBoxAscent-a.actualBoundingBoxAscent,alphabetic:a.actualBoundingBoxDescent-l.actualBoundingBoxDescent,ideographic:a.actualBoundingBoxDescent-c.actualBoundingBoxDescent,bottom:a.actualBoundingBoxDescent-s.actualBoundingBoxDescent}}("a",{fontFamily:this.family,fontSize:this.size});this.middle=e.middle,this.hanging=e.hanging,this.top=e.top,this.alphabetic=e.alphabetic,this.ideographic=e.ideographic,this.bottom=e.bottom}},{key:"setFont",value:function(e){var t=this;try{this.opentype=Object(he.a)(e,{lowMemory:!0})}catch(o){return Promise.resolve()}var n=this.opentype.names,r=n.postScriptName[Object.keys(n.postScriptName)[0]],a=URL.createObjectURL(new Blob([e]));return function(e,t){var n=document.createTextNode('\n    @font-face {\n        font-family: "'.concat(e,'";\n        src: url("').concat(t,"\") format('truetype');\n    }"));if(q)q.appendChild(n);else{var r=document.createTextNode("A");q=document.createElement("style"),Q=document.createElement("div"),document.head.appendChild(q),q.appendChild(n),Q.appendChild(r),Q.style.position="absolute",Q.style.left="-1000px",Q.style.top="-1000px",Q.style.opacity="0",Q.style.fontSize="12px",Q.style.pointerEvents="none",document.body.appendChild(Q)}return Q.style.fontFamily=e,new Promise((function(e){return setTimeout(e,200)}))}(r,a).then((function(){Object(L.runInAction)((function(){t.family=r,t.font=e,t.updateBaseines()}))}))}},{key:"setSize",value:function(e){this.size=e,this.updateBaseines()}},{key:"setLineHeight",value:function(e){this.lineHeight=e}}]),e}(),ae=Object(B.a)(re.prototype,"font",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=Object(B.a)(re.prototype,"family",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"sans-serif"}}),ie=Object(B.a)(re.prototype,"size",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=Object(B.a)(re.prototype,"lineHeight",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.25}}),ce=Object(B.a)(re.prototype,"middle",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),se=Object(B.a)(re.prototype,"hanging",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ue=Object(B.a)(re.prototype,"top",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fe=Object(B.a)(re.prototype,"alphabetic",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe=Object(B.a)(re.prototype,"ideographic",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),de=Object(B.a)(re.prototype,"bottom",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),be=Object(B.a)(re.prototype,"opentype",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(B.a)(re.prototype,"minBaseLine",[L.computed],Object.getOwnPropertyDescriptor(re.prototype,"minBaseLine"),re.prototype),Object(B.a)(re.prototype,"maxBaseLine",[L.computed],Object.getOwnPropertyDescriptor(re.prototype,"maxBaseLine"),re.prototype),Object(B.a)(re.prototype,"setFont",[ee],Object.getOwnPropertyDescriptor(re.prototype,"setFont"),re.prototype),Object(B.a)(re.prototype,"setSize",[te],Object.getOwnPropertyDescriptor(re.prototype,"setSize"),re.prototype),Object(B.a)(re.prototype,"setLineHeight",[ne],Object.getOwnPropertyDescriptor(re.prototype,"setLineHeight"),re.prototype),re),Se=n(26);!function(e){e[e.LINEAR=0]="LINEAR",e[e.RADIAL=1]="RADIAL"}(Ee||(Ee={}));var Ce,Te,Ae,Ie,$e,ze,Le,Me,Ne,De,Be,Xe=(ge=L.observable.shallow,ye=L.action.bound,me=L.action.bound,Oe=L.action.bound,ve=L.action.bound,we=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.a)(this,e),Object(M.a)(this,"type",je,this),Object(M.a)(this,"angle",xe,this),Object(M.a)(this,"palette",ke,this),this.type=n.type&&Ee[n.type]?n.type:0,this.angle=n.angle||0,n.palette?n.palette.forEach((function(e){t.palette.push(Object(U.a)(Object(U.a)({},e),{},{id:e.id||t.nextId}))})):(this.addColor(0,"#FFF"),this.addColor(1))}return Object(D.a)(e,[{key:"setType",value:function(e){this.type=e}},{key:"setAngle",value:function(e){this.angle=e}},{key:"addColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000000";this.palette.push({offset:e,color:t,id:this.nextId})}},{key:"updatePalette",value:function(e){this.palette=e}},{key:"ids",get:function(){return this.palette.map((function(e){return e.id}))}},{key:"nextId",get:function(){return 0===this.ids.length?1:Math.max.apply(Math,Object(Se.a)(this.ids))+1}}]),e}(),je=Object(B.a)(we.prototype,"type",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xe=Object(B.a)(we.prototype,"angle",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=Object(B.a)(we.prototype,"palette",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Object(B.a)(we.prototype,"ids",[L.computed],Object.getOwnPropertyDescriptor(we.prototype,"ids"),we.prototype),Object(B.a)(we.prototype,"nextId",[L.computed],Object.getOwnPropertyDescriptor(we.prototype,"nextId"),we.prototype),Object(B.a)(we.prototype,"setType",[ye],Object.getOwnPropertyDescriptor(we.prototype,"setType"),we.prototype),Object(B.a)(we.prototype,"setAngle",[me],Object.getOwnPropertyDescriptor(we.prototype,"setAngle"),we.prototype),Object(B.a)(we.prototype,"addColor",[Oe],Object.getOwnPropertyDescriptor(we.prototype,"addColor"),we.prototype),Object(B.a)(we.prototype,"updatePalette",[ve],Object.getOwnPropertyDescriptor(we.prototype,"updatePalette"),we.prototype),we);var Ye,Fe,Ge,We,Re,He,Je,Ue,Ke,Ve,qe=(Ce=L.observable.ref,Te=L.observable.ref,Ae=L.action.bound,Ie=L.action.bound,$e=L.action.bound,ze=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.a)(this,e),Object(M.a)(this,"buffer",Le,this),Object(M.a)(this,"image",Me,this),Object(M.a)(this,"src",Ne,this),Object(M.a)(this,"repetition",De,this),Object(M.a)(this,"scale",Be,this),this.scale=H(t.scale,1),this.repetition=t.repetition||"repeat",this.setImage(t.buffer||this.buffer)}return Object(D.a)(e,[{key:"setImage",value:function(e){var t=this,n=URL.createObjectURL(new Blob([e])),r=new Image;r.onload=function(){Object(L.runInAction)("setPatternTextureImage",(function(){t.buffer=e,t.image=r,t.src=n,r.onload=null}))},r.src=n}},{key:"setRepetition",value:function(e){this.repetition=e}},{key:"setScale",value:function(e){this.scale=e}}]),e}(),Le=Object(B.a)(ze.prototype,"buffer",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){for(var t=atob(e),n=t.length,r=new Uint8Array(n),a=0;a<n;a+=1)r[a]=t.charCodeAt(a);return r.buffer}("iVBORw0KGgoAAAANSUhEUgAAAAgAAAAIAQMAAAD+wSzIAAAABlBMVEX////MzMw46qqDAAAADklEQVQI12Pgh8IPEAgAEeAD/Xk4HBcAAAAASUVORK5CYII=")}}),Me=Object(B.a)(ze.prototype,"image",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=Object(B.a)(ze.prototype,"src",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),De=Object(B.a)(ze.prototype,"repetition",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"repeat"}}),Be=Object(B.a)(ze.prototype,"scale",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(B.a)(ze.prototype,"setImage",[Ae],Object.getOwnPropertyDescriptor(ze.prototype,"setImage"),ze.prototype),Object(B.a)(ze.prototype,"setRepetition",[Ie],Object.getOwnPropertyDescriptor(ze.prototype,"setRepetition"),ze.prototype),Object(B.a)(ze.prototype,"setScale",[$e],Object.getOwnPropertyDescriptor(ze.prototype,"setScale"),ze.prototype),ze);!function(e){e[e.SOLID=0]="SOLID",e[e.GRADIENT=1]="GRADIENT",e[e.IMAGE=2]="IMAGE"}(Ve||(Ve={}));var Qe,Ze,_e,et,tt,nt,rt,at,ot,it,lt,ct,st,ut,ft,pt,dt,bt,ht,gt,yt,mt,Ot,vt,wt,jt,xt,kt,Et,Pt,St,Ct,Tt,At,It,$t,zt,Lt,Mt,Nt,Dt,Bt,Xt,Yt,Ft,Gt,Wt,Rt,Ht,Jt,Ut,Kt,Vt,qt,Qt,Zt,_t,en,tn,nn,rn,an=(Ye=L.observable.shallow,Fe=L.observable.shallow,Ge=L.action.bound,We=L.action.bound,Re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.a)(this,e),Object(M.a)(this,"type",He,this),Object(M.a)(this,"color",Je,this),Object(M.a)(this,"gradient",Ue,this),Object(M.a)(this,"patternTexture",Ke,this),this.color=t.color||"#000000",this.type=t.type&&Ve[t.type]?t.type:0,this.gradient=new Xe(t.gradient),this.patternTexture=new qe(t.patternTexture)}return Object(D.a)(e,[{key:"setType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.type=e}},{key:"setColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000000";this.color=e}}]),e}(),He=Object(B.a)(Re.prototype,"type",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=Object(B.a)(Re.prototype,"color",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=Object(B.a)(Re.prototype,"gradient",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=Object(B.a)(Re.prototype,"patternTexture",[Fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(B.a)(Re.prototype,"setType",[Ge],Object.getOwnPropertyDescriptor(Re.prototype,"setType"),Re.prototype),Object(B.a)(Re.prototype,"setColor",[We],Object.getOwnPropertyDescriptor(Re.prototype,"setColor"),Re.prototype),Re),on=n(45),ln=n(76),cn=n(75),sn=(Qe=L.action.bound,Ze=L.action.bound,_e=L.action.bound,et=function(e){Object(ln.a)(n,e);var t=Object(cn.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(N.a)(this,n),e=t.call(this,r),Object(M.a)(e,"width",tt,Object(on.a)(e)),Object(M.a)(e,"lineCap",nt,Object(on.a)(e)),Object(M.a)(e,"lineJoin",rt,Object(on.a)(e)),e.width=H(r.width,1),e.lineCap=r.lineCap||"round",e.lineJoin=r.lineJoin||"round",e}return Object(D.a)(n,[{key:"setWidth",value:function(e){this.width=e}},{key:"setLineCap",value:function(e){this.lineCap=e}},{key:"setLineJoin",value:function(e){this.lineJoin=e}}]),n}(an),tt=Object(B.a)(et.prototype,"width",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),nt=Object(B.a)(et.prototype,"lineCap",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=Object(B.a)(et.prototype,"lineJoin",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(B.a)(et.prototype,"setWidth",[Qe],Object.getOwnPropertyDescriptor(et.prototype,"setWidth"),et.prototype),Object(B.a)(et.prototype,"setLineCap",[Ze],Object.getOwnPropertyDescriptor(et.prototype,"setLineCap"),et.prototype),Object(B.a)(et.prototype,"setLineJoin",[_e],Object.getOwnPropertyDescriptor(et.prototype,"setLineJoin"),et.prototype),et),un=(at=L.action.bound,ot=L.action.bound,it=L.action.bound,lt=L.action.bound,ct=L.action.bound,st=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.a)(this,e),Object(M.a)(this,"color",ut,this),Object(M.a)(this,"blur",ft,this),Object(M.a)(this,"offsetX",pt,this),Object(M.a)(this,"offsetY",dt,this),this.color=t.color||"#000000",this.blur=H(t.blur,1),this.offsetX=H(t.offsetX,1),this.offsetY=H(t.offsetY,1)}return Object(D.a)(e,[{key:"setColor",value:function(e){this.color=e}},{key:"setBlur",value:function(e){this.blur=e}},{key:"setOffsetX",value:function(e){this.offsetX=e}},{key:"setOffsetY",value:function(e){this.offsetY=e}},{key:"setOffset",value:function(e,t){this.offsetX=e,this.offsetY=t}}]),e}(),ut=Object(B.a)(st.prototype,"color",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=Object(B.a)(st.prototype,"blur",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),pt=Object(B.a)(st.prototype,"offsetX",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),dt=Object(B.a)(st.prototype,"offsetY",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Object(B.a)(st.prototype,"setColor",[at],Object.getOwnPropertyDescriptor(st.prototype,"setColor"),st.prototype),Object(B.a)(st.prototype,"setBlur",[ot],Object.getOwnPropertyDescriptor(st.prototype,"setBlur"),st.prototype),Object(B.a)(st.prototype,"setOffsetX",[it],Object.getOwnPropertyDescriptor(st.prototype,"setOffsetX"),st.prototype),Object(B.a)(st.prototype,"setOffsetY",[lt],Object.getOwnPropertyDescriptor(st.prototype,"setOffsetY"),st.prototype),Object(B.a)(st.prototype,"setOffset",[ct],Object.getOwnPropertyDescriptor(st.prototype,"setOffset"),st.prototype),st),fn=(bt=L.action.bound,ht=L.action.bound,gt=L.action.bound,yt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.a)(this,e),Object(M.a)(this,"font",mt,this),Object(M.a)(this,"fill",Ot,this),Object(M.a)(this,"useStroke",vt,this),Object(M.a)(this,"stroke",wt,this),Object(M.a)(this,"useShadow",jt,this),Object(M.a)(this,"shadow",xt,this),Object(M.a)(this,"bgColor",kt,this),this.font=new Pe(t.font),this.fill=new an(t.fill),this.stroke=new sn(t.stroke),this.shadow=new un(t.shadow),this.useShadow=!!t.useShadow,this.useStroke=!!t.useStroke}return Object(D.a)(e,[{key:"setUseStroke",value:function(e){this.useStroke=e}},{key:"setUseShadow",value:function(e){this.useShadow=e}},{key:"setBgColor",value:function(e){this.bgColor=e}}]),e}(),mt=Object(B.a)(yt.prototype,"font",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ot=Object(B.a)(yt.prototype,"fill",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=Object(B.a)(yt.prototype,"useStroke",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=Object(B.a)(yt.prototype,"stroke",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt=Object(B.a)(yt.prototype,"useShadow",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xt=Object(B.a)(yt.prototype,"shadow",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=Object(B.a)(yt.prototype,"bgColor",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"rgba(0,0,0,0)"}}),Object(B.a)(yt.prototype,"setUseStroke",[bt],Object.getOwnPropertyDescriptor(yt.prototype,"setUseStroke"),yt.prototype),Object(B.a)(yt.prototype,"setUseShadow",[ht],Object.getOwnPropertyDescriptor(yt.prototype,"setUseShadow"),yt.prototype),Object(B.a)(yt.prototype,"setBgColor",[gt],Object.getOwnPropertyDescriptor(yt.prototype,"setBgColor"),yt.prototype),yt),pn=(Et=L.action.bound,Pt=L.action.bound,St=L.action.bound,Ct=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.a)(this,e),Object(M.a)(this,"padding",Tt,this),Object(M.a)(this,"spacing",At,this),Object(M.a)(this,"power",It,this),this.padding=H(t.padding,1),this.spacing=H(t.spacing,1),this.power=!!t.power}return Object(D.a)(e,[{key:"setPadding",value:function(e){this.padding=e}},{key:"setSpacing",value:function(e){this.spacing=e}},{key:"setPower",value:function(e){this.power=e}}]),e}(),Tt=Object(B.a)(Ct.prototype,"padding",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),At=Object(B.a)(Ct.prototype,"spacing",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),It=Object(B.a)(Ct.prototype,"power",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(B.a)(Ct.prototype,"setPadding",[Et],Object.getOwnPropertyDescriptor(Ct.prototype,"setPadding"),Ct.prototype),Object(B.a)(Ct.prototype,"setSpacing",[Pt],Object.getOwnPropertyDescriptor(Ct.prototype,"setSpacing"),Ct.prototype),Object(B.a)(Ct.prototype,"setPower",[St],Object.getOwnPropertyDescriptor(Ct.prototype,"setPower"),Ct.prototype),Ct),dn=($t=L.action.bound,zt=L.action.bound,Lt=L.action.bound,Mt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.a)(this,e),Object(M.a)(this,"xAdvance",Nt,this),Object(M.a)(this,"xOffset",Dt,this),Object(M.a)(this,"yOffset",Bt,this),this.xAdvance=t.xAdvance||0,this.xOffset=t.xOffset||0,this.yOffset=t.yOffset||0}return Object(D.a)(e,[{key:"setXAdvance",value:function(e){this.xAdvance=e}},{key:"setXOffset",value:function(e){this.xOffset=e}},{key:"setYOffset",value:function(e){this.yOffset=e}}]),e}(),Nt=Object(B.a)(Mt.prototype,"xAdvance",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Dt=Object(B.a)(Mt.prototype,"xOffset",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bt=Object(B.a)(Mt.prototype,"yOffset",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(B.a)(Mt.prototype,"setXAdvance",[$t],Object.getOwnPropertyDescriptor(Mt.prototype,"setXAdvance"),Mt.prototype),Object(B.a)(Mt.prototype,"setXOffset",[zt],Object.getOwnPropertyDescriptor(Mt.prototype,"setXOffset"),Mt.prototype),Object(B.a)(Mt.prototype,"setYOffset",[Lt],Object.getOwnPropertyDescriptor(Mt.prototype,"setYOffset"),Mt.prototype),Mt);function bn(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.data,r=e.width,a=e.height,o=0,i=0,l=0,c=0,s=!0,u=!0,f=!0,p=!0,d=Math.ceil(a/2),b=Math.ceil(r/2),h=0;h<d;h+=1){for(var g=0;g<r&&(s&&n[4*(h*r+g)+3]>t&&(s=!1),u&&n[4*((a-h-1)*r+g)+3]>t&&(u=!1),s||u);g+=1);if(!s&&!u)break;s&&(o+=1),u&&(i+=1)}if(o+i>=a)return{trimOffsetLeft:-1*r,trimOffsetTop:-1*a,width:0,height:0};d=a-i;for(var y=0;y<b;y+=1){for(var m=o;m<d&&(f&&n[4*(r*m+y)+3]>t&&(f=!1),p&&n[4*(r*m+r-y-1)+3]>t&&(p=!1),f||p);m+=1);if(!f&&!p)break;f&&(l+=1),p&&(c+=1)}return{trimOffsetLeft:-1*l,trimOffsetTop:-1*o,width:r-l-c,height:a-o-i}}function hn(e,t,n,r){return{x:e+n*Math.cos(Math.PI/180*r),y:t+n*Math.sin(Math.PI/180*r)}}function gn(e,t,n,r,a,o){if(0===o.type)return o.color;if(1===o.type){var i,l=o.gradient,c=l.type,s=l.palette,u=l.angle,f=t+r/2,p=n+a/2,d=Math.max(r,a)/2;if(0===c){var b=hn(f,p,d,u+180),h=hn(f,p,d,u);i=e.createLinearGradient(b.x,b.y,h.x,h.y)}else i=e.createRadialGradient(f,p,0,f,p,d);return s.forEach((function(e){i.addColorStop(e.offset,e.color)})),i}var g=o.patternTexture,y=g.image,m=g.repetition,O=g.scale;if(!y)return"rgba(0,0,0,0)";if(1===O)return e.createPattern(y,m)||"rgba(0,0,0,0)";var v=y.naturalWidth,w=y.naturalHeight,j=document.createElement("canvas");j.width=Math.ceil(v*O),j.height=Math.ceil(w*O);var x=j.getContext("2d");return x?(x.drawImage(y,0,0,j.width,j.height),e.createPattern(j,m)||"rgba(0,0,0,0)"):"rgba(0,0,0,0)"}function yn(e,t){var n=t.font,r=t.stroke,a=t.shadow,o=t.fill,i=function(e,t){Xt||(Xt=document.createElement("canvas"));var n=Xt.getContext("2d");if(!n)throw new Error("Get context 2d failed.");Xt.width=1,Xt.height=1;var r=V(t);n.font=r,n.textAlign="left",n.textBaseline="bottom";var a,o,i=n.measureText(e);if("undefined"===typeof i.actualBoundingBoxLeft)return{text:e,font:r,width:i.width,height:parseInt("".concat(null!==(a=t.fontSize)&&void 0!==a?a:"14"),10),fontWidth:i.width,fontHeight:parseInt("".concat(null!==(o=t.fontSize)&&void 0!==o?o:"14"),10),trimOffsetTop:0,trimOffsetLeft:0,trimOffsetRight:0,trimOffsetBottom:0};n.textAlign="right",n.textBaseline="top";var l=n.measureText(e),c=Math.ceil(i.actualBoundingBoxLeft),s=Math.ceil(l.actualBoundingBoxRight),u=Math.ceil(l.actualBoundingBoxAscent),f=Math.ceil(i.actualBoundingBoxDescent);return{text:e,font:r,width:c+Math.ceil(i.actualBoundingBoxRight),height:f+Math.ceil(i.actualBoundingBoxAscent),fontWidth:Math.ceil(i.width),fontHeight:i.actualBoundingBoxAscent-l.actualBoundingBoxAscent,trimOffsetTop:u,trimOffsetLeft:c,trimOffsetRight:s,trimOffsetBottom:f}}(e,{fontSize:n.size,fontFamily:n.family}),l=i.width,c=i.height,s=i.trimOffsetLeft,u=i.trimOffsetTop;if(0===l||0===c)return Object(U.a)({canvas:null},i);var f=r?2*r.width:0,p=f,d=f,b=(l-n.size)/2,h=(c-n.size)/2;if(a){var g=Math.ceil(1.5*a.blur);p=Math.abs(a.offsetX)+g,d=Math.abs(a.offsetY)+g}b+=p,h+=d;var y=document.createElement("canvas"),m=y.getContext("2d");if(y.width=l+2*p,y.height=c+2*d,m.textAlign="left",m.textBaseline="top",m.font=V({fontSize:n.size,fontFamily:n.family}),r&&f&&(m.lineWidth=f,m.lineCap=r.lineCap,m.lineJoin=r.lineJoin,m.strokeStyle=gn(m,b,h,n.size,n.size,r),m.strokeText(e,p+s,d+u)),m.fillStyle=gn(m,b,h,n.size,n.size,o),m.fillText(e,p+s,d+u),a){var O=document.createElement("canvas");O.width=l+2*p,O.height=c+2*d;var v=O.getContext("2d");v.shadowColor=a.color,v.shadowBlur=a.blur,v.shadowOffsetX=a.offsetX,v.shadowOffsetY=a.offsetY,v.drawImage(y,0,0),y=O,m=v}if(0===y.width||0===y.height)return Object(U.a)({canvas:y},i);var w=m.getImageData(0,0,y.width,y.height),j=bn(w);return y.width=j.width,y.height=j.height,i.width=j.width,i.height=j.height,m.putImageData(w,j.trimOffsetLeft,j.trimOffsetTop),i.trimOffsetLeft+=p+j.trimOffsetLeft,i.trimOffsetTop+=d+j.trimOffsetTop,i.trimOffsetBottom+=d+(c+2*d+j.trimOffsetTop-j.height),Object(U.a)({canvas:y},i)}var mn,On,vn,wn,jn,xn,kn,En,Pn,Sn,Cn,Tn=(Yt=L.observable.ref,Ft=L.observable.ref,Gt=L.action.bound,Wt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.a)(this,e),this.type="text",Object(M.a)(this,"letter",Rt,this),Object(M.a)(this,"source",Ht,this),Object(M.a)(this,"width",Jt,this),Object(M.a)(this,"height",Ut,this),Object(M.a)(this,"x",Kt,this),Object(M.a)(this,"y",Vt,this),Object(M.a)(this,"fontWidth",qt,this),Object(M.a)(this,"fontHeight",Qt,this),Object(M.a)(this,"trimOffsetTop",Zt,this),Object(M.a)(this,"trimOffsetLeft",_t,this),Object(M.a)(this,"trimOffsetRight",en,this),Object(M.a)(this,"trimOffsetBottom",tn,this),Object(M.a)(this,"adjustMetric",nn,this),Object(M.a)(this,"kerning",rn,this),this.letter=t.letter||"",this.adjustMetric=new dn(t.adjustMetric),t.kerning&&(this.kerning=t.kerning)}return Object(D.a)(e,[{key:"steKerning",value:function(e,t){this.kerning.set(e,t)}}]),e}(),Rt=Object(B.a)(Wt.prototype,"letter",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ht=Object(B.a)(Wt.prototype,"source",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jt=Object(B.a)(Wt.prototype,"width",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ut=Object(B.a)(Wt.prototype,"height",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Kt=Object(B.a)(Wt.prototype,"x",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vt=Object(B.a)(Wt.prototype,"y",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qt=Object(B.a)(Wt.prototype,"fontWidth",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qt=Object(B.a)(Wt.prototype,"fontHeight",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Zt=Object(B.a)(Wt.prototype,"trimOffsetTop",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_t=Object(B.a)(Wt.prototype,"trimOffsetLeft",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),en=Object(B.a)(Wt.prototype,"trimOffsetRight",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tn=Object(B.a)(Wt.prototype,"trimOffsetBottom",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),nn=Object(B.a)(Wt.prototype,"adjustMetric",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rn=Object(B.a)(Wt.prototype,"kerning",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object(B.a)(Wt.prototype,"steKerning",[Gt],Object.getOwnPropertyDescriptor(Wt.prototype,"steKerning"),Wt.prototype),Wt),An=(mn=function(e){Object(ln.a)(n,e);var t=Object(cn.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return Object(N.a)(this,n),(e=t.call(this,r)).setGlyphInfo(a),e}return Object(D.a)(n,[{key:"setGlyphInfo",value:function(e){var t=e.font,n=e.fill,r=e.useStroke,a=e.stroke,o=e.useShadow,i=e.shadow,l={font:t,fill:n};r&&(l.stroke=a),o&&(l.shadow=i);var c=yn(this.letter,l);this.source=c.canvas,this.width=c.width,this.height=c.height,this.fontWidth=c.fontWidth,this.fontHeight=c.fontHeight,this.trimOffsetTop=c.trimOffsetTop,this.trimOffsetLeft=c.trimOffsetLeft,this.trimOffsetRight=c.trimOffsetRight,this.trimOffsetBottom=c.trimOffsetBottom}}]),n}(Tn),Object(B.a)(mn.prototype,"setGlyphInfo",[L.action],Object.getOwnPropertyDescriptor(mn.prototype,"setGlyphInfo"),mn.prototype),mn);var In,$n,zn,Ln,Mn,Nn,Dn,Bn,Xn,Yn,Fn,Gn,Wn,Rn,Hn,Jn,Un,Kn,Vn,qn,Qn,Zn,_n,er,tr,nr,rr,ar,or,ir,lr,cr,sr,ur,fr,pr=(On=L.observable.ref,vn=L.action.bound,wn=L.action.bound,jn=L.action.bound,xn=function(e){Object(ln.a)(n,e);var t=Object(cn.a)(n);function n(e){var r;return Object(N.a)(this,n),(r=t.call(this,e)).type="image",Object(M.a)(r,"src",kn,Object(on.a)(r)),Object(M.a)(r,"buffer",En,Object(on.a)(r)),Object(M.a)(r,"fileName",Pn,Object(on.a)(r)),Object(M.a)(r,"fileType",Sn,Object(on.a)(r)),Object(M.a)(r,"selected",Cn,Object(on.a)(r)),r.letter=e.letter||"",r.fileName=e.fileName||"",r.fileType=e.fileType||"",r.buffer=e.buffer||null,e.buffer&&(r.src=URL.createObjectURL(new Blob([e.buffer]))),r}return Object(D.a)(n,[{key:"initImage",value:function(){var e=this;return new Promise((function(t){var n=new Image;n.onload=function(){Object(L.runInAction)("trimImage",(function(){var r=n.naturalWidth,a=n.naturalHeight;e.fontWidth=r,e.fontHeight=a;var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=e.naturalWidth,r=e.naturalHeight,a=document.createElement("canvas");a.width=n,a.height=r;var o=a.getContext("2d");o.drawImage(e,0,0);var i=o.getImageData(0,0,n,r),l=bn(i,t);return a.width=l.width,a.height=l.height,o.drawImage(e,l.trimOffsetLeft,l.trimOffsetTop),Object(U.a)({canvas:a},l)}(n);e.width=o.width,e.height=o.height,e.trimOffsetLeft=o.trimOffsetLeft,e.trimOffsetTop=o.trimOffsetTop,e.trimOffsetRight=o.width-o.trimOffsetLeft-r,e.trimOffsetBottom=o.height-o.trimOffsetTop-a,e.source=o.canvas,t()}))},n.src=e.src}))}},{key:"setGlyph",value:function(e){this.letter=e[0]||""}},{key:"changeSelect",value:function(e){this.selected=e}}]),n}(Tn),kn=Object(B.a)(xn.prototype,"src",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),En=Object(B.a)(xn.prototype,"buffer",[On],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pn=Object(B.a)(xn.prototype,"fileName",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Sn=Object(B.a)(xn.prototype,"fileType",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Cn=Object(B.a)(xn.prototype,"selected",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Object(B.a)(xn.prototype,"initImage",[vn],Object.getOwnPropertyDescriptor(xn.prototype,"initImage"),xn.prototype),Object(B.a)(xn.prototype,"setGlyph",[wn],Object.getOwnPropertyDescriptor(xn.prototype,"setGlyph"),xn.prototype),Object(B.a)(xn.prototype,"changeSelect",[jn],Object.getOwnPropertyDescriptor(xn.prototype,"changeSelect"),xn.prototype),xn),dr=(In=L.observable.shallow,$n=L.observable.shallow,zn=L.observable.ref,Ln=L.observable.ref,Mn=L.observable.ref,Nn=L.observable.ref,Dn=L.observable.ref,Bn=L.action.bound,Xn=L.action.bound,Yn=L.action.bound,Fn=L.action.bound,Gn=L.action.bound,Wn=L.action.bound,Rn=L.action.bound,Hn=L.action.bound,Jn=L.action.bound,Un=function(){function e(){var t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.a)(this,e),Object(M.a)(this,"name",Kn,this),this.id=void 0,this.worker=null,this.packStart=0,this.packTimer=0,this.idleId=0,Object(M.a)(this,"isPacking",Vn,this),Object(M.a)(this,"text",qn,this),Object(M.a)(this,"glyphs",Qn,this),Object(M.a)(this,"glyphImages",Zn,this),Object(M.a)(this,"style",_n,this),Object(M.a)(this,"layout",er,this),Object(M.a)(this,"globalAdjustMetric",tr,this),Object(M.a)(this,"packCanvas",nr,this),Object(M.a)(this,"ui",rr,this),this.id=r.id||Date.now(),this.name=r.name||"Unnamed",this.text=r.text||this.text,this.ui=new J(r.ui),this.style=new fn(r.style),this.layout=new pn(r.layout),this.globalAdjustMetric=new dn(r.globalAdjustMetric),r.glyphs&&r.glyphs.forEach((function(e,t){n.glyphs.set(t,new An(e,n.style))})),null===(t=r.glyphImages)||void 0===t||t.forEach((function(e){n.glyphImages.add(new pr(e))})),this.glyphs.has(" ")||this.glyphs.set(" ",new An({letter:" "},this.style)),this.addGlyphs(r.text||""),this.addAutoRun(),this.pack()}return Object(D.a)(e,[{key:"pack",value:function(){var e=this;if(!this.idleId){this.worker&&this.worker.terminate(),this.isPacking=!0,this.worker=new W.a;var t=this.rectangleList.sort((function(e,t){return t.height-e.height}));this.worker.addEventListener("message",Object(L.action)("PackerWorkerCallback",(function(t){var n,r=t.data,a=Array.from(e.glyphImages),o=0,i=0;r.forEach((function(t){var n,r=t.letter,l=t.x,c=t.y,s=t.type,u=t.width,f=t.height;"image"===s&&(n=a.find((function(e){return!(!e||e.letter!==r)}))),n||(n=e.glyphs.get(r)),n&&(n.x=l||0,n.y=c||0),o=Math.max(o,l+u),i=Math.max(i,c+f)})),e.ui.setSize(o-e.layout.spacing,i-e.layout.spacing),e.isPacking=!1,null===(n=e.worker)||void 0===n||n.terminate(),e.worker=null})),!1),this.worker.postMessage(t.filter((function(e){var t=e.width,n=e.height;return!(!t||!n)})))}}},{key:"packStyle",value:function(){var e=this;this.isPacking=!0,this.worker&&(this.worker.terminate(),this.worker=null),Object(F.cancel)(this.idleId);var t=[];this.glyphs.forEach((function(e){t.push(e)}));!function n(){e.idleId=Object(F.request)((function(r){for(var a=r.timeRemaining(),o=Date.now();t.length&&a-(Date.now()-o)>-100;){var i=t.shift();i&&i.setGlyphInfo(e.style)}t.length?n():(e.idleId=0,e.pack())}))}()}},{key:"throttlePack",value:function(){var e=this;this.idleId||(window.clearTimeout(this.packTimer),Date.now()-this.packStart>500?Promise.resolve().then(this.pack):this.packTimer=window.setTimeout((function(){e.pack()}),500),this.packStart=Date.now())}},{key:"addAutoRun",value:function(){var e=this,t=function(e,t){return!(!e.name||e.name!==t)};Object(Y.a)(this.glyphs,(function(){e.throttlePack()})),Object(Y.a)(this.glyphImages,(function(){e.throttlePack()})),Object(Y.a)(this.layout,(function(n){t(n,"power")||e.throttlePack()})),Object(Y.a)(this.style,(function(n){t(n,"bgColor")||t(n,"lineHeight")||e.packStyle()}))}},{key:"setText",value:function(e){var t=this.text;this.text=e.replace(/\s/gm,""),this.addGlyphs(t)}},{key:"addGlyphs",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=Array.from(new Set(this.text.split(""))),r=Array.from(new Set(t.split("")));this.text=n.join("");var a=t?Array.from(new Set(n.concat(r))).filter((function(e){return!(n.includes(e)&&r.includes(e))})):n;a.length&&a.forEach((function(t){n.includes(t)?e.glyphs.set(t,new An({letter:t},e.style)):e.glyphs.delete(t)}))}},{key:"addImages",value:function(e){var t=this;Promise.all(e.map((function(e){var n=new pr(e);return t.glyphImages.add(n),n.initImage()}))).then(this.pack)}},{key:"removeImage",value:function(e){this.glyphImages.delete(e)}},{key:"setCanvas",value:function(e){this.packCanvas=e}},{key:"setName",value:function(e){this.name=e||this.name}},{key:"glyphList",get:function(){var e=this,t={};return Array.from(this.glyphImages).forEach((function(e){e.letter&&e.selected&&(t[e.letter]=e)}))," ".concat(this.text).split("").map((function(n){return t[n]?t[n]:e.glyphs.get(n)}))}},{key:"rectangleList",get:function(){var e=this.layout,t=e.padding,n=e.spacing;return this.glyphList.map((function(e){var r=!(!e.width||!e.height);return{letter:e.letter,type:e.type,width:r?e.width+2*t+n:0,height:r?e.height+2*t+n:0,x:0,y:0}}))}}]),e}(),Kn=Object(B.a)(Un.prototype,"name",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Unnamed"}}),Vn=Object(B.a)(Un.prototype,"isPacking",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qn=Object(B.a)(Un.prototype,"text",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!\u2116;%:?*()_+-=.,/|\"'@#$^&{}[]"}}),Qn=Object(B.a)(Un.prototype,"glyphs",[In],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Zn=Object(B.a)(Un.prototype,"glyphImages",[$n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),_n=Object(B.a)(Un.prototype,"style",[zn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),er=Object(B.a)(Un.prototype,"layout",[Ln],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tr=Object(B.a)(Un.prototype,"globalAdjustMetric",[Mn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nr=Object(B.a)(Un.prototype,"packCanvas",[Nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rr=Object(B.a)(Un.prototype,"ui",[Dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new J}}),Object(B.a)(Un.prototype,"glyphList",[L.computed],Object.getOwnPropertyDescriptor(Un.prototype,"glyphList"),Un.prototype),Object(B.a)(Un.prototype,"rectangleList",[L.computed],Object.getOwnPropertyDescriptor(Un.prototype,"rectangleList"),Un.prototype),Object(B.a)(Un.prototype,"pack",[Bn],Object.getOwnPropertyDescriptor(Un.prototype,"pack"),Un.prototype),Object(B.a)(Un.prototype,"packStyle",[Xn],Object.getOwnPropertyDescriptor(Un.prototype,"packStyle"),Un.prototype),Object(B.a)(Un.prototype,"throttlePack",[Yn],Object.getOwnPropertyDescriptor(Un.prototype,"throttlePack"),Un.prototype),Object(B.a)(Un.prototype,"setText",[Fn],Object.getOwnPropertyDescriptor(Un.prototype,"setText"),Un.prototype),Object(B.a)(Un.prototype,"addGlyphs",[Gn],Object.getOwnPropertyDescriptor(Un.prototype,"addGlyphs"),Un.prototype),Object(B.a)(Un.prototype,"addImages",[Wn],Object.getOwnPropertyDescriptor(Un.prototype,"addImages"),Un.prototype),Object(B.a)(Un.prototype,"removeImage",[Rn],Object.getOwnPropertyDescriptor(Un.prototype,"removeImage"),Un.prototype),Object(B.a)(Un.prototype,"setCanvas",[Hn],Object.getOwnPropertyDescriptor(Un.prototype,"setCanvas"),Un.prototype),Object(B.a)(Un.prototype,"setName",[Jn],Object.getOwnPropertyDescriptor(Un.prototype,"setName"),Un.prototype),Un),br=(ar=L.observable.shallow,or=L.action.bound,ir=L.action.bound,lr=L.action.bound,cr=L.action.bound,sr=function(){function e(){var t=this;Object(N.a)(this,e),Object(M.a)(this,"activeId",ur,this),Object(M.a)(this,"projectList",fr,this),Object(L.runInAction)((function(){t.activeId=Date.now();var e=new dr({id:t.activeId});t.projectList.set(e.id,e)}))}return Object(D.a)(e,[{key:"selectProject",value:function(e){this.projectList.has(e)&&(this.activeId=e)}},{key:"removeProject",value:function(e){var t=this.namedList.filter((function(t){return t.id!==e}));0!==t.length&&(this.activeId=t[0].id,this.projectList.delete(e))}},{key:"addProject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.id&&this.projectList.has(e.id))this.activeId=e.id;else{if(!e.name){e.name="Unnamed";var t=[];this.projectList.forEach((function(e){var n=e.name.match(/^Unnamed-?(\d+)?$/);n&&t.push(Number(n[1])||0)})),t.length>0&&(e.name+="-".concat(Math.max.apply(Math,t)+1))}var n=new dr(e);this.projectList.set(n.id,n),this.activeId=n.id}}},{key:"setProjectName",value:function(e,t){var n=this.projectList.get(t);n&&n.setName(e)}},{key:"currentProject",get:function(){return this.projectList.get(this.activeId)}},{key:"namedList",get:function(){var e=[];return this.projectList.forEach((function(t){e.push({id:t.id,name:t.name})})),e}}]),e}(),ur=Object(B.a)(sr.prototype,"activeId",[L.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fr=Object(B.a)(sr.prototype,"projectList",[ar],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object(B.a)(sr.prototype,"currentProject",[L.computed],Object.getOwnPropertyDescriptor(sr.prototype,"currentProject"),sr.prototype),Object(B.a)(sr.prototype,"namedList",[L.computed],Object.getOwnPropertyDescriptor(sr.prototype,"namedList"),sr.prototype),Object(B.a)(sr.prototype,"selectProject",[or],Object.getOwnPropertyDescriptor(sr.prototype,"selectProject"),sr.prototype),Object(B.a)(sr.prototype,"removeProject",[ir],Object.getOwnPropertyDescriptor(sr.prototype,"removeProject"),sr.prototype),Object(B.a)(sr.prototype,"addProject",[lr],Object.getOwnPropertyDescriptor(sr.prototype,"addProject"),sr.prototype),Object(B.a)(sr.prototype,"setProjectName",[cr],Object.getOwnPropertyDescriptor(sr.prototype,"setProjectName"),sr.prototype),sr);Object(L.configure)({enforceActions:"always",computedRequiresReaction:!0});var hr=n(203),gr=n(506),yr={MuiButton:{size:"small"},MuiButtonBase:{disableRipple:!0},MuiFilledInput:{margin:"dense"},MuiFormControl:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiInputLabel:{margin:"dense"},MuiListItem:{dense:!0},MuiOutlinedInput:{margin:"dense"},MuiFab:{size:"small"},MuiTable:{size:"small"},MuiTextField:{margin:"dense"},MuiToolbar:{variant:"dense"}},mr={MuiCssBaseline:{"@global":{html:{fontSize:"14px"},"input::-webkit-inner-spin-button":{marginLeft:"10px"},"input:enabled:read-write:-webkit-any(:focus,:hover)::-webkit-inner-spin-button":{opacity:.3},"::-webkit-scrollbar":{width:"4px",height:"4px"},"::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)"},"::-webkit-scrollbar-track":{background:"rgba(0, 0, 0, 0.1)"}}},MuiInputBase:{input:{"&[type=number]":{textAlign:"right"}}}},Or=Object(hr.a)({palette:{type:"dark",primary:{main:"#444"},secondary:{main:"#424242"},background:{paper:"rgb(37, 37, 37)",default:"rgb(30, 30, 30)",activityBar:"rgb(51, 51, 51)",titleBar:"rgb(50, 50, 50)",sidebar:"rgb(37, 37, 37)"},common:{black:"rgb(30,30,30)",white:"rgb(204,204,204)"},action:{hover:"rgba(255, 255, 255, 0.1)"}},bgPixel:{backgroundColor:"#fff",backgroundImage:"\n    linear-gradient(45deg, #ccc 25%, transparent 0, transparent 75%, #ccc 0),\n    linear-gradient(45deg, #ccc 25%, transparent 0, transparent 75%, #ccc 0)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 4px",backgroundRepeat:"repeat"},spacing:4,typography:{fontSize:13},transitions:{create:function(){return"none"}},shape:{borderRadius:0},props:yr,overrides:mr}),vr=Object(gr.a)(Or),wr=n(498),jr=n(438),xr=n(478),kr=n(483),Er=n(507);function Pr(){return Object(S.useContext)(z.a)}function Sr(){return Pr().workspace}function Cr(){return Pr().workspace.currentProject.layout}function Tr(){return Pr().workspace.currentProject}function Ar(){return Tr().style}function Ir(){return Ar().font}function $r(){return Tr().ui}var zr=n(484),Lr=n(206),Mr=n(12),Nr=n(435),Dr=n(191),Br=n.n(Dr);function Xr(e){return e.arrayBuffer?e.arrayBuffer():new Promise((function(t){var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(e){var n;t(null===(n=e.target)||void 0===n?void 0:n.result)}}))}var Yr=Object(z.c)((function(){var e=Object(S.useState)(!1),t=Object(Mr.a)(e,2),n=t[0],r=t[1],a=Ir().setFont;return C.a.createElement(Nr.a,{component:"label",variant:"contained",color:"primary",fullWidth:!0,size:"large",startIcon:n?C.a.createElement(xr.a,{size:22,color:"inherit"}):C.a.createElement(Br.a,null),disabled:n},"Select Font File",C.a.createElement("input",{hidden:!0,type:"file",onChange:function(e){if(e&&e.target&&e.target.files&&e.target.files[0]){var t=e.target.files[0];t.name.match(/\.([A-Z0-9]+)$/i)&&(r(!0),Xr(t).then((function(e){e instanceof ArrayBuffer?a(e).then((function(){return r(!1)})).catch((function(e){r(!1),window.alert(e.message)})):r(!1)})))}},accept:".ttf,.otf,.woff"}))})),Fr=n(480),Gr=n(479),Wr=function(e){var t=e.before,n=e.children,r=e.component,a=e.after,o=e.childrenWidth;return C.a.createElement(Gr.a,{component:r||"label",container:!0,spacing:2,wrap:"nowrap",justify:"center",alignItems:"center"},C.a.createElement(Gr.a,{item:!0,xs:4},"object"===typeof t?t:C.a.createElement(Lr.a,{noWrap:!0,align:"right"},t)),C.a.createElement(Gr.a,{item:!0,xs:o||5},n),C.a.createElement(Gr.a,{item:!0,xs:!0},"object"===typeof a?a:C.a.createElement(Lr.a,{noWrap:!0,variant:"caption"},a)))},Rr=Object(z.c)((function(){var e=Ir(),t=e.size,n=e.setSize;return C.a.createElement(Wr,{before:"Font Size:",after:"px"},C.a.createElement(Fr.a,{value:t,fullWidth:!0,type:"number",inputProps:{min:1},onChange:function(e){n(Number(e.target.value))}}))})),Hr=Object(z.c)((function(){var e=Ir(),t=e.lineHeight,n=e.setLineHeight;return C.a.createElement(Wr,{before:"Line Height:",after:"multiple"},C.a.createElement(Fr.a,{value:t,fullWidth:!0,type:"number",inputProps:{min:.5,step:.1},onChange:function(e){n(Number(e.target.value))}}))})),Jr=function(){return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Lr.a,null,"Font")),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Yr,null)),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Rr,null)),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Hr,null)))},Ur=n(501),Kr=Object(z.c)((function(){var e=Tr(),t=e.text,n=e.setText,r=Object(S.useState)(!1),a=Object(Mr.a)(r,2),o=a[0],i=a[1],l=Object(S.useState)(t),c=Object(Mr.a)(l,2),s=c[0],u=c[1];return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Lr.a,null,"Glyphs")),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Ur.a,{margin:"none",value:o?s:t,fullWidth:!0,multiline:!0,rows:4,variant:"outlined",inputProps:{spellCheck:!1},onChange:function(e){var r=e.target.value,a=Array.from(new Set(r.split(""))).join("");o?u(r):(u(a),a!==t&&n(a))},onCompositionStart:function(){return i(!0)},onCompositionEnd:function(){i(!1);var e=Array.from(new Set(s.split(""))).join("");u(e),e!==t&&n(e)}})))})),Vr=Object(z.c)((function(){var e=Cr(),t=e.padding,n=e.setPadding;return C.a.createElement(Wr,{before:"Padding:",after:"px"},C.a.createElement(Fr.a,{value:t,fullWidth:!0,type:"number",inputProps:{min:0},onChange:function(e){n(Number(e.target.value))}}))})),qr=Object(z.c)((function(){var e=Cr(),t=e.spacing,n=e.setSpacing;return C.a.createElement(Wr,{before:"Spacing:",after:"px"},C.a.createElement(Fr.a,{value:t,fullWidth:!0,type:"number",inputProps:{min:0},onChange:function(e){return n(Number(e.target.value))}}))})),Qr=function(){return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Lr.a,null,"Layout")),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Vr,null)),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(qr,null)))},Zr=function(e){var t=e.xAdvance,n=e.xOffset,r=e.yOffset,a=e.setXAdvance,o=e.setXOffset,i=e.setYOffset,l=function(e){return function(t){return e(Number(t.target.value))}};return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"xAdvance:",after:"px"},C.a.createElement(Fr.a,{value:t,fullWidth:!0,type:"number",onChange:l(a)}))),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"xOffset:",after:"px"},C.a.createElement(Fr.a,{value:n,fullWidth:!0,type:"number",onChange:l(o)}))),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"yOffset:",after:"px"},C.a.createElement(Fr.a,{value:r,fullWidth:!0,type:"number",onChange:l(i)}))))},_r=Object(z.c)((function(){var e=Tr().globalAdjustMetric,t=e.xAdvance,n=e.xOffset,r=e.yOffset,a=e.setXAdvance,o=e.setXOffset,i=e.setYOffset;return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Lr.a,null,"Global Metric Adjustment")),C.a.createElement(Zr,{xAdvance:t,xOffset:n,yOffset:r,setXAdvance:a,setXOffset:o,setYOffset:i}))})),ea=Object(kr.a)((function(){return Object(Er.a)({root:{overflow:"hidden",width:"256px"}})})),ta=function(){var e=ea();return C.a.createElement(wr.a,{bgcolor:"background.sidebar",display:"flex",flexDirection:"column",overflow:"hidden",className:e.root},C.a.createElement(wr.a,{bgcolor:"background.sidebar",boxShadow:2,padding:2},C.a.createElement(Lr.a,{variant:"subtitle2"},"Font Config")),C.a.createElement(wr.a,{flex:1,height:0,overflow:"hidden auto"},C.a.createElement(Kr,null),C.a.createElement(zr.a,null),C.a.createElement(Jr,null),C.a.createElement(zr.a,null),C.a.createElement(Qr,null),C.a.createElement(zr.a,null),C.a.createElement(_r,null)))},na=n(34),ra=n(208),aa=n(194),oa=n.n(aa),ia=n(193),la=n.n(ia),ca=n(509),sa=n(192),ua=n.n(sa),fa=n(114);function pa(e,t){return e.replace(/\$\w+\$/gi,(function(e){var n=t[e.replace(/\$/g,"")];return"undefined"==="".concat(n)?"":"".concat(n)}))}function da(e){var t=e.info,n=e.common,r=e.pages,a=e.chars,o=e.kernings,i=new DOMParser,l=document.implementation.createDocument("","font",null),c=i.parseFromString(pa('<info face="$face$" size="$size$" bold="$bold$" italic="$italic$" charset="$charset$" unicode="$unicode$" stretchH="$stretchH$" smooth="$smooth$" aa="$aa$" padding="$padding$" spacing="$spacing$" />',t),"text/xml");l.documentElement.appendChild(c.childNodes[0]);var s=i.parseFromString(pa('<common lineHeight="$lineHeight$" base="$base$" scaleW="$scaleW$" scaleH="$scaleH$" pages="$pages$" packed="$packed$" />',n),"text/xml");l.documentElement.appendChild(s.childNodes[0]);var u=i.parseFromString("<pages>".concat(r.map((function(e){return pa('<page id="$id$" file="$file$" />',e)})),"</pages>"),"text/xml");l.documentElement.appendChild(u.childNodes[0]);var f=i.parseFromString(pa('<chars count="$count$" />',a),"text/xml");if(a.list.forEach((function(e){var t=i.parseFromString(pa('<char id="$id$" x="$x$" y="$y$" width="$width$" height="$height$" xoffset="$xoffset$" yoffset="$yoffset$" xadvance="$xadvance$" page="$page$" chnl="$chnl$" />',e),"text/xml");f.childNodes[0].appendChild(t.childNodes[0])})),l.documentElement.appendChild(f.childNodes[0]),o.count){var p=i.parseFromString(pa('<kernings count="$count$" />',o),"text/xml");o.list.forEach((function(e){var t=i.parseFromString(pa('<kerning first="$first$" second="$second$" amount="$amount$" />',e),"text/xml");p.childNodes[0].appendChild(t.childNodes[0])})),l.documentElement.appendChild(p.childNodes[0])}return'<?xml version="1.0" encoding="UTF-8"?>'.concat((new XMLSerializer).serializeToString(l))}function ba(e){var t=e.info,n=e.common,r=e.pages,a=e.chars,o=e.kernings,i="";return i+=pa('Font.info = {\n\tface = "$face$",\n\tfile = "$file$",\n\tsize = $size$,\n\tbold = $bold$,\n\titalic = $italic$,\n\tcharset = $charset$\n\tunicode = $unicode$,\n\tstretchH = $stretchH$,\n\tsmooth = $smooth$,\n\taa = $aa$,\n\tpadding = {$padding$},\n\tspacing = $spacing$,\n\tcharsCount = $charsCount$,\n\tkerningsCounts = $kerningsCounts$\n}\n\n',Object(U.a)(Object(U.a)({},t),{},{charset:t.charset||'""',charsCount:a.count,kerningsCounts:o.count,file:r[0].file})),i+=pa("Font.common = {\n\tlineHeight = $lineHeight$,\n\tbase = $base$,\n\tscaleW = $scaleW$,\n\tscaleH = $scaleH$,\n\tpages = $pages$,\n\tpacked = $packed$\n}\n\n",n),i+="Font.pages = {\n",i+=r.map((function(e){return pa('\t{ id=$id$, file="$file$" }',e)})).join(",\n"),i+="\n}\n\n",i+="Font.chars = {\n",i+=a.list.map((function(e){return pa("\t{\n\t\tid = $id$,\n\t\tx = $x$,\n\t\ty = $y$,\n\t\twidth = $width$,\n\t\theight = $height$,\n\t\txoffset = $xoffset$,\n\t\tyoffset = $yoffset$,\n\t\txadvance = $xadvance$,\n\t\tpage = 0,\n\t\tchnl = 15\n\t}",e)})).join(",\n"),i+="\n}\n\n",i+="Font.kerning = {\n",i+=o.list.map((function(e){return pa("\t{first = $first$, second = $second$, amount = $amount$}",e)})).join(",\n"),"local Font = {}\n\n".concat((i+="\n}").replace(/\t/g,"    "),"\n\nreturn Font\n")}function ha(e){var t=e.info,n=e.common,r=e.pages,a=e.chars,o=e.kernings,i="";return i+=pa('info face="$face$" size=$size$ bold=$bold$ italic=$italic$ charset=$charset$ unicode=$unicode$ stretchH=$stretchH$ smooth=$smooth$ aa=$aa$ padding=$padding$ spacing=$spacing$\n',Object(U.a)(Object(U.a)({},t),{},{charset:t.charset||'""'})),i+=pa("common lineHeight=$lineHeight$ base=$base$ scaleW=$scaleW$ scaleH=$scaleH$ pages=$pages$ packed=$packed$\n",n),r.forEach((function(e){i+=pa('page id=$id$ file="$file$"\n',e)})),i+=pa("chars count=$count$\n",a),a.list.forEach((function(e){i+=pa("char id=$id$ x=$x$ y=$y$ width=$width$ height=$height$ xoffset=$xoffset$ yoffset=$yoffset$ xadvance=$xadvance$ page=$page$ chnl=$chnl$\n",e)})),o.count&&(i+=pa("kernings count=$count$\n",o),o.list.forEach((function(e){i+=pa("kerning first=$first$ second=$second$ amount=$amount$\n",e)}))),i}function ga(e){var t=e.name,n=e.style,r=e.layout,a=e.globalAdjustMetric,o=e.glyphList,i=e.ui,l=i.width,c=i.height,s=n.font,u=s.opentype,f=s.size,p=1;u&&(p=1/u.unitsPerEm*f);var d={face:n.font.family,size:n.font.size,bold:0,italic:0,charset:"",unicode:1,stretchH:100,smooth:1,aa:1,padding:new Array(4).fill(r.padding),spacing:new Array(2).fill(r.spacing)},b={lineHeight:n.font.size,base:n.font.size,scaleW:l,scaleH:c,pages:1,packed:0},h=[{id:0,file:"".concat(t,".png")}],g={count:o.length,list:[]},y={count:0,list:[]};return o.forEach((function(e){var t=!(!e.width||!e.height);g.list.push({letter:e.letter,id:e.letter.charCodeAt(0),source:e.source,x:e.x,y:e.y,width:t?e.width+2*r.padding:0,height:t?e.height+2*r.padding:0,xoffset:a.xOffset+e.adjustMetric.xOffset-(t?e.trimOffsetLeft:0),yoffset:a.yOffset+e.adjustMetric.yOffset-(t?e.trimOffsetTop:0),xadvance:Math.ceil(e.fontWidth)+a.xAdvance+e.adjustMetric.xAdvance,page:0,chnl:15}),u?o.forEach((function(t){var n=t.letter,r=Math.round(u.getKerningValue(u.charToGlyphIndex(e.letter),u.charToGlyphIndex(n))*p+(e.kerning.get(n)||0));r&&y.list.push({first:e.letter.charCodeAt(0),second:n.charCodeAt(0),amount:r})})):e.kerning.forEach((function(t,n){t&&y.list.push({first:e.letter.charCodeAt(0),second:n.charCodeAt(0),amount:t})}))})),y.count=y.list.length,g.list.sort((function(e,t){return e.id-t.id})),{info:d,common:b,pages:h,chars:g,kernings:y}}var ya=n(27),ma=ya.Reader,Oa=ya.Writer,va=ya.util,wa=ya.roots.default||(ya.roots.default={}),ja=(wa.Metric=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.xAdvance=0,e.prototype.xOffset=0,e.prototype.yOffset=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oa.create()),null!=e.xAdvance&&Object.hasOwnProperty.call(e,"xAdvance")&&t.uint32(8).sint32(e.xAdvance),null!=e.xOffset&&Object.hasOwnProperty.call(e,"xOffset")&&t.uint32(16).sint32(e.xOffset),null!=e.yOffset&&Object.hasOwnProperty.call(e,"yOffset")&&t.uint32(24).sint32(e.yOffset),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wa.Metric;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.xAdvance=e.sint32();break;case 2:r.xOffset=e.sint32();break;case 3:r.yOffset=e.sint32();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.xAdvance&&e.hasOwnProperty("xAdvance")&&!va.isInteger(e.xAdvance)?"xAdvance: integer expected":null!=e.xOffset&&e.hasOwnProperty("xOffset")&&!va.isInteger(e.xOffset)?"xOffset: integer expected":null!=e.yOffset&&e.hasOwnProperty("yOffset")&&!va.isInteger(e.yOffset)?"yOffset: integer expected":null},e.fromObject=function(e){if(e instanceof wa.Metric)return e;var t=new wa.Metric;return null!=e.xAdvance&&(t.xAdvance=0|e.xAdvance),null!=e.xOffset&&(t.xOffset=0|e.xOffset),null!=e.yOffset&&(t.yOffset=0|e.yOffset),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.xAdvance=0,n.xOffset=0,n.yOffset=0),null!=e.xAdvance&&e.hasOwnProperty("xAdvance")&&(n.xAdvance=e.xAdvance),null!=e.xOffset&&e.hasOwnProperty("xOffset")&&(n.xOffset=e.xOffset),null!=e.yOffset&&e.hasOwnProperty("yOffset")&&(n.yOffset=e.yOffset),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.GradientColor=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.id=0,e.prototype.offset=0,e.prototype.color="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oa.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(8).int32(e.id),null!=e.offset&&Object.hasOwnProperty.call(e,"offset")&&t.uint32(16).sint32(e.offset),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(26).string(e.color),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wa.GradientColor;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.id=e.int32();break;case 2:r.offset=e.sint32();break;case 3:r.color=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.id&&e.hasOwnProperty("id")&&!va.isInteger(e.id)?"id: integer expected":null!=e.offset&&e.hasOwnProperty("offset")&&!va.isInteger(e.offset)?"offset: integer expected":null!=e.color&&e.hasOwnProperty("color")&&!va.isString(e.color)?"color: string expected":null},e.fromObject=function(e){if(e instanceof wa.GradientColor)return e;var t=new wa.GradientColor;return null!=e.id&&(t.id=0|e.id),null!=e.offset&&(t.offset=0|e.offset),null!=e.color&&(t.color=String(e.color)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.id=0,n.offset=0,n.color=""),null!=e.id&&e.hasOwnProperty("id")&&(n.id=e.id),null!=e.offset&&e.hasOwnProperty("offset")&&(n.offset=e.offset),null!=e.color&&e.hasOwnProperty("color")&&(n.color=e.color),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.Gradient=function(){function e(e){if(this.palette=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=0,e.prototype.angle=0,e.prototype.palette=va.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Oa.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.angle&&Object.hasOwnProperty.call(e,"angle")&&t.uint32(21).float(e.angle),null!=e.palette&&e.palette.length)for(var n=0;n<e.palette.length;++n)wa.GradientColor.encode(e.palette[n],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wa.Gradient;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.type=e.int32();break;case 2:r.angle=e.float();break;case 3:r.palette&&r.palette.length||(r.palette=[]),r.palette.push(wa.GradientColor.decode(e,e.uint32()));break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type")&&!va.isInteger(e.type))return"type: integer expected";if(null!=e.angle&&e.hasOwnProperty("angle")&&"number"!==typeof e.angle)return"angle: number expected";if(null!=e.palette&&e.hasOwnProperty("palette")){if(!Array.isArray(e.palette))return"palette: array expected";for(var t=0;t<e.palette.length;++t){var n=wa.GradientColor.verify(e.palette[t]);if(n)return"palette."+n}}return null},e.fromObject=function(e){if(e instanceof wa.Gradient)return e;var t=new wa.Gradient;if(null!=e.type&&(t.type=0|e.type),null!=e.angle&&(t.angle=Number(e.angle)),e.palette){if(!Array.isArray(e.palette))throw TypeError(".Gradient.palette: array expected");t.palette=[];for(var n=0;n<e.palette.length;++n){if("object"!==typeof e.palette[n])throw TypeError(".Gradient.palette: object expected");t.palette[n]=wa.GradientColor.fromObject(e.palette[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.palette=[]),t.defaults&&(n.type=0,n.angle=0),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.angle&&e.hasOwnProperty("angle")&&(n.angle=t.json&&!isFinite(e.angle)?String(e.angle):e.angle),e.palette&&e.palette.length){n.palette=[];for(var r=0;r<e.palette.length;++r)n.palette[r]=wa.GradientColor.toObject(e.palette[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.PatternTexture=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.buffer=va.newBuffer([]),e.prototype.scale=0,e.prototype.repetition="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oa.create()),null!=e.buffer&&Object.hasOwnProperty.call(e,"buffer")&&t.uint32(10).bytes(e.buffer),null!=e.scale&&Object.hasOwnProperty.call(e,"scale")&&t.uint32(17).double(e.scale),null!=e.repetition&&Object.hasOwnProperty.call(e,"repetition")&&t.uint32(26).string(e.repetition),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wa.PatternTexture;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.buffer=e.bytes();break;case 2:r.scale=e.double();break;case 3:r.repetition=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.buffer&&e.hasOwnProperty("buffer")&&!(e.buffer&&"number"===typeof e.buffer.length||va.isString(e.buffer))?"buffer: buffer expected":null!=e.scale&&e.hasOwnProperty("scale")&&"number"!==typeof e.scale?"scale: number expected":null!=e.repetition&&e.hasOwnProperty("repetition")&&!va.isString(e.repetition)?"repetition: string expected":null},e.fromObject=function(e){if(e instanceof wa.PatternTexture)return e;var t=new wa.PatternTexture;return null!=e.buffer&&("string"===typeof e.buffer?va.base64.decode(e.buffer,t.buffer=va.newBuffer(va.base64.length(e.buffer)),0):e.buffer.length&&(t.buffer=e.buffer)),null!=e.scale&&(t.scale=Number(e.scale)),null!=e.repetition&&(t.repetition=String(e.repetition)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.buffer="":(n.buffer=[],t.bytes!==Array&&(n.buffer=va.newBuffer(n.buffer))),n.scale=0,n.repetition=""),null!=e.buffer&&e.hasOwnProperty("buffer")&&(n.buffer=t.bytes===String?va.base64.encode(e.buffer,0,e.buffer.length):t.bytes===Array?Array.prototype.slice.call(e.buffer):e.buffer),null!=e.scale&&e.hasOwnProperty("scale")&&(n.scale=t.json&&!isFinite(e.scale)?String(e.scale):e.scale),null!=e.repetition&&e.hasOwnProperty("repetition")&&(n.repetition=e.repetition),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.Fill=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=0,e.prototype.color="",e.prototype.gradient=null,e.prototype.patternTexture=null,e.prototype.width=0,e.prototype.lineCap="",e.prototype.lineJoin="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oa.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(18).string(e.color),null!=e.gradient&&Object.hasOwnProperty.call(e,"gradient")&&wa.Gradient.encode(e.gradient,t.uint32(26).fork()).ldelim(),null!=e.patternTexture&&Object.hasOwnProperty.call(e,"patternTexture")&&wa.PatternTexture.encode(e.patternTexture,t.uint32(34).fork()).ldelim(),null!=e.width&&Object.hasOwnProperty.call(e,"width")&&t.uint32(40).int32(e.width),null!=e.lineCap&&Object.hasOwnProperty.call(e,"lineCap")&&t.uint32(50).string(e.lineCap),null!=e.lineJoin&&Object.hasOwnProperty.call(e,"lineJoin")&&t.uint32(58).string(e.lineJoin),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wa.Fill;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.type=e.int32();break;case 2:r.color=e.string();break;case 3:r.gradient=wa.Gradient.decode(e,e.uint32());break;case 4:r.patternTexture=wa.PatternTexture.decode(e,e.uint32());break;case 5:r.width=e.int32();break;case 6:r.lineCap=e.string();break;case 7:r.lineJoin=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type")&&!va.isInteger(e.type))return"type: integer expected";if(null!=e.color&&e.hasOwnProperty("color")&&!va.isString(e.color))return"color: string expected";if(null!=e.gradient&&e.hasOwnProperty("gradient")){var t=wa.Gradient.verify(e.gradient);if(t)return"gradient."+t}if(null!=e.patternTexture&&e.hasOwnProperty("patternTexture")){var n=wa.PatternTexture.verify(e.patternTexture);if(n)return"patternTexture."+n}return null!=e.width&&e.hasOwnProperty("width")&&!va.isInteger(e.width)?"width: integer expected":null!=e.lineCap&&e.hasOwnProperty("lineCap")&&!va.isString(e.lineCap)?"lineCap: string expected":null!=e.lineJoin&&e.hasOwnProperty("lineJoin")&&!va.isString(e.lineJoin)?"lineJoin: string expected":null},e.fromObject=function(e){if(e instanceof wa.Fill)return e;var t=new wa.Fill;if(null!=e.type&&(t.type=0|e.type),null!=e.color&&(t.color=String(e.color)),null!=e.gradient){if("object"!==typeof e.gradient)throw TypeError(".Fill.gradient: object expected");t.gradient=wa.Gradient.fromObject(e.gradient)}if(null!=e.patternTexture){if("object"!==typeof e.patternTexture)throw TypeError(".Fill.patternTexture: object expected");t.patternTexture=wa.PatternTexture.fromObject(e.patternTexture)}return null!=e.width&&(t.width=0|e.width),null!=e.lineCap&&(t.lineCap=String(e.lineCap)),null!=e.lineJoin&&(t.lineJoin=String(e.lineJoin)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.type=0,n.color="",n.gradient=null,n.patternTexture=null,n.width=0,n.lineCap="",n.lineJoin=""),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.color&&e.hasOwnProperty("color")&&(n.color=e.color),null!=e.gradient&&e.hasOwnProperty("gradient")&&(n.gradient=wa.Gradient.toObject(e.gradient,t)),null!=e.patternTexture&&e.hasOwnProperty("patternTexture")&&(n.patternTexture=wa.PatternTexture.toObject(e.patternTexture,t)),null!=e.width&&e.hasOwnProperty("width")&&(n.width=e.width),null!=e.lineCap&&e.hasOwnProperty("lineCap")&&(n.lineCap=e.lineCap),null!=e.lineJoin&&e.hasOwnProperty("lineJoin")&&(n.lineJoin=e.lineJoin),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.Font=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.font=va.newBuffer([]),e.prototype.family="",e.prototype.size=0,e.prototype.lineHeight=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oa.create()),null!=e.font&&Object.hasOwnProperty.call(e,"font")&&t.uint32(10).bytes(e.font),null!=e.family&&Object.hasOwnProperty.call(e,"family")&&t.uint32(18).string(e.family),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(24).int32(e.size),null!=e.lineHeight&&Object.hasOwnProperty.call(e,"lineHeight")&&t.uint32(32).int32(e.lineHeight),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wa.Font;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.font=e.bytes();break;case 2:r.family=e.string();break;case 3:r.size=e.int32();break;case 4:r.lineHeight=e.int32();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.font&&e.hasOwnProperty("font")&&!(e.font&&"number"===typeof e.font.length||va.isString(e.font))?"font: buffer expected":null!=e.family&&e.hasOwnProperty("family")&&!va.isString(e.family)?"family: string expected":null!=e.size&&e.hasOwnProperty("size")&&!va.isInteger(e.size)?"size: integer expected":null!=e.lineHeight&&e.hasOwnProperty("lineHeight")&&!va.isInteger(e.lineHeight)?"lineHeight: integer expected":null},e.fromObject=function(e){if(e instanceof wa.Font)return e;var t=new wa.Font;return null!=e.font&&("string"===typeof e.font?va.base64.decode(e.font,t.font=va.newBuffer(va.base64.length(e.font)),0):e.font.length&&(t.font=e.font)),null!=e.family&&(t.family=String(e.family)),null!=e.size&&(t.size=0|e.size),null!=e.lineHeight&&(t.lineHeight=0|e.lineHeight),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.font="":(n.font=[],t.bytes!==Array&&(n.font=va.newBuffer(n.font))),n.family="",n.size=0,n.lineHeight=0),null!=e.font&&e.hasOwnProperty("font")&&(n.font=t.bytes===String?va.base64.encode(e.font,0,e.font.length):t.bytes===Array?Array.prototype.slice.call(e.font):e.font),null!=e.family&&e.hasOwnProperty("family")&&(n.family=e.family),null!=e.size&&e.hasOwnProperty("size")&&(n.size=e.size),null!=e.lineHeight&&e.hasOwnProperty("lineHeight")&&(n.lineHeight=e.lineHeight),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.GlyphFont=function(){function e(e){if(this.kerning={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.letter="",e.prototype.adjustMetric=null,e.prototype.kerning=va.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Oa.create()),null!=e.letter&&Object.hasOwnProperty.call(e,"letter")&&t.uint32(10).string(e.letter),null!=e.adjustMetric&&Object.hasOwnProperty.call(e,"adjustMetric")&&wa.Metric.encode(e.adjustMetric,t.uint32(18).fork()).ldelim(),null!=e.kerning&&Object.hasOwnProperty.call(e,"kerning"))for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)t.uint32(26).fork().uint32(10).string(n[r]).uint32(16).int32(e.kerning[n[r]]).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n,r,a=void 0===t?e.len:e.pos+t,o=new wa.GlyphFont;e.pos<a;){var i=e.uint32();switch(i>>>3){case 1:o.letter=e.string();break;case 2:o.adjustMetric=wa.Metric.decode(e,e.uint32());break;case 3:o.kerning===va.emptyObject&&(o.kerning={});var l=e.uint32()+e.pos;for(n="",r=0;e.pos<l;){var c=e.uint32();switch(c>>>3){case 1:n=e.string();break;case 2:r=e.int32();break;default:e.skipType(7&c)}}o.kerning[n]=r;break;default:e.skipType(7&i)}}return o},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.letter&&e.hasOwnProperty("letter")&&!va.isString(e.letter))return"letter: string expected";if(null!=e.adjustMetric&&e.hasOwnProperty("adjustMetric")){var t=wa.Metric.verify(e.adjustMetric);if(t)return"adjustMetric."+t}if(null!=e.kerning&&e.hasOwnProperty("kerning")){if(!va.isObject(e.kerning))return"kerning: object expected";for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)if(!va.isInteger(e.kerning[n[r]]))return"kerning: integer{k:string} expected"}return null},e.fromObject=function(e){if(e instanceof wa.GlyphFont)return e;var t=new wa.GlyphFont;if(null!=e.letter&&(t.letter=String(e.letter)),null!=e.adjustMetric){if("object"!==typeof e.adjustMetric)throw TypeError(".GlyphFont.adjustMetric: object expected");t.adjustMetric=wa.Metric.fromObject(e.adjustMetric)}if(e.kerning){if("object"!==typeof e.kerning)throw TypeError(".GlyphFont.kerning: object expected");t.kerning={};for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)t.kerning[n[r]]=0|e.kerning[n[r]]}return t},e.toObject=function(e,t){t||(t={});var n,r={};if((t.objects||t.defaults)&&(r.kerning={}),t.defaults&&(r.letter="",r.adjustMetric=null),null!=e.letter&&e.hasOwnProperty("letter")&&(r.letter=e.letter),null!=e.adjustMetric&&e.hasOwnProperty("adjustMetric")&&(r.adjustMetric=wa.Metric.toObject(e.adjustMetric,t)),e.kerning&&(n=Object.keys(e.kerning)).length){r.kerning={};for(var a=0;a<n.length;++a)r.kerning[n[a]]=e.kerning[n[a]]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.GlyphImage=function(){function e(e){if(this.kerning={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.letter="",e.prototype.adjustMetric=null,e.prototype.buffer=va.newBuffer([]),e.prototype.fileName="",e.prototype.fileType="",e.prototype.selected=!1,e.prototype.kerning=va.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Oa.create()),null!=e.letter&&Object.hasOwnProperty.call(e,"letter")&&t.uint32(10).string(e.letter),null!=e.adjustMetric&&Object.hasOwnProperty.call(e,"adjustMetric")&&wa.Metric.encode(e.adjustMetric,t.uint32(18).fork()).ldelim(),null!=e.buffer&&Object.hasOwnProperty.call(e,"buffer")&&t.uint32(26).bytes(e.buffer),null!=e.fileName&&Object.hasOwnProperty.call(e,"fileName")&&t.uint32(34).string(e.fileName),null!=e.fileType&&Object.hasOwnProperty.call(e,"fileType")&&t.uint32(42).string(e.fileType),null!=e.selected&&Object.hasOwnProperty.call(e,"selected")&&t.uint32(48).bool(e.selected),null!=e.kerning&&Object.hasOwnProperty.call(e,"kerning"))for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)t.uint32(58).fork().uint32(10).string(n[r]).uint32(16).int32(e.kerning[n[r]]).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n,r,a=void 0===t?e.len:e.pos+t,o=new wa.GlyphImage;e.pos<a;){var i=e.uint32();switch(i>>>3){case 1:o.letter=e.string();break;case 2:o.adjustMetric=wa.Metric.decode(e,e.uint32());break;case 3:o.buffer=e.bytes();break;case 4:o.fileName=e.string();break;case 5:o.fileType=e.string();break;case 6:o.selected=e.bool();break;case 7:o.kerning===va.emptyObject&&(o.kerning={});var l=e.uint32()+e.pos;for(n="",r=0;e.pos<l;){var c=e.uint32();switch(c>>>3){case 1:n=e.string();break;case 2:r=e.int32();break;default:e.skipType(7&c)}}o.kerning[n]=r;break;default:e.skipType(7&i)}}return o},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.letter&&e.hasOwnProperty("letter")&&!va.isString(e.letter))return"letter: string expected";if(null!=e.adjustMetric&&e.hasOwnProperty("adjustMetric")){var t=wa.Metric.verify(e.adjustMetric);if(t)return"adjustMetric."+t}if(null!=e.buffer&&e.hasOwnProperty("buffer")&&!(e.buffer&&"number"===typeof e.buffer.length||va.isString(e.buffer)))return"buffer: buffer expected";if(null!=e.fileName&&e.hasOwnProperty("fileName")&&!va.isString(e.fileName))return"fileName: string expected";if(null!=e.fileType&&e.hasOwnProperty("fileType")&&!va.isString(e.fileType))return"fileType: string expected";if(null!=e.selected&&e.hasOwnProperty("selected")&&"boolean"!==typeof e.selected)return"selected: boolean expected";if(null!=e.kerning&&e.hasOwnProperty("kerning")){if(!va.isObject(e.kerning))return"kerning: object expected";for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)if(!va.isInteger(e.kerning[n[r]]))return"kerning: integer{k:string} expected"}return null},e.fromObject=function(e){if(e instanceof wa.GlyphImage)return e;var t=new wa.GlyphImage;if(null!=e.letter&&(t.letter=String(e.letter)),null!=e.adjustMetric){if("object"!==typeof e.adjustMetric)throw TypeError(".GlyphImage.adjustMetric: object expected");t.adjustMetric=wa.Metric.fromObject(e.adjustMetric)}if(null!=e.buffer&&("string"===typeof e.buffer?va.base64.decode(e.buffer,t.buffer=va.newBuffer(va.base64.length(e.buffer)),0):e.buffer.length&&(t.buffer=e.buffer)),null!=e.fileName&&(t.fileName=String(e.fileName)),null!=e.fileType&&(t.fileType=String(e.fileType)),null!=e.selected&&(t.selected=Boolean(e.selected)),e.kerning){if("object"!==typeof e.kerning)throw TypeError(".GlyphImage.kerning: object expected");t.kerning={};for(var n=Object.keys(e.kerning),r=0;r<n.length;++r)t.kerning[n[r]]=0|e.kerning[n[r]]}return t},e.toObject=function(e,t){t||(t={});var n,r={};if((t.objects||t.defaults)&&(r.kerning={}),t.defaults&&(r.letter="",r.adjustMetric=null,t.bytes===String?r.buffer="":(r.buffer=[],t.bytes!==Array&&(r.buffer=va.newBuffer(r.buffer))),r.fileName="",r.fileType="",r.selected=!1),null!=e.letter&&e.hasOwnProperty("letter")&&(r.letter=e.letter),null!=e.adjustMetric&&e.hasOwnProperty("adjustMetric")&&(r.adjustMetric=wa.Metric.toObject(e.adjustMetric,t)),null!=e.buffer&&e.hasOwnProperty("buffer")&&(r.buffer=t.bytes===String?va.base64.encode(e.buffer,0,e.buffer.length):t.bytes===Array?Array.prototype.slice.call(e.buffer):e.buffer),null!=e.fileName&&e.hasOwnProperty("fileName")&&(r.fileName=e.fileName),null!=e.fileType&&e.hasOwnProperty("fileType")&&(r.fileType=e.fileType),null!=e.selected&&e.hasOwnProperty("selected")&&(r.selected=e.selected),e.kerning&&(n=Object.keys(e.kerning)).length){r.kerning={};for(var a=0;a<n.length;++a)r.kerning[n[a]]=e.kerning[n[a]]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.Layout=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.padding=0,e.prototype.spacing=0,e.prototype.power=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oa.create()),null!=e.padding&&Object.hasOwnProperty.call(e,"padding")&&t.uint32(8).int32(e.padding),null!=e.spacing&&Object.hasOwnProperty.call(e,"spacing")&&t.uint32(16).int32(e.spacing),null!=e.power&&Object.hasOwnProperty.call(e,"power")&&t.uint32(24).bool(e.power),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wa.Layout;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.padding=e.int32();break;case 2:r.spacing=e.int32();break;case 3:r.power=e.bool();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.padding&&e.hasOwnProperty("padding")&&!va.isInteger(e.padding)?"padding: integer expected":null!=e.spacing&&e.hasOwnProperty("spacing")&&!va.isInteger(e.spacing)?"spacing: integer expected":null!=e.power&&e.hasOwnProperty("power")&&"boolean"!==typeof e.power?"power: boolean expected":null},e.fromObject=function(e){if(e instanceof wa.Layout)return e;var t=new wa.Layout;return null!=e.padding&&(t.padding=0|e.padding),null!=e.spacing&&(t.spacing=0|e.spacing),null!=e.power&&(t.power=Boolean(e.power)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.padding=0,n.spacing=0,n.power=!1),null!=e.padding&&e.hasOwnProperty("padding")&&(n.padding=e.padding),null!=e.spacing&&e.hasOwnProperty("spacing")&&(n.spacing=e.spacing),null!=e.power&&e.hasOwnProperty("power")&&(n.power=e.power),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.Shadow=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.color="",e.prototype.blur=0,e.prototype.offsetX=0,e.prototype.offsetY=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oa.create()),null!=e.color&&Object.hasOwnProperty.call(e,"color")&&t.uint32(10).string(e.color),null!=e.blur&&Object.hasOwnProperty.call(e,"blur")&&t.uint32(16).int32(e.blur),null!=e.offsetX&&Object.hasOwnProperty.call(e,"offsetX")&&t.uint32(24).sint32(e.offsetX),null!=e.offsetY&&Object.hasOwnProperty.call(e,"offsetY")&&t.uint32(32).sint32(e.offsetY),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wa.Shadow;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.color=e.string();break;case 2:r.blur=e.int32();break;case 3:r.offsetX=e.sint32();break;case 4:r.offsetY=e.sint32();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.color&&e.hasOwnProperty("color")&&!va.isString(e.color)?"color: string expected":null!=e.blur&&e.hasOwnProperty("blur")&&!va.isInteger(e.blur)?"blur: integer expected":null!=e.offsetX&&e.hasOwnProperty("offsetX")&&!va.isInteger(e.offsetX)?"offsetX: integer expected":null!=e.offsetY&&e.hasOwnProperty("offsetY")&&!va.isInteger(e.offsetY)?"offsetY: integer expected":null},e.fromObject=function(e){if(e instanceof wa.Shadow)return e;var t=new wa.Shadow;return null!=e.color&&(t.color=String(e.color)),null!=e.blur&&(t.blur=0|e.blur),null!=e.offsetX&&(t.offsetX=0|e.offsetX),null!=e.offsetY&&(t.offsetY=0|e.offsetY),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.color="",n.blur=0,n.offsetX=0,n.offsetY=0),null!=e.color&&e.hasOwnProperty("color")&&(n.color=e.color),null!=e.blur&&e.hasOwnProperty("blur")&&(n.blur=e.blur),null!=e.offsetX&&e.hasOwnProperty("offsetX")&&(n.offsetX=e.offsetX),null!=e.offsetY&&e.hasOwnProperty("offsetY")&&(n.offsetY=e.offsetY),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.Style=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.font=null,e.prototype.fill=null,e.prototype.useStroke=!1,e.prototype.stroke=null,e.prototype.useShadow=!1,e.prototype.shadow=null,e.prototype.bgColor="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oa.create()),null!=e.font&&Object.hasOwnProperty.call(e,"font")&&wa.Font.encode(e.font,t.uint32(10).fork()).ldelim(),null!=e.fill&&Object.hasOwnProperty.call(e,"fill")&&wa.Fill.encode(e.fill,t.uint32(18).fork()).ldelim(),null!=e.useStroke&&Object.hasOwnProperty.call(e,"useStroke")&&t.uint32(24).bool(e.useStroke),null!=e.stroke&&Object.hasOwnProperty.call(e,"stroke")&&wa.Fill.encode(e.stroke,t.uint32(34).fork()).ldelim(),null!=e.useShadow&&Object.hasOwnProperty.call(e,"useShadow")&&t.uint32(40).bool(e.useShadow),null!=e.shadow&&Object.hasOwnProperty.call(e,"shadow")&&wa.Shadow.encode(e.shadow,t.uint32(50).fork()).ldelim(),null!=e.bgColor&&Object.hasOwnProperty.call(e,"bgColor")&&t.uint32(58).string(e.bgColor),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wa.Style;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.font=wa.Font.decode(e,e.uint32());break;case 2:r.fill=wa.Fill.decode(e,e.uint32());break;case 3:r.useStroke=e.bool();break;case 4:r.stroke=wa.Fill.decode(e,e.uint32());break;case 5:r.useShadow=e.bool();break;case 6:r.shadow=wa.Shadow.decode(e,e.uint32());break;case 7:r.bgColor=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.font&&e.hasOwnProperty("font")){var t=wa.Font.verify(e.font);if(t)return"font."+t}if(null!=e.fill&&e.hasOwnProperty("fill")){var n=wa.Fill.verify(e.fill);if(n)return"fill."+n}if(null!=e.useStroke&&e.hasOwnProperty("useStroke")&&"boolean"!==typeof e.useStroke)return"useStroke: boolean expected";if(null!=e.stroke&&e.hasOwnProperty("stroke")){var r=wa.Fill.verify(e.stroke);if(r)return"stroke."+r}if(null!=e.useShadow&&e.hasOwnProperty("useShadow")&&"boolean"!==typeof e.useShadow)return"useShadow: boolean expected";if(null!=e.shadow&&e.hasOwnProperty("shadow")){var a=wa.Shadow.verify(e.shadow);if(a)return"shadow."+a}return null!=e.bgColor&&e.hasOwnProperty("bgColor")&&!va.isString(e.bgColor)?"bgColor: string expected":null},e.fromObject=function(e){if(e instanceof wa.Style)return e;var t=new wa.Style;if(null!=e.font){if("object"!==typeof e.font)throw TypeError(".Style.font: object expected");t.font=wa.Font.fromObject(e.font)}if(null!=e.fill){if("object"!==typeof e.fill)throw TypeError(".Style.fill: object expected");t.fill=wa.Fill.fromObject(e.fill)}if(null!=e.useStroke&&(t.useStroke=Boolean(e.useStroke)),null!=e.stroke){if("object"!==typeof e.stroke)throw TypeError(".Style.stroke: object expected");t.stroke=wa.Fill.fromObject(e.stroke)}if(null!=e.useShadow&&(t.useShadow=Boolean(e.useShadow)),null!=e.shadow){if("object"!==typeof e.shadow)throw TypeError(".Style.shadow: object expected");t.shadow=wa.Shadow.fromObject(e.shadow)}return null!=e.bgColor&&(t.bgColor=String(e.bgColor)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.font=null,n.fill=null,n.useStroke=!1,n.stroke=null,n.useShadow=!1,n.shadow=null,n.bgColor=""),null!=e.font&&e.hasOwnProperty("font")&&(n.font=wa.Font.toObject(e.font,t)),null!=e.fill&&e.hasOwnProperty("fill")&&(n.fill=wa.Fill.toObject(e.fill,t)),null!=e.useStroke&&e.hasOwnProperty("useStroke")&&(n.useStroke=e.useStroke),null!=e.stroke&&e.hasOwnProperty("stroke")&&(n.stroke=wa.Fill.toObject(e.stroke,t)),null!=e.useShadow&&e.hasOwnProperty("useShadow")&&(n.useShadow=e.useShadow),null!=e.shadow&&e.hasOwnProperty("shadow")&&(n.shadow=wa.Shadow.toObject(e.shadow,t)),null!=e.bgColor&&e.hasOwnProperty("bgColor")&&(n.bgColor=e.bgColor),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.Ui=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.previewText="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Oa.create()),null!=e.previewText&&Object.hasOwnProperty.call(e,"previewText")&&t.uint32(10).string(e.previewText),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new wa.Ui;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:r.previewText=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==typeof e||null===e?"object expected":null!=e.previewText&&e.hasOwnProperty("previewText")&&!va.isString(e.previewText)?"previewText: string expected":null},e.fromObject=function(e){if(e instanceof wa.Ui)return e;var t=new wa.Ui;return null!=e.previewText&&(t.previewText=String(e.previewText)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.previewText=""),null!=e.previewText&&e.hasOwnProperty("previewText")&&(n.previewText=e.previewText),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),wa.Project=function(){function e(e){if(this.glyphs={},this.glyphImages=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.id=va.Long?va.Long.fromBits(0,0,!1):0,e.prototype.name="",e.prototype.text="",e.prototype.glyphs=va.emptyObject,e.prototype.glyphImages=va.emptyArray,e.prototype.style=null,e.prototype.layout=null,e.prototype.globalAdjustMetric=null,e.prototype.ui=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Oa.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(8).int64(e.id),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.text&&Object.hasOwnProperty.call(e,"text")&&t.uint32(26).string(e.text),null!=e.glyphs&&Object.hasOwnProperty.call(e,"glyphs"))for(var n=Object.keys(e.glyphs),r=0;r<n.length;++r)t.uint32(34).fork().uint32(10).string(n[r]),wa.GlyphFont.encode(e.glyphs[n[r]],t.uint32(18).fork()).ldelim().ldelim();if(null!=e.glyphImages&&e.glyphImages.length)for(var a=0;a<e.glyphImages.length;++a)wa.GlyphImage.encode(e.glyphImages[a],t.uint32(42).fork()).ldelim();return null!=e.style&&Object.hasOwnProperty.call(e,"style")&&wa.Style.encode(e.style,t.uint32(50).fork()).ldelim(),null!=e.layout&&Object.hasOwnProperty.call(e,"layout")&&wa.Layout.encode(e.layout,t.uint32(58).fork()).ldelim(),null!=e.globalAdjustMetric&&Object.hasOwnProperty.call(e,"globalAdjustMetric")&&wa.Metric.encode(e.globalAdjustMetric,t.uint32(66).fork()).ldelim(),null!=e.ui&&Object.hasOwnProperty.call(e,"ui")&&wa.Ui.encode(e.ui,t.uint32(74).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ma||(e=ma.create(e));for(var n,r,a=void 0===t?e.len:e.pos+t,o=new wa.Project;e.pos<a;){var i=e.uint32();switch(i>>>3){case 1:o.id=e.int64();break;case 2:o.name=e.string();break;case 3:o.text=e.string();break;case 4:o.glyphs===va.emptyObject&&(o.glyphs={});var l=e.uint32()+e.pos;for(n="",r=null;e.pos<l;){var c=e.uint32();switch(c>>>3){case 1:n=e.string();break;case 2:r=wa.GlyphFont.decode(e,e.uint32());break;default:e.skipType(7&c)}}o.glyphs[n]=r;break;case 5:o.glyphImages&&o.glyphImages.length||(o.glyphImages=[]),o.glyphImages.push(wa.GlyphImage.decode(e,e.uint32()));break;case 6:o.style=wa.Style.decode(e,e.uint32());break;case 7:o.layout=wa.Layout.decode(e,e.uint32());break;case 8:o.globalAdjustMetric=wa.Metric.decode(e,e.uint32());break;case 9:o.ui=wa.Ui.decode(e,e.uint32());break;default:e.skipType(7&i)}}return o},e.decodeDelimited=function(e){return e instanceof ma||(e=new ma(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==typeof e||null===e)return"object expected";if(null!=e.id&&e.hasOwnProperty("id")&&!va.isInteger(e.id)&&!(e.id&&va.isInteger(e.id.low)&&va.isInteger(e.id.high)))return"id: integer|Long expected";if(null!=e.name&&e.hasOwnProperty("name")&&!va.isString(e.name))return"name: string expected";if(null!=e.text&&e.hasOwnProperty("text")&&!va.isString(e.text))return"text: string expected";if(null!=e.glyphs&&e.hasOwnProperty("glyphs")){if(!va.isObject(e.glyphs))return"glyphs: object expected";for(var t=Object.keys(e.glyphs),n=0;n<t.length;++n){var r=wa.GlyphFont.verify(e.glyphs[t[n]]);if(r)return"glyphs."+r}}if(null!=e.glyphImages&&e.hasOwnProperty("glyphImages")){if(!Array.isArray(e.glyphImages))return"glyphImages: array expected";for(var a=0;a<e.glyphImages.length;++a){var o=wa.GlyphImage.verify(e.glyphImages[a]);if(o)return"glyphImages."+o}}if(null!=e.style&&e.hasOwnProperty("style")){var i=wa.Style.verify(e.style);if(i)return"style."+i}if(null!=e.layout&&e.hasOwnProperty("layout")){var l=wa.Layout.verify(e.layout);if(l)return"layout."+l}if(null!=e.globalAdjustMetric&&e.hasOwnProperty("globalAdjustMetric")){var c=wa.Metric.verify(e.globalAdjustMetric);if(c)return"globalAdjustMetric."+c}if(null!=e.ui&&e.hasOwnProperty("ui")){var s=wa.Ui.verify(e.ui);if(s)return"ui."+s}return null},e.fromObject=function(e){if(e instanceof wa.Project)return e;var t=new wa.Project;if(null!=e.id&&(va.Long?(t.id=va.Long.fromValue(e.id)).unsigned=!1:"string"===typeof e.id?t.id=parseInt(e.id,10):"number"===typeof e.id?t.id=e.id:"object"===typeof e.id&&(t.id=new va.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber())),null!=e.name&&(t.name=String(e.name)),null!=e.text&&(t.text=String(e.text)),e.glyphs){if("object"!==typeof e.glyphs)throw TypeError(".Project.glyphs: object expected");t.glyphs={};for(var n=Object.keys(e.glyphs),r=0;r<n.length;++r){if("object"!==typeof e.glyphs[n[r]])throw TypeError(".Project.glyphs: object expected");t.glyphs[n[r]]=wa.GlyphFont.fromObject(e.glyphs[n[r]])}}if(e.glyphImages){if(!Array.isArray(e.glyphImages))throw TypeError(".Project.glyphImages: array expected");t.glyphImages=[];for(var a=0;a<e.glyphImages.length;++a){if("object"!==typeof e.glyphImages[a])throw TypeError(".Project.glyphImages: object expected");t.glyphImages[a]=wa.GlyphImage.fromObject(e.glyphImages[a])}}if(null!=e.style){if("object"!==typeof e.style)throw TypeError(".Project.style: object expected");t.style=wa.Style.fromObject(e.style)}if(null!=e.layout){if("object"!==typeof e.layout)throw TypeError(".Project.layout: object expected");t.layout=wa.Layout.fromObject(e.layout)}if(null!=e.globalAdjustMetric){if("object"!==typeof e.globalAdjustMetric)throw TypeError(".Project.globalAdjustMetric: object expected");t.globalAdjustMetric=wa.Metric.fromObject(e.globalAdjustMetric)}if(null!=e.ui){if("object"!==typeof e.ui)throw TypeError(".Project.ui: object expected");t.ui=wa.Ui.fromObject(e.ui)}return t},e.toObject=function(e,t){t||(t={});var n,r={};if((t.arrays||t.defaults)&&(r.glyphImages=[]),(t.objects||t.defaults)&&(r.glyphs={}),t.defaults){if(va.Long){var a=new va.Long(0,0,!1);r.id=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else r.id=t.longs===String?"0":0;r.name="",r.text="",r.style=null,r.layout=null,r.globalAdjustMetric=null,r.ui=null}if(null!=e.id&&e.hasOwnProperty("id")&&("number"===typeof e.id?r.id=t.longs===String?String(e.id):e.id:r.id=t.longs===String?va.Long.prototype.toString.call(e.id):t.longs===Number?new va.LongBits(e.id.low>>>0,e.id.high>>>0).toNumber():e.id),null!=e.name&&e.hasOwnProperty("name")&&(r.name=e.name),null!=e.text&&e.hasOwnProperty("text")&&(r.text=e.text),e.glyphs&&(n=Object.keys(e.glyphs)).length){r.glyphs={};for(var o=0;o<n.length;++o)r.glyphs[n[o]]=wa.GlyphFont.toObject(e.glyphs[n[o]],t)}if(e.glyphImages&&e.glyphImages.length){r.glyphImages=[];for(var i=0;i<e.glyphImages.length;++i)r.glyphImages[i]=wa.GlyphImage.toObject(e.glyphImages[i],t)}return null!=e.style&&e.hasOwnProperty("style")&&(r.style=wa.Style.toObject(e.style,t)),null!=e.layout&&e.hasOwnProperty("layout")&&(r.layout=wa.Layout.toObject(e.layout,t)),null!=e.globalAdjustMetric&&e.hasOwnProperty("globalAdjustMetric")&&(r.globalAdjustMetric=wa.Metric.toObject(e.globalAdjustMetric,t)),null!=e.ui&&e.hasOwnProperty("ui")&&(r.ui=wa.Ui.toObject(e.ui,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,ya.util.toJSONOptions)},e}(),function(){return new Uint8Array([].concat(Object(Se.a)("SnowBambooBMF".split("").map((function(e){return e.charCodeAt(0)}))),[1,0,0]))});function xa(e){if(e.byteLength<17)throw new Error("error");var t=ja(),n=new Uint8Array(e),r=n.slice(0,t.byteLength),a=!0;if(t.forEach((function(e,t){r[t]!==e&&(a=!1)})),!a)throw new Error("unknow file");return function(e){var t,n,r,a,o,i,l,c,s=Object(U.a)({},e),u=new Map;return(null===s||void 0===s||null===(t=s.style)||void 0===t||null===(n=t.font)||void 0===n?void 0:n.font)&&(s.style.font=Object(U.a)(Object(U.a)({},s.style.font),{},{font:s.style.font.font.slice().buffer})),(null===s||void 0===s?void 0:s.glyphImages)&&s.glyphImages.forEach((function(e){if(e.buffer&&(e.buffer=e.buffer.slice().buffer),e.kerning){var t=new Map;Object.keys(e.kerning).forEach((function(n){e&&e.kerning&&e.kerning[n]&&t.set(n,e.kerning[n]||0)}))}})),(null===s||void 0===s?void 0:s.glyphs)&&Object.keys(s.glyphs).forEach((function(e){if(s&&s.glyphs&&s.glyphs[e]){var t=s.glyphs[e],n=new Map;t&&t.kerning&&Object.keys(t.kerning).forEach((function(e){t.kerning&&n.set(e,t.kerning[e]||0)})),u.set(e,Object(U.a)(Object(U.a)({},t),{},{kerning:n}))}})),(null===s||void 0===s||null===(r=s.style)||void 0===r||null===(a=r.fill)||void 0===a||null===(o=a.patternTexture)||void 0===o?void 0:o.buffer)&&(s.style.fill.patternTexture.buffer=s.style.fill.patternTexture.buffer.slice().buffer),(null===s||void 0===s||null===(i=s.style)||void 0===i||null===(l=i.stroke)||void 0===l||null===(c=l.patternTexture)||void 0===c?void 0:c.buffer)&&(s.style.stroke.patternTexture.buffer=s.style.stroke.patternTexture.buffer.slice().buffer),Object(U.a)(Object(U.a)({},s),{},{glyphs:u,glyphImages:new Set(s.glyphImages||[])})}(wa.Project.decode(n.slice(r.byteLength)))}var ka=n(485),Ea=n(486),Pa=n(487),Sa=n(488),Ca=n(500),Ta=n(510),Aa=function(e){var t=e.className,n=e.onSave,r=Tr().name,a=Object(S.useState)(!1),o=Object(Mr.a)(a,2),i=o[0],l=o[1],c=Object(S.useState)(0),s=Object(Mr.a)(c,2),u=s[0],f=s[1],p=Object(S.useState)([{id:0,ext:"fnt",type:"xml"},{id:1,ext:"xml",type:"xml"},{id:2,ext:"fnt",type:"text"},{id:3,ext:"text",type:"text"}]),d=Object(Mr.a)(p,1)[0],b=function(){l(!0)},h=function(){l(!1)};return Object(S.useEffect)((function(){return na.a.unbind("ctrl+shift+s,command+shift+s"),Object(na.a)("ctrl+shift+s,command+shift+s",b),function(){na.a.unbind("ctrl+shift+s,command+shift+s")}}),[]),C.a.createElement(C.a.Fragment,null,C.a.createElement(Nr.a,{className:t,title:"Export BitmapFont (\u2318\u21e7 + S)",onClick:b},"Export"),C.a.createElement(ka.a,{onClose:h,open:i,fullWidth:!0,maxWidth:"xs"},C.a.createElement(Ea.a,null,"Export Config"),C.a.createElement(Pa.a,{dividers:!0},C.a.createElement(Wr,{before:"Export Type:",childrenWidth:8},C.a.createElement(Ca.a,{displayEmpty:!0,value:u,onChange:function(e){f(e.target.value)}},d.map((function(e){return C.a.createElement(Ta.a,{value:e.id,key:e.id},"".concat(r,".").concat(e.ext," (BMFont ").concat(e.type.toUpperCase(),")"))}))))),C.a.createElement(Sa.a,null,C.a.createElement(Nr.a,{autoFocus:!0,onClick:function(){n&&n({ext:d[u].ext,type:d[u].type}),h()},color:"default"},"Save"))))},Ia=Object(kr.a)((function(e){var t=e.zIndex,n=e.spacing;return Object(Er.a)({root:{position:"relative",zIndex:t.appBar},appName:{fontSize:"1.25rem",fontWeight:"bolder",marginRight:n(4)},appNameSup:{fontWeight:"lighter",fontSize:"0.5em",marginLeft:"0.5rem"},btn:{textTransform:"none"}})})),$a=Object(z.c)((function(){var e=Ia(),t=Object(S.useState)({open:!1,component:null}),n=Object(Mr.a)(t,2),r=n[0],a=n[1],o=Sr(),i=Object(S.useRef)(null),l=o.addProject,c=o.currentProject,s=Object(S.useCallback)((function(e){return e.preventDefault(),l(),!1}),[l]),u=Object(S.useCallback)((function(e){return e.preventDefault(),function(e){e.style.font.font&&(e.style.font.font=new Uint8Array(e.style.font.font)),e.glyphImages.forEach((function(e){e.buffer&&(e.buffer=new Uint8Array(e.buffer))})),e.style.fill.patternTexture.buffer&&(e.style.fill.patternTexture.buffer=new Uint8Array(e.style.fill.patternTexture.buffer)),e.style.stroke.patternTexture.buffer&&(e.style.stroke.patternTexture.buffer=new Uint8Array(e.style.stroke.patternTexture.buffer));var t=wa.Project.create(e),n=wa.Project.encode(t).finish(),r=ja(),a=new Uint8Array(r.byteLength+n.byteLength);a.set(r,0),a.set(n,r.byteLength),Object(fa.saveAs)(new Blob([a]),"".concat(e.name,".sbf"))}(Object(L.toJS)(c)),!1}),[c]),f=Object(S.useCallback)((function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"xml",ext:"fnt"},n=new ua.a,r=e.packCanvas,a=e.name,o=ga(e),i="";switch(t.type){case"text":i=ha(o);break;case"lua":i=ba(o);break;default:i=da(o)}n.file("".concat(a,".").concat(t.ext),i),r&&r.toBlob((function(e){e&&n.file("".concat(a,".png"),e),n.generateAsync({type:"blob"}).then((function(e){return Object(fa.saveAs)(e,"".concat(a,".zip"))}))}))}(c,e)}),[c]),p=Object(S.useCallback)((function(e){return e.preventDefault(),i.current&&i.current.click(),!1}),[]);return Object(S.useEffect)((function(){return na.a.unbind("alt+n,control+n"),na.a.unbind("ctrl+s"),na.a.unbind("ctrl+o,command+o"),Object(na.a)("alt+n,control+n",s),Object(na.a)("ctrl+s",u),Object(na.a)("ctrl+o,command+o",p),function(){na.a.unbind("alt+n,control+n"),na.a.unbind("ctrl+s"),na.a.unbind("ctrl+o,command+o")}}),[s,p,u]),C.a.createElement(wr.a,{className:e.root,bgcolor:"background.titleBar",paddingX:4,display:"flex",alignItems:"center"},C.a.createElement(Lr.a,{variant:"h1",className:e.appName},"SnowB BMF",C.a.createElement("sup",{className:e.appNameSup},"BETA")),C.a.createElement(wr.a,{flex:"auto",paddingX:4},C.a.createElement(Nr.a,{className:e.btn,title:"New Project (ALT + N)",onClick:s},"New"),C.a.createElement(Nr.a,{className:e.btn,title:"Open Project (\u2318 + O)",component:"label",ref:i},"Open",C.a.createElement("input",{type:"file",onChange:function(e){var t;(null===(t=e.target)||void 0===t?void 0:t.files)&&e.target.files[0]&&Xr(e.target.files[0]).then((function(e){try{e instanceof ArrayBuffer&&l(xa(e))}catch(t){a({open:!0,component:C.a.createElement(wr.a,{display:"flex",alignItems:"center"},C.a.createElement(la.a,null),"".concat(t.toString()))})}}))},accept:".sbf",hidden:!0})),C.a.createElement(Nr.a,{className:e.btn,title:"Save Project (\u2318 + S)",onClick:u},"Save"),C.a.createElement(Aa,{className:e.btn,onSave:f})),C.a.createElement(ra.a,{size:"small",component:"a",href:"https://github.com/SilenceLeo/snowb-bmf",target:"_blank",title:"GitHub"},C.a.createElement(oa.a,null)),C.a.createElement(ca.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:r.open,onClose:function(){a((function(e){return Object(U.a)(Object(U.a)({},e),{},{open:!1})}))},message:r.component}))})),za=n(502),La=n(505),Ma=n(491),Na=n(489),Da=n(195),Ba=n(33),Xa=n(490),Ya=Object(kr.a)((function(e){var t=e.palette;return Object(Er.a)({picker:{"& *":{color:"".concat(t.text.primary," !important"),borderColor:"".concat(t.divider," !important")},"& input":{background:"none",color:"".concat(t.text.primary," !important"),boxShadow:"none !important",border:"1px solid ".concat(t.divider," !important")}}})})),Fa=function(e){var t=e.open,n=e.anchorEl,r=e.color,a=e.onChange,o=e.placement,i=Ya(),l=function(){var e=Object(Ba.a)(),t=e.palette;return"light"===t.type?{}:{default:{picker:{background:t.background.titleBar,shadow:e.shadows[24]},alpha:{background:"#fff"},color:{background:"#fff"}}}}();return C.a.createElement(Xa.a,{open:!!t,anchorEl:n,placement:o||"bottom",style:{zIndex:999999}},C.a.createElement(Da.SketchPicker,{color:r,styles:l,className:i.picker,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=e.rgb;a&&a("rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat("undefined"===typeof t.a?1:t.a,")"))}))}))},Ga=Object(kr.a)((function(e){var t=e.palette,n=e.bgPixel;return Object(Er.a)({root:{overflow:"hidden"},swatch:Object(U.a)(Object(U.a)({},n),{},{display:"inline-block",cursor:"pointer"}),color:{width:"46px",height:"24px",border:"5px solid ".concat(t.primary.main),backgroundColor:function(e){return e.color||""}}})})),Wa=function(e){var t=e.color,n=e.onChange,r=Ga(e),a=Object(S.useRef)(null),o=Object(S.useState)(!1),i=Object(Mr.a)(o,2),l=i[0],c=i[1];return C.a.createElement(Na.a,{mouseEvent:"onMouseDown",onClickAway:function(){return c(!1)}},C.a.createElement("div",{"aria-hidden":!0,className:r.swatch,ref:a},C.a.createElement("div",{"aria-hidden":!0,className:r.color,onClick:function(){return c(!l)}}),C.a.createElement(Fa,{open:l,anchorEl:a.current,color:t||"#000000",onChange:n})))},Ra=function(e){var t=e.color,n=e.onChange;return C.a.createElement(Wr,{before:"Color:",childrenWidth:3},C.a.createElement(Wa,{color:t,onChange:n}))},Ha=n(142),Ja=n.n(Ha),Ua=n(4),Ka=n(204),Va=Object(kr.a)((function(e){var t=e.bgPixel,n=e.palette;return Object(Er.a)({root:Object(U.a)(Object(U.a)({},t),{},{width:"12px",height:"12px",border:"solid ".concat(n.primary.main),borderWidth:"0 1px 1px",position:"absolute",cursor:"pointer",marginLeft:"-6px",left:function(e){return e.left||0},zIndex:function(e){return e.isActive?2:1},"&:before,&:after":{position:"absolute",content:'""',width:0,height:0,borderStyle:"solid",left:"0"},"&:before":{top:"-6px",left:"-1px",borderWidth:"0 6px 6px 6px",borderColor:"transparent transparent ".concat(n.primary.dark," transparent")},"&:after":{top:"-5px",borderWidth:"0 5px 5px 5px",borderColor:function(e){var t="dark"===n.type?n.common.white:n.common.black;return"transparent transparent ".concat(e.isActive?t:n.grey[600]," transparent")}}}),color:{width:"100%",height:"100%",pointerEvents:"none",backgroundColor:function(e){return e.color||"transparent"}}})})),qa=function(e){var t=e.left,n=e.top,r=e.color,a=e.isActive,o=e.className,i=Object(Ka.a)(e,["left","top","color","isActive","className"]),l=Va({left:t,top:n,color:r,isActive:a});return C.a.createElement("div",Object.assign({className:Object(Ua.a)(l.root,o)},i),C.a.createElement("div",{className:l.color}))},Qa=Object(kr.a)((function(){return Object(Er.a)({root:{width:"100%",height:"17px",position:"relative",cursor:"crosshair"}})})),Za=function(e){var t=e.className,n=e.palette,r=e.activeId,a=e.onAdd,o=e.onUpdate,i=e.onSelect,l=Qa(e),c=Object(S.useState)(0),s=Object(Mr.a)(c,2),u=s[0],f=s[1],p=Object(S.useState)({x:0,y:0,offset:0}),d=Object(Mr.a)(p,2),b=d[0],h=d[1],g=Object(S.useState)(!1),y=Object(Mr.a)(g,2),m=y[0],O=y[1],v=Object(S.useRef)(null);Object(S.useEffect)((function(){v.current&&f(v.current.clientWidth)}),[v]);var w=Object(S.useCallback)((function(e){if(m&&r)if(1===e.buttons){var t=n.findIndex((function(e){return e.id===r}));if(!(t<0)){var a=Object(Se.a)(n);if(Math.abs(e.clientY-b.y)>50)o(a[t],!0);else{var i=a[t],l=Math.min(Math.max((e.clientX-b.x)/u+b.offset,0),1);a[t]=Object(U.a)(Object(U.a)({},i),{},{offset:l}),o({offset:l})}}}else O(!1)}),[r,m,o,n,b.offset,b.x,b.y,u]),j=Object(S.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),O(!1)}),[]);return Object(S.useEffect)((function(){return m?(window.addEventListener("mousemove",w),window.addEventListener("mouseup",j)):(window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",j)),function(){window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",j)}}),[w,j,m]),C.a.createElement("div",{"aria-hidden":!0,ref:v,className:Object(Ua.a)(l.root,t),onMouseDown:function(e){var t=v.current;if(t&&1===e.buttons){var n=t.getBoundingClientRect().left,r=(e.clientX-n)/u;a(r),O(!0),h({x:e.clientX,y:e.clientY,offset:r})}}},n.map((function(e){return C.a.createElement(qa,{key:e.id,left:u*e.offset,color:e.color,isActive:e.id===r,onMouseDown:function(t){return function(e,t){1===e.buttons&&(e.preventDefault(),e.stopPropagation(),h({x:e.clientX,y:e.clientY,offset:t.offset}),O(!0),i(t.id))}(t,e)}})})))},_a=Object(kr.a)((function(e){var t=e.bgPixel;return{root:Object(U.a)(Object(U.a)({},t),{},{width:function(e){return e.width||"100%"},height:function(e){return e.height||"100%"},border:"1px solid #ccc"}),svg:{width:"100%",height:"100%",verticalAlign:"top"}}})),eo=function(e){var t=_a(e),n=e.palette,r=Object(S.useState)("palette_".concat(Math.random().toString().substr(2,9))),a=Object(Mr.a)(r,1)[0],o=Object(Se.a)(n).sort((function(e,t){return e.offset-t.offset}));return C.a.createElement("div",{className:t.root},C.a.createElement("svg",{className:t.svg},C.a.createElement("defs",null,C.a.createElement("linearGradient",{id:a,x1:"0",y1:"0.5",x2:"1",y2:"0.5"},o.map((function(e){return C.a.createElement("stop",{key:e.id,offset:e.offset,style:{stopColor:e.color}})})))),C.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(a,")")})))},to=function(e){var t=e.children,n=e.palette,r=e.onUpdate,a=e.onAdd,o=Object(S.useRef)(null),i=Object(S.useState)(Object(Se.a)(n)),l=Object(Mr.a)(i,2),c=l[0],s=l[1],u=Object(S.useState)(0),f=Object(Mr.a)(u,2),p=f[0],d=f[1],b=Object(S.useState)(""),h=Object(Mr.a)(b,2),g=h[0],y=h[1],m=Object(S.useState)(!1),O=Object(Mr.a)(m,2),v=O[0],w=O[1];Object(S.useEffect)((function(){if(v){var e=n.map((function(e){return e.id})),t=c.map((function(e){return e.id})),r=Array.from(new Set([].concat(Object(Se.a)(e),Object(Se.a)(t)))).filter((function(e){return!t.includes(e)}));r.length>0&&d(r[0]),w((function(){return!1}))}}),[n,v,c]),Object(S.useEffect)((function(){s(Object(Se.a)(n))}),[n]),Object(S.useEffect)((function(){if(p){var e=n.find((function(e){return e.id===p}));e&&y(e.color)}}),[p,n]);var j=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(p){var a=Object(Se.a)(n),o=a.findIndex((function(e){return e.id===p}));if(t)r([].concat(Object(Se.a)(a.slice(0,o)),Object(Se.a)(a.slice(o+1)))),d(0);else{var i=Object(U.a)(Object(U.a)({},a[o]),e);r([].concat(Object(Se.a)(a.slice(0,o)),[i],Object(Se.a)(a.slice(o+1))))}}};return C.a.createElement(Na.a,{mouseEvent:"onMouseDown",onClickAway:function(){return d(0)}},C.a.createElement("div",{ref:o},C.a.createElement(eo,{palette:n,height:"35px"}),C.a.createElement(Za,{palette:n,activeId:p,onAdd:function(e){var t,r,o=Object(Se.a)(n),i={offset:e,color:"#000"};if(d(0),o.forEach((function(e){e.offset<i.offset&&(!t||t.offset<e.offset)?t=e:(!r||r.offset>e.offset)&&(r=e)})),t&&r){var l=(i.offset-t.offset)/(r.offset-t.offset),c=Ja()(t.color),s=Ja()(r.color),u=(s.red()-c.red())*l+c.red(),f=(s.green()-c.green())*l+c.green(),p=(s.blue()-c.blue())*l+c.blue(),b=(s.alpha()-c.alpha())*l+c.alpha();i.color="rgba(".concat(Math.round(u),",").concat(Math.round(f),",").concat(Math.round(p),",").concat(Math.round(b),")")}else(t||r)&&(i.color=(t||r).color);a(i),w(!0)},onUpdate:j,onSelect:function(e){return d(e||0)}}),t?C.a.cloneElement(t,{open:!!p||v,anchorEl:o.current,color:g,onChange:function(e){return j({color:e})}}):null))},no=Object(kr.a)((function(){return Object(Er.a)({root:{width:function(e){return e.width?"".concat(e.width,"px"):"36px"},height:function(e){return e.width?"".concat(e.width,"px"):"36px"},position:"relative",cursor:"crosshair",overflow:"hidden",borderRadius:"100%",background:"#FFF"},point:{width:"6px",height:"6px",borderRadius:"100%",position:"relative",left:"50%",top:"50%",marginTop:"-2px",background:"#000",pointerEvents:"none",transformOrigin:"0 50%",transform:function(e){return"rotate(".concat(e.angle||0,"deg) translate(").concat((e.width||36)/2-8,"px, 0)")}}})})),ro=function(e){var t=e.onChange,n=Object(S.useRef)(null),r=Object(S.useState)(!1),a=Object(Mr.a)(r,2),o=a[0],i=a[1],l=no(e),c=Object(S.useCallback)((function(e){if(n.current){var r=e.clientX,a=e.clientY,o=n.current.getBoundingClientRect(),i=Math.atan2(a-(o.y+o.height/2),r-(o.x+o.width/2));t(Math.round(i*(180/Math.PI)))}}),[t]),s=Object(S.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),i(!1)}),[]);return Object(S.useEffect)((function(){return o?(window.addEventListener("mousemove",c),window.addEventListener("mouseup",s)):(window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",s)),function(){window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",s)}}),[c,s,o]),C.a.createElement("div",{"aria-hidden":!0,className:l.root,ref:n,onMouseDown:function(e){n.current&&(i(!0),c(e))}},C.a.createElement("div",{className:l.point}))},ao=function(e){var t=e.angle,n=e.onChange;return C.a.createElement(Wr,{before:"Angle:",after:C.a.createElement(ro,{width:24,angle:t,onChange:n})},C.a.createElement(Fr.a,{value:t,fullWidth:!0,type:"number",onChange:function(e){return n(Number(e.target.value))}}))},oo=Object(z.c)((function(e){var t=e.gradient,n=t.type,r=t.angle,a=t.palette,o=t.addColor,i=t.updatePalette,l=t.setAngle,c=t.setType;return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(ao,{angle:r,onChange:l})),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"Type:",component:"div",childrenWidth:8},C.a.createElement(La.a,{row:!0,name:"type",value:n,onChange:function(e){return c(Number(e.target.value))},style:{flexWrap:"nowrap"}},C.a.createElement(Ma.a,{value:Ee.LINEAR,control:C.a.createElement(za.a,{size:"small",color:"default"}),label:"Linear"}),C.a.createElement(Ma.a,{value:Ee.RADIAL,control:C.a.createElement(za.a,{size:"small",color:"default"}),label:"Radial"})))),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(to,{palette:a,onAdd:function(e){return o(e.offset,e.color)},onUpdate:i},C.a.createElement(Fa,null))))})),io=Object(kr.a)((function(e){return Object(Er.a)({root:Object(U.a)({width:e.spacing(12),height:e.spacing(12),display:"flex",alignItems:"center",justifyContent:"center",position:"relative",border:"1px solid ".concat(e.palette.primary.main),cursor:"pointer"},e.bgPixel),image:{maxWidth:"100%",maxHeight:"100%",pointerEvents:"none"}})})),lo=function(e){var t=e.src,n=e.onChange,r=io();return C.a.createElement(wr.a,{component:"label",className:r.root},C.a.createElement("input",{hidden:!0,type:"file",multiple:!0,accept:"image/*",onChange:function(e){e.target.files&&e.target.files.length>0&&Xr(e.target.files[0]).then((function(e){e instanceof ArrayBuffer&&n(e)}))}}),C.a.createElement("img",{className:r.image,src:t,alt:""}))},co=function(e){var t=e.patternTexture,n=t.src,r=t.scale,a=t.repetition,o=t.setRepetition,i=t.setScale,l=t.setImage;return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{component:"div",before:"Scale:",after:C.a.createElement(lo,{src:n,onChange:l})},C.a.createElement(Fr.a,{value:r,fullWidth:!0,type:"number",inputProps:{min:.01,step:.1},onChange:function(e){return i(Number(e.target.value))}}))),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"Repeat:"},C.a.createElement(Ca.a,{value:a,onChange:function(e){return o(e.target.value)},displayEmpty:!0,fullWidth:!0},C.a.createElement(Ta.a,{value:"repeat"},"Repeat"),C.a.createElement(Ta.a,{value:"repeat-x"},"Repeat-x"),C.a.createElement(Ta.a,{value:"repeat-y"},"Repeat-y"),C.a.createElement(Ta.a,{value:"no-repeat"},"No Repeat")))))},so=Object(z.c)((function(e){var t=e.config,n=t.type,r=t.color,a=t.gradient,o=t.patternTexture,i=t.setType,l=t.setColor;return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(La.a,{row:!0,name:"type",value:n,onChange:function(e){return i(Number(e.target.value))}},C.a.createElement(Ma.a,{value:Ve.SOLID,control:C.a.createElement(za.a,{size:"small",color:"default"}),label:"Solid"}),C.a.createElement(Ma.a,{value:Ve.GRADIENT,control:C.a.createElement(za.a,{size:"small",color:"default"}),label:"Gradient"}),C.a.createElement(Ma.a,{value:Ve.IMAGE,control:C.a.createElement(za.a,{size:"small",color:"default"}),label:"Image"}))),0===n?C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Ra,{color:r,onChange:l})):null,1===n?C.a.createElement(oo,{gradient:a}):null,2===n?C.a.createElement(co,{patternTexture:o,src:o.src,scale:o.scale,onChangeImage:o.setImage,onChangeScale:o.setScale}):null)})),uo=Object(z.c)((function(){var e=Ar().fill;return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Lr.a,null,"Fill")),C.a.createElement(so,{config:e}))})),fo=n(492),po=n(493),bo=Object(kr.a)((function(){return Object(Er.a)({disabled:{opacity:.3,pointerEvents:"none"},title:{flex:1}})})),ho=Object(z.c)((function(){var e=bo(),t=Ar(),n=t.stroke,r=t.useStroke,a=t.setUseStroke,o=n.setWidth,i=n.lineJoin,l=n.setLineJoin,c=n.lineCap,s=n.setLineCap;return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{component:"label",display:"flex",alignItems:"center",paddingX:2,marginY:4},C.a.createElement(Lr.a,{component:"div",className:e.title},"Stroke"),"Off",C.a.createElement(fo.a,{size:"small",checked:r,onChange:function(e){return a(e.target.checked)}}),"On"),C.a.createElement("div",{className:r?"":e.disabled},C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"Width:",after:"px"},C.a.createElement(Fr.a,{value:(null===n||void 0===n?void 0:n.width)||0,fullWidth:!0,type:"number",inputProps:{min:0},onChange:function(e){return o(Number(e.target.value))}}))),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"Line Cap:",component:"div",childrenWidth:8},C.a.createElement(po.a,{size:"small",color:"primary"},C.a.createElement(Nr.a,{onClick:function(){return s("butt")},variant:"butt"===c?"contained":"outlined"},"Butt"),C.a.createElement(Nr.a,{onClick:function(){return s("round")},variant:"round"===c?"contained":"outlined"},"Round"),C.a.createElement(Nr.a,{onClick:function(){return s("square")},variant:"square"===c?"contained":"outlined"},"Square")))),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"Line Join:",component:"div",childrenWidth:8},C.a.createElement(po.a,{size:"small",color:"primary"},C.a.createElement(Nr.a,{onClick:function(){return l("miter")},variant:"miter"===i?"contained":"outlined"},"Miter"),C.a.createElement(Nr.a,{onClick:function(){return l("round")},variant:"round"===i?"contained":"outlined"},"Round"),C.a.createElement(Nr.a,{onClick:function(){return l("bevel")},variant:"bevel"===i?"contained":"outlined"},"Bevel")))),C.a.createElement(so,{config:n})))})),go=Object(kr.a)((function(){return Object(Er.a)({disabled:{opacity:.3,pointerEvents:"none"},title:{flex:1}})})),yo=Object(z.c)((function(){var e=Ar(),t=e.shadow,n=e.useShadow,r=e.setUseShadow,a=t.setOffsetX,o=t.setOffsetY,i=t.setBlur,l=t.setColor,c=go();return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{component:"label",display:"flex",alignItems:"center",paddingX:2,marginY:4},C.a.createElement(Lr.a,{component:"div",className:c.title},"Shadow"),"Off",C.a.createElement(fo.a,{size:"small",checked:n,onChange:function(e){return r(e.target.checked)}}),"On"),C.a.createElement("div",{className:n?"":c.disabled},C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"Offset X:",after:"px"},C.a.createElement(Fr.a,{value:(null===t||void 0===t?void 0:t.offsetX)||0,fullWidth:!0,type:"number",disabled:!n,onChange:function(e){return a(Number(e.target.value))}}))),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"Offset Y:",after:"px"},C.a.createElement(Fr.a,{value:(null===t||void 0===t?void 0:t.offsetY)||0,fullWidth:!0,type:"number",disabled:!n,onChange:function(e){return o(Number(e.target.value))}}))),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"Blur:",after:"px"},C.a.createElement(Fr.a,{value:(null===t||void 0===t?void 0:t.blur)||0,fullWidth:!0,type:"number",disabled:!n,inputProps:{style:{textAlign:"right"},min:0},onChange:function(e){return i(Number(e.target.value))}}))),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Ra,{color:(null===t||void 0===t?void 0:t.color)||"",onChange:l}))))})),mo=Object(z.c)((function(){var e=Ar(),t=e.bgColor,n=e.setBgColor;return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{component:"label",display:"flex",alignItems:"center",paddingX:2,marginY:4},C.a.createElement(Lr.a,null,"Background Color")),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Ra,{color:t||"",onChange:n})))})),Oo=Object(kr.a)((function(){return Object(Er.a)({root:{overflow:"hidden",width:"256px"}})})),vo=function(){var e=Oo();return C.a.createElement(wr.a,{bgcolor:"background.sidebar",display:"flex",flexDirection:"column",overflow:"hidden",className:e.root},C.a.createElement(wr.a,{bgcolor:"background.sidebar",boxShadow:2,padding:2},C.a.createElement(Lr.a,{variant:"subtitle2"},"Style Config")),C.a.createElement(wr.a,{flex:1,height:0,overflow:"hidden auto"},C.a.createElement(uo,null),C.a.createElement(zr.a,null),C.a.createElement(ho,null),C.a.createElement(zr.a,null),C.a.createElement(yo,null),C.a.createElement(zr.a,null),C.a.createElement(mo,null)))};var wo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Object(S.useCallback)(t,n),a=Object(S.useCallback)((function(e){e.preventDefault(),e.stopPropagation();var t=e.ctrlKey,n=e.altKey,a=e.deltaX,o=e.deltaY;if(t){var i=-.01;Math.abs(o)>50&&(i*=.1),r({deltaScale:o*i,deltaX:0,deltaY:0})}else{var l=-a,c=-o;0===a&&n&&Math.abs(o)>50&&(l=-o,c=0),r({deltaX:l,deltaY:c,deltaScale:0})}}),[r]);Object(S.useEffect)((function(){if(e.current){var t=e.current;return t.addEventListener("wheel",a,{passive:!1}),function(){return t.removeEventListener("wheel",a)}}}),[e,a])},jo={x:0,y:0};var xo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(S.useState)({ks:!1,ms:!1}),r=Object(Mr.a)(n,2),a=r[0],o=r[1],i=Object(S.useMemo)((function(){return a.ks&&a.ms?2:a.ks?1:0}),[a.ks,a.ms]),l=Object(S.useCallback)(e,t),c=Object(S.useCallback)((function(e){var t=32===e.keyCode&&"keydown"===e.type;a.ks!==t&&o((function(t){return Object(U.a)(Object(U.a)({},t),{},{ks:32===e.keyCode&&"keydown"===e.type})}))}),[a.ks]),s=function(e){if(a.ks){var t=e.clientX,n=e.clientY;jo.x=t,jo.y=n,o((function(e){return Object(U.a)(Object(U.a)({},e),{},{ms:!0})}))}},u=Object(S.useCallback)((function(e){var t=e.clientX,n=e.clientY,r=jo.x,a=jo.y;t-r===0&&n-a===0||(l({offsetX:t-r,offsetY:n-a}),jo.x=t,jo.y=n)}),[l]),f=Object(S.useCallback)((function(){o((function(e){return Object(U.a)(Object(U.a)({},e),{},{ms:!1})}))}),[]);return Object(S.useEffect)((function(){return window.addEventListener("keydown",c),window.addEventListener("keyup",c),function(){window.removeEventListener("keydown",c),window.removeEventListener("keyup",c)}}),[c]),Object(S.useEffect)((function(){return a.ks&&a.ms?(window.addEventListener("mousemove",u),window.addEventListener("mouseup",f)):(window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",f)),function(){window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",f)}}),[f,u,a.ks,a.ms]),[i,s]},ko=Object(kr.a)((function(e){var t=e.bgPixel;return Object(Er.a)({root:{position:"absolute",width:"100%",height:"100%",overflow:"hidden",cursor:function(e){return 2===e.dragState?"grabbing":1===e.dragState?"grab":"default"}},canvas:Object(U.a)(Object(U.a)({},t),{},{transformOrigin:"50% 50%",position:"absolute",left:"50%",top:"50%",width:function(e){return"".concat(e.width,"px")},height:function(e){return"".concat(e.height,"px")},marginLeft:function(e){return"".concat(e.width/-2,"px")},marginTop:function(e){return"".concat(e.height/-2,"px")},transform:function(e){return"scale(".concat(e.scale,") translate(").concat(e.offsetX,"px,").concat(e.offsetY,"px)")},imageRendering:"pixelated"})})})),Eo=Object(z.c)((function(){var e=Tr(),t=e.isPacking,n=e.ui,r=e.layout.padding,a=e.glyphList,o=e.style.bgColor,i=e.packCanvas,l=e.setCanvas,c=n.width,s=n.height,u=n.scale,f=n.offsetX,p=n.offsetY,d=Object(S.useRef)(null),b=Object(S.useRef)(null),h=xo((function(e){var t=e.offsetX,r=e.offsetY,a=n.scale,o=n.offsetX,i=n.offsetY;(0,n.setTransform)({offsetX:o+t/a,offsetY:i+r/a})}),[n]),g=Object(Mr.a)(h,2),y=g[0],m=g[1],O=ko({width:c,height:s,scale:u,offsetX:f,offsetY:p,dragState:y});return wo(b,(function(e){var t=n.offsetX,r=n.offsetY,a=n.scale,o=n.setTransform,i=a+e.deltaScale;o({offsetX:t+e.deltaX/i,offsetY:r+e.deltaY/i,scale:i})}),[n]),Object(S.useEffect)((function(){d.current&&d.current!==i&&l(d.current)}),[d,i,l]),Object(S.useEffect)((function(){if(a&&!t&&c&&s){var e=d.current;if(e){e.width=c,e.height=s;var n=e.getContext("2d");n&&(o&&(n.fillStyle=o,n.fillRect(0,0,e.width,e.height)),a.forEach((function(e){e.source&&0!==e.source.width&&0!==e.source.height&&n.drawImage(e.source,e.x+(r||0),e.y+(r||0))})))}}}),[o,a,t,s,c,r]),C.a.createElement("div",{"aria-hidden":!0,ref:b,className:O.root,onMouseDown:m},C.a.createElement("canvas",{ref:d,className:O.canvas}))}));var Po=n(54),So=Object(kr.a)((function(){return Object(Er.a)({letter:{position:"absolute","&:hover,&$select":{background:"rgba(0,0,0,0.2)",outline:"1px solid #000"}},select:{"& + $next":{background:"rgba(0,0,0,0.1)",outline:"1px dashed #666"}},next:{}})})),Co=Object(z.c)((function(e){var t=e.data,n=t.xOffset,r=t.yOffset,a=t.list,o=So(),i=$r();return C.a.createElement(C.a.Fragment,null,a.map((function(e,t){var a,l="".concat(e.letter).concat(t);return C.a.createElement("div",{"aria-hidden":!0,className:Object(Ua.a)(o.letter,(a={},Object(Po.a)(a,o.select,e.letter===i.selectLetter),Object(Po.a)(a,o.next,e.letter===i.selectNextLetter),a)),style:{width:e.width,height:e.height,left:"".concat(e.x-n,"px"),top:"".concat(e.y-r,"px")},key:l,onClick:function(t){return function(e,t,n){e.stopPropagation(),i.setSelectLetter(t,n)}(t,e.letter,e.next)}})})))})),To=Object(kr.a)((function(e){var t=e.bgPixel;return Object(Er.a)({root:Object(U.a)(Object(U.a)({position:"relative",flex:1,width:"100%",height:"100%",overflow:"hidden"},t),{},{cursor:function(e){return 2===e.dragState?"grabbing":1===e.dragState?"grab":"default"}}),wrap:{transformOrigin:"50% 50%",position:"absolute",left:"50%",top:"50%",width:function(e){return"".concat(e.width,"px")},height:function(e){return"".concat(e.height,"px")},marginLeft:function(e){return"".concat(e.width/-2,"px")},marginTop:function(e){return"".concat(e.height/-2,"px")},transform:function(e){return"scale(".concat(e.scale,") translate(").concat(e.offsetX,"px,").concat(e.offsetY,"px)")},imageRendering:"pixelated"},canvas:{width:"100%",height:"100%"}})})),Ao=Object(z.c)((function(){var e=Tr(),t=Object(S.useState)(null),n=Object(Mr.a)(t,2),r=n[0],a=n[1],o=e.ui,i=e.style.font,l=i.size,c=i.lineHeight,s=i.middle,u=i.hanging,f=i.top,p=i.alphabetic,d=i.ideographic,b=i.bottom,h=i.minBaseLine,g=i.maxBaseLine,y=e.isPacking,m=o.previewScale,O=o.previewOffsetX,v=o.previewOffsetY,w=Object(S.useRef)(null),j=Object(S.useRef)(null),x=xo((function(e){var t=e.offsetX,n=e.offsetY,r=o.previewScale,a=o.previewOffsetX,i=o.previewOffsetY;(0,o.setPreviewTransform)({previewOffsetX:a+t/r,previewOffsetY:i+n/r})}),[o]),k=Object(Mr.a)(x,2),E=k[0],P=k[1],T=To({width:r?r.width:0,height:r?r.height:0,scale:m,offsetX:O,offsetY:v,dragState:E});return wo(j,(function(e){var t=o.previewOffsetX,n=o.previewOffsetY,r=o.previewScale,a=o.setPreviewTransform,i=r+e.deltaScale;a({previewOffsetX:t+e.deltaX/i,previewOffsetY:n+e.deltaY/i,previewScale:i})}),[o]),Object(S.useEffect)((function(){if(w.current&&!y&&r){var e=w.current,t=e.getContext("2d");if(t){var n=l*c;e.width=r.width,e.height=r.height,r.list.forEach((function(e){e.source&&0!==e.source.width&&0!==e.source.height&&t.drawImage(e.source,e.x-r.xOffset,e.y-r.yOffset)}));for(var a=function(e){[s,u,f,p,d,b].forEach((function(a){var o=Math.round(a-h+e*n);t.beginPath(),t.moveTo(-r.xOffset,o+.5-r.yOffset),t.lineTo(r.width,o+.5-r.yOffset),a===h||a===g?(t.strokeStyle="rgba(0,0,0,1)",t.setLineDash([])):(t.strokeStyle="rgba(0,0,0,0.5)",t.setLineDash([10,3,2,3])),t.stroke()})),t.beginPath(),t.moveTo(.5-r.xOffset,e*n-r.yOffset),t.lineTo(.5-r.xOffset,e*n-r.yOffset+g-h),t.strokeStyle="rgba(0,0,0,1)",t.setLineDash([]),t.stroke()},o=0;o<r.lines;o+=1)a(o)}}}),[p,b,r,u,d,y,c,g,s,h,l,f]),Object(S.useEffect)((function(){if(w.current&&!y&&w.current.getContext("2d")){var t=ga(e),n=t.chars,r=t.kernings,i=new Map;r.list.forEach((function(e){var t=e.first,n=e.second,r=e.amount;i.has(t)||i.set(t,new Map);var a=i.get(t);null===a||void 0===a||a.set(n,r)}));var s=new Map;n.list.forEach((function(e){s.set(e.letter,e)}));var u=l*c,f=function(e,t,n,r,a){var o=[],i=e.split(/\r\n|\r|\n/),l=0,c=0,s=0,u=0,f=0,p=0;return i.forEach((function(e,i){f=r*i,p=0;var d=Array.from(e);d.forEach((function(e,r){var i=t.get(e);if(i){var b=d[r+1],h=n.get(e.charCodeAt(0)),g=0;b&&h&&h.has(b.charCodeAt(0))&&(g=h.get(b.charCodeAt(0))||0);var y={x:p+i.xoffset,y:f+i.yoffset,width:i.width||i.xadvance,height:i.height||a,source:i.source,letter:i.letter,next:b};p+=i.xadvance+g,l=Math.min(y.x,l),c=Math.min(y.y,c),s=Math.max(y.x+y.width,s),u=Math.max(y.y+i.height,u),o.push(y)}}))})),{lines:i.length,list:o,xOffset:l,yOffset:c,width:s-l,height:Math.max(u-c,i.length*r-c)}}(o.previewText,s,i,u,g-h);a((function(){return f}))}}),[y,c,g,h,e,l,o.previewText]),C.a.createElement("div",{"aria-hidden":!0,ref:j,className:T.root,onMouseDown:P,onClick:function(){return o.setSelectLetter("","")}},C.a.createElement("div",{className:T.wrap},C.a.createElement("canvas",{ref:w,className:T.canvas}),r?C.a.createElement(Co,{data:r}):null))})),Io=Object(z.c)((function(){var e=$r(),t=e.previewText,n=e.setPreviewText,r=Object(S.useState)(!1),a=Object(Mr.a)(r,2),o=a[0],i=a[1],l=Object(S.useState)(t),c=Object(Mr.a)(l,2),s=c[0],u=c[1];return C.a.createElement(wr.a,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Lr.a,null,"Glyphs")),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Ur.a,{margin:"none",value:o?s:t,fullWidth:!0,multiline:!0,rows:7,variant:"outlined",inputProps:{spellCheck:!1},onChange:function(e){var r=e.target.value;o?u(r):(u(r),r!==t&&n(r))},onCompositionStart:function(){return i(!0)},onCompositionEnd:function(){i(!1),u(s),s!==t&&n(s)}})))})),$o=Object(z.c)((function(){var e=Tr(),t=e.glyphList,n=e.ui,r=t.find((function(e){return e.letter===n.selectLetter}));if(!r)return null;var a=r.adjustMetric,o=r.letter,i=a.xAdvance,l=a.xOffset,c=a.yOffset,s=a.setXAdvance,u=a.setXOffset,f=a.setYOffset;return C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Lr.a,null,'"'.concat(o,'" Adjustment'))),C.a.createElement(Zr,{xAdvance:i,xOffset:l,yOffset:c,setXAdvance:s,setXOffset:u,setYOffset:f}))})),zo=Object(z.c)((function(){var e=Tr(),t=e.glyphList,n=e.ui,r=e.style.font,a=r.opentype,o=r.size,i=Object(S.useState)(0),l=Object(Mr.a)(i,2),c=l[0],s=l[1],u=Object(S.useState)(),f=Object(Mr.a)(u,2),p=f[0],d=f[1],b=Object(S.useState)(0),h=Object(Mr.a)(b,2),g=h[0],y=h[1];Object(S.useEffect)((function(){d(t.find((function(e){return e.letter===n.selectLetter})))}),[t,n.selectLetter]),Object(S.useEffect)((function(){if(p&&n.selectNextLetter&&a){var e=1/a.unitsPerEm*o;s(Math.round(a.getKerningValue(a.charToGlyphIndex(p.letter),a.charToGlyphIndex(n.selectNextLetter))*e))}}),[p,a,o,n.selectNextLetter]);return Object(S.useEffect)((function(){var e;return p&&(y(p.kerning.get(n.selectNextLetter)||0),e=Object(Y.a)(p.kerning,(function(){y(p.kerning.get(n.selectNextLetter)||0)}))),e}),[p,n.selectNextLetter]),p&&n.selectNextLetter?C.a.createElement(C.a.Fragment,null,C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Lr.a,null,'"'.concat(p.letter,'" - "').concat(n.selectNextLetter,'" Kerning'))),C.a.createElement(wr.a,{paddingX:2,marginY:4},C.a.createElement(Wr,{before:"Amount:",after:"px"},C.a.createElement(Fr.a,{value:g+c,fullWidth:!0,type:"number",onChange:function(e){p&&p.steKerning(n.selectNextLetter,Number(e.target.value)-c)}})))):null})),Lo=function(){return C.a.createElement(C.a.Fragment,null,C.a.createElement(Ao,null),C.a.createElement(Gr.a,{container:!0,alignItems:"flex-start"},C.a.createElement(Gr.a,{item:!0,xs:4},C.a.createElement(Io,null)),C.a.createElement(Gr.a,{item:!0,xs:4},C.a.createElement($o,null)),C.a.createElement(Gr.a,{item:!0,xs:4},C.a.createElement(zo,null))))},Mo=Object(kr.a)((function(e){var t=e.palette;return Object(Er.a)({root:{backgroundColor:t.background.default,position:"relative",display:"flex",flex:1,flexDirection:"column"}})})),No=Object(z.c)((function(){var e=$r().showPreview,t=Mo();return C.a.createElement("div",{className:t.root},e?C.a.createElement(Lo,null):C.a.createElement(Eo,null))})),Do=n(499),Bo=n(197),Xo=n.n(Bo),Yo=Object(kr.a)((function(e){var t=e.palette;return Object(Er.a)({root:{minHeight:"auto",minWidth:"80px",maxWidth:"none",height:"34px",lineHeight:"16px",padding:"10px",color:"rgba(255,255,255,0.5)",backgroundColor:"rgb(45, 45, 45)",borderRight:"1px solid ".concat(t.background.default),textTransform:"none",display:"inline-flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer","&:hover":{"& $icon":{opacity:1}},"&:last-child":{borderRight:"0 none"}},selected:{background:t.background.default,color:"#fff","& $icon":{opacity:1}},name:{whiteSpace:"nowrap",position:"relative",background:"inherit"},editor:{color:"rgba(0,0,0,0)"},input:{position:"absolute",width:"100%",height:"100%",left:0,fontSize:"inherit",padding:0,border:"0 none",appearance:"none",color:"inherit",background:"inherit"},icon:{width:"16px",height:"16px",marginLeft:"10px",opacity:0}})})),Fo=function(e){var t=e.name,n=e.useRemove,r=e.selected,a=e.value,o=e.onChange,i=e.onClick,l=e.onRemove,c=e.onRename,s=Object(S.useState)(!1),u=Object(Mr.a)(s,2),f=u[0],p=u[1],d=Object(S.useState)(t),b=Object(Mr.a)(d,2),h=b[0],g=b[1],y=Object(S.useRef)(null),m=Yo(),O=function(e){e.stopPropagation(),l&&l(e,a)};return Object(S.useEffect)((function(){f&&y.current&&y.current.focus(),!f&&c&&c(h,a)}),[f,c,h,a]),Object(S.useEffect)((function(){g(t)}),[t]),C.a.createElement("div",{"aria-hidden":!0,className:Object(Ua.a)(m.root,Object(Po.a)({},m.selected,r)),onClick:function(e){e.stopPropagation(),o&&o(e,a),i&&i(e)},onDoubleClick:function(e){e.stopPropagation(),y.current&&p(!0)},title:"Double click rename"},C.a.createElement("span",{"aria-hidden":!0,className:m.name},f?h:t,C.a.createElement("input",{className:m.input,hidden:!f,ref:y,value:f?h:t,type:"text",onKeyDown:function(e){13===e.keyCode&&y.current&&y.current.blur()},onBlur:function(e){e.preventDefault&&e.preventDefault(),p(!1)},onChange:function(e){g(e.target.value)}})),n?C.a.createElement(Xo.a,{className:m.icon,onClick:O,onDoubleClick:O}):null)},Go=Object(kr.a)((function(e){var t=e.palette,n=e.shadows;return Object(Er.a)({root:{minHeight:"auto",width:"100%",boxShadow:n[2],background:t.background.sidebar,position:"relative",zIndex:1}})})),Wo=Object(z.c)((function(){var e=Go(),t=Sr(),n=t.addProject,r=t.selectProject,a=t.removeProject,o=t.setProjectName,i=t.namedList,l=t.activeId,c=function(e,t){"undefined"!==typeof t&&a(t)};return C.a.createElement(Do.a,{classes:e,value:l,onChange:function(e,t){r(t)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"off",selectionFollowsFocus:!0,TabIndicatorProps:{hidden:!0},onDoubleClick:function(){n()}},i.map((function(e){return C.a.createElement(Fo,{useRemove:i.length>1,name:e.name,value:e.id,key:e.id,onRename:o,onRemove:c})})))})),Ro=n(437),Ho=n(512),Jo=n(511),Uo=Object(kr.a)((function(){return Object(Er.a)({slider:{width:"200px"}})})),Ko=Object(z.c)((function(){var e=$r(),t=e.scale,n=e.setTransform,r=e.previewScale,a=e.setPreviewTransform,o=e.showPreview,i=e.setShowPreview,l=Uo(),c=Object(S.useState)(!1),s=Object(Mr.a)(c,2),u=s[0],f=s[1],p=Object(S.useRef)(null),d=Object(S.useState)([.25,.5,.75,1,1.25,1.5,5,10]),b=Object(Mr.a)(d,1)[0],h=function(e,t){o?a({previewScale:t}):n({scale:t})};return C.a.createElement(wr.a,{paddingX:2,display:"flex",justifyContent:"space-between"},C.a.createElement(wr.a,{component:"label",display:"flex",alignItems:"center"},"Preview",C.a.createElement(fo.a,{size:"small",color:"primary",checked:o,onChange:function(e){return i(e.target.checked)}})),C.a.createElement(Ho.a,{className:l.slider,value:o?r:t,min:.01,max:10,step:.01,onChange:h}),C.a.createElement(Nr.a,{ref:p,onClick:function(){f((function(e){return!e}))}},"".concat(Math.round(1e3*(o?r:t))/10,"%")),C.a.createElement(Xa.a,{open:u,anchorEl:p.current,placement:"top-end"},C.a.createElement(Ro.a,null,C.a.createElement(Na.a,{onClickAway:function(e){p.current&&p.current.contains(e.target)||f(!1)}},C.a.createElement(Jo.a,null,b.map((function(e){return C.a.createElement(Ta.a,{key:e,onClick:function(){return h(0,e),void f(!1)}},"".concat(100*e,"%"))})))))))})),Vo=n(504),qo=n(494),Qo=n(495),Zo=n(199),_o=n.n(Zo),ei=n(202),ti=n.n(ei),ni=n(201),ri=n.n(ni),ai=n(200),oi=n.n(ai),ii=n(503),li=n(210),ci=n(198),si=n.n(ci),ui=Object(kr.a)((function(e){return Object(Er.a)({root:{width:e.spacing(24),height:e.spacing(24),margin:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},image:{maxWidth:"100%",maxHeight:"100%",pointerEvents:"none"},actions:{width:"100%",height:"100%",position:"absolute",left:0,top:0},inputLabel:{width:"100%",height:"100%","& input":{textAlign:"center"}}})})),fi=Object(z.c)((function(e){var t=ui(),n=Tr().removeImage,r=Object(S.useState)(!1),a=Object(Mr.a)(r,2),o=a[0],i=a[1],l=e.glyph,c=Object(S.useState)(l.letter),s=Object(Mr.a)(c,2),u=s[0],f=s[1],p=l.changeSelect,d=l.selected,b=l.setGlyph;return C.a.createElement(Ro.a,{variant:"outlined",className:t.root},C.a.createElement("img",{className:t.image,src:l.src,alt:l.fileName}),C.a.createElement(Gr.a,{container:!0,direction:"column",className:t.actions},C.a.createElement(Gr.a,{item:!0,container:!0,justify:"space-between",alignItems:"center"},C.a.createElement(ii.a,{checked:d,size:"small",color:"default",onChange:function(e){return p(e.target.checked)}}),C.a.createElement(ra.a,{color:"primary",size:"small",onClick:function(){return n(l)}},C.a.createElement(si.a,{fontSize:"small"}))),C.a.createElement(Gr.a,{item:!0,xs:!0,component:"label",className:t.inputLabel,container:!0,alignItems:"flex-end"},C.a.createElement(li.a,{fullWidth:!0,value:o?u:l.letter,onFocus:function(e){return e.target.select()},onInput:function(e){var t=e.target.value;o?(f(t.slice(0,1)),b(t.slice(0,1))):b(t)},onCompositionEnd:function(){i(!1),f((function(e){return e.slice(0,1)})),b(u.slice(0,1))},onCompositionStart:function(){return i(!0)}}))))})),pi=Object(kr.a)((function(){return Object(Er.a)({root:{width:"100%",display:"flex",flexWrap:"wrap"}})})),di=Object(z.c)((function(){var e=Tr().glyphImages,t=pi();return C.a.createElement(wr.a,{className:t.root},Array.from(e).map((function(e){return C.a.createElement(fi,{glyph:e,key:e.src})})))})),bi=Object(kr.a)((function(){return Object(Er.a)({root:{display:"flex",position:"relative"},fixed:{position:"fixed",left:0,top:0,zIndex:999999,width:"100%",height:"100%","& $panel":{maxHeight:"none"}},panel:{width:"100%",display:"flex",flexDirection:"column",maxHeight:"305px"},continer:{flex:1,overflow:"hidden",overflowY:"auto"},listWrap:{minHeight:"224px",height:"100%",width:"100%",overflow:"hidden",overflowY:"auto"}})})),hi=Object(z.c)((function(){var e=bi(),t=Tr().addImages,n=Object(S.useState)(!1),r=Object(Mr.a)(n,2),a=r[0],o=r[1],i=Object(S.useState)(!1),l=Object(Mr.a)(i,2),c=l[0],s=l[1],u=function(e){var n=Array.from(e).filter((function(e){return/^image\//.test(e.type)}));n.length&&Promise.all(n.map((function(e){return Xr(e).then((function(t){if(!t||"string"===typeof t)return null;var n=e.name.match(/(\S)\.[a-zA-Z0-9]+$/i);return{letter:n?n[1]:"",fileName:e.name,fileType:e.type,buffer:t}}))}))).then((function(e){t(e.filter((function(e){return e})))}))},f=function(e){var t=e.target;27===e.keyCode&&(t&&"INPUT"===t.tagName?t&&t.blur():o(!1))};return Object(S.useEffect)((function(){return a?window.addEventListener("keydown",f):window.removeEventListener("keydown",f),function(){return window.removeEventListener("keydown",f)}}),[a]),C.a.createElement(wr.a,{onDragEnter:function(e){return e.preventDefault()},onDragOver:function(e){return e.preventDefault()},onDrop:function(e){e.preventDefault(),u(e.dataTransfer.files)},className:Object(Ua.a)(e.root,Object(Po.a)({},e.fixed,a))},C.a.createElement(Vo.a,{className:e.panel,expanded:a||c,onChange:function(){s((function(e){return a||!e}))},TransitionProps:{style:a||c?{flex:1,overflow:"hidden",overflowY:"auto"}:{}}},C.a.createElement(qo.a,{expandIcon:a?void 0:C.a.createElement(_o.a,null)},C.a.createElement(Gr.a,{container:!0,alignItems:"center"},C.a.createElement(Gr.a,{item:!0},C.a.createElement(Lr.a,null,"Image Glyph List")),C.a.createElement(Gr.a,{item:!0,xs:!0,container:!0,justify:"center"},C.a.createElement(Nr.a,{component:"label",color:"primary",size:"small",variant:"contained",startIcon:C.a.createElement(oi.a,null)},"Select Images",C.a.createElement("input",{hidden:!0,type:"file",multiple:!0,accept:"image/*",onChange:function(e){if(e.target.files){var t=e.target.files;u(t)}}}))),C.a.createElement(Gr.a,{item:!0},C.a.createElement(ra.a,{component:"div",onClick:function(e){e&&e.stopPropagation(),o((function(e){return!e}))}},a?C.a.createElement(ri.a,null):C.a.createElement(ti.a,null))))),C.a.createElement(Qo.a,{className:e.continer},C.a.createElement(wr.a,{className:e.listWrap},C.a.createElement(di,null)))))})),gi=Object(kr.a)((function(e){var t=e.palette,n=e.shadows;return Object(Er.a)({root:{position:"relative",flex:1,display:"flex",flexDirection:"column",justifyContent:"center",width:0},tabsRoot:{minHeight:"auto",width:"100%",boxShadow:n[2],background:t.background.sidebar,position:"relative",zIndex:1},tabRoot:{minHeight:"auto",minWidth:"auto",maxWidth:"none",height:"34px",color:"rgba(255,255,255,0.5)",borderRight:"1px solid ".concat(t.background.default),textTransform:"none"},tabSelected:{background:t.background.default},tabWrapper:{color:"#FFF"}})})),yi=function(){var e=gi();return C.a.createElement(wr.a,{className:e.root},C.a.createElement(Wo,null),C.a.createElement(No,null),C.a.createElement(Ko,null),C.a.createElement(hi,null))},mi=Object(kr.a)((function(e){var t=e.zIndex;return Object(Er.a)({root:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},content:{display:"flex",flex:1,position:"relative",height:"0",overflow:"hidden"},loadingBackdrop:{zIndex:t.drawer+1,color:"#fff"}})})),Oi=Object(z.c)((function(){var e=mi(),t=Pr().ui;return C.a.createElement(wr.a,{className:e.root},C.a.createElement($a,null),C.a.createElement(wr.a,{className:e.content},C.a.createElement(ta,null),C.a.createElement(yi,null),C.a.createElement(vo,null)),C.a.createElement(jr.a,{className:e.loadingBackdrop,open:!!t.globalLoader},C.a.createElement(xr.a,{color:"inherit"})))}));var vi=function(){return C.a.createElement(I.a,{theme:vr},C.a.createElement($.a,null),C.a.createElement(z.b,{ui:new X,workspace:new br},C.a.createElement(Oi,null)))},wi=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ji(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}A.a.render(C.a.createElement(vi,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");wi?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ji(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ji(t,e)}))}}()}},[[230,1,2]]]);
//# sourceMappingURL=main.522fa8b7.chunk.js.map